2019-07-24T00:01:10+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1730401@vistec.ac.th' OR email = '1730401@vistec.ac.th') AND status_id = 1;
2019-07-24T00:01:10+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = '1730401@vistec.ac.th' OR email = '1730401@vistec.ac.th');
2019-07-24T00:01:10+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T00:01:10+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T00:01:10+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T00:01:10+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T00:01:10+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T00:01:10+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '6fd016bf47bb453d2d7b69844c85a1882fb2ae8c',
			salt = '0e718f75',
			fname = 'Taya',
			lname = 'Saothayanun',
			email = '1730401@vistec.ac.th',
			username = 'maotaysa',
			homepageId = '1',
			last_modified = '2019-07-24 00:01:10',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b6fa0697df',
			language = 'en_us',
			lastlogin = '2019-07-24 00:01:10',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '475';
2019-07-24T00:01:10+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T00:01:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T00:01:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T00:01:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:01:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:01:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T00:01:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T00:01:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T00:01:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:01:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T00:01:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '475' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T00:01:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475');
2019-07-24T00:01:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T00:01:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T00:01:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T00:01:11+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T00:01:11+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T00:48:35+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwpandu' OR email = 'chwpandu') AND status_id = 1;
2019-07-24T00:48:35+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chwpandu' OR email = 'chwpandu');
2019-07-24T00:48:35+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T00:48:35+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T00:48:35+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T00:48:35+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T00:48:35+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T00:48:35+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '11d04029d6afd0be22580a80023b082af3a264e6',
			salt = '43422d6a',
			fname = 'Pannida',
			lname = 'Dugkhuntod',
			email = 's15_pannida.d@vistec.ac.th',
			username = 'chwpandu',
			homepageId = '1',
			last_modified = '2019-07-24 00:48:35',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c89d4cb4a9f9',
			language = 'en_us',
			lastlogin = '2019-07-24 00:48:35',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '421';
2019-07-24T00:48:35+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T00:48:35+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 00:48:35' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 00:48:35' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T00:48:35+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:48:35+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T00:48:35+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T00:48:35+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T00:48:35+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T00:48:35+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T00:48:35+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T00:48:35+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T00:48:35+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T00:48:35+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T00:48:35+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T00:48:35+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T00:48:35+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:48:35+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:48:35+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T00:48:35+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T00:48:35+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T00:48:35+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T00:48:35+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T00:48:35+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T00:48:35+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '11d04029d6afd0be22580a80023b082af3a264e6',
			salt = '43422d6a',
			fname = 'Pannida',
			lname = 'Dugkhuntod',
			email = 's15_pannida.d@vistec.ac.th',
			username = 'chwpandu',
			homepageId = '1',
			last_modified = '2019-07-24 00:48:35',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c89d4cb4a9f9',
			language = 'en_us',
			lastlogin = '2019-07-24 00:48:35',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '421';
2019-07-24T00:48:35+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('421' = -1 OR ru.user_id = '421') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T00:48:35+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T00:48:41+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T00:48:41+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T00:48:41+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:48:41+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:48:41+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T00:48:41+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T00:48:41+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T00:48:41+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:48:41+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T00:48:41+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T00:48:41+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T00:48:41+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T00:48:41+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T00:48:41+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T00:48:41+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T00:48:41+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T00:48:50+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T00:48:50+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T00:48:50+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:48:50+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:48:50+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T00:48:50+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T00:48:50+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T00:48:50+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:48:50+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T00:48:50+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T00:48:50+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T00:48:50+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T00:48:50+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T00:48:50+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T00:48:50+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T00:48:50+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T00:49:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T00:49:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:49:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:49:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T00:49:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T00:49:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T00:49:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T00:49:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T00:49:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T00:49:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T00:49:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T00:49:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T00:49:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T00:49:42+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T00:49:42+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T00:49:42+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T00:49:42+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 07:00:00' AND ri.start_date <= '2019-07-24 08:00:00') OR
					(ri.end_date >= '2019-07-24 07:00:00' AND ri.end_date <= '2019-07-24 08:00:00') OR
					(ri.start_date <= '2019-07-24 07:00:00' AND ri.end_date >= '2019-07-24 08:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-24 07:00:00' AND bi.start_date <= '2019-07-24 08:00:00')
				OR
				(bi.end_date >= '2019-07-24 07:00:00' AND bi.end_date <= '2019-07-24 08:00:00')
				OR
				(bi.start_date <= '2019-07-24 07:00:00' AND bi.end_date >= '2019-07-24 08:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-24 00:50:10', null, null, '0', false, 'none', '', '1', '1', '421', null);
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3458', '2', '1');
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('27', '1', '2', '3458');
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('37', '1', 'None', '3458');
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '3458');
2019-07-24T00:50:10+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('49', '1', 'Powder', '3458');
2019-07-24T00:50:11+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-24 07:00:00', '2019-07-24 08:00:00', '5d3748d2d31d7159433156', '3458', null);
2019-07-24T00:50:11+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3445', '421', '1');
2019-07-24T00:50:11+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T00:50:11+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T00:50:11+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T00:50:11+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T00:50:11+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T00:50:11+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T00:50:12+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T00:50:12+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T00:50:12+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:50:12+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:50:12+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T00:50:12+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T00:50:12+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T00:50:12+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:50:12+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T00:50:12+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T00:50:12+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T00:50:12+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T00:50:12+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T00:50:12+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T00:50:12+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T00:50:12+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T00:50:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 00:50:27' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 00:50:27' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T00:50:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:50:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T00:50:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T00:50:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T00:50:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T00:50:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T00:50:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T00:50:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T00:50:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T00:50:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T00:50:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T00:50:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T00:50:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:50:27+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:50:28+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T00:50:28+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T00:50:28+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T00:50:28+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T00:50:28+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T00:50:28+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T00:50:28+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '11d04029d6afd0be22580a80023b082af3a264e6',
			salt = '43422d6a',
			fname = 'Pannida',
			lname = 'Dugkhuntod',
			email = 's15_pannida.d@vistec.ac.th',
			username = 'chwpandu',
			homepageId = '1',
			last_modified = '2019-07-24 00:50:28',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c89d4cb4a9f9',
			language = 'en_us',
			lastlogin = '2019-07-24 00:48:35',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '421';
2019-07-24T00:50:28+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('421' = -1 OR ru.user_id = '421') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T00:50:28+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d3748d2d31d7159433156' AND
			rs.status_id <> 2;
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3458'
		ORDER BY resource_level_id, r.name;
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3445';
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3458';
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3458';
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3458';
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3458';
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3445';
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T00:50:34+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T07:42:52+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'stpayu' OR email = 'stpayu') AND status_id = 1;
2019-07-24T07:42:52+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'stpayu' OR email = 'stpayu');
2019-07-24T07:42:52+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-07-24T07:42:52+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T07:42:52+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-07-24T07:42:52+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-07-24T07:42:52+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-07-24T07:42:52+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '657901d65514abdde9e84958b7c3da491d26a9e6',
			salt = '49e7173e',
			fname = 'Salatan',
			lname = 'Duangdangchote',
			email = 'Salatan.d_s17@vistec.ac.th',
			username = 'stpayu',
			homepageId = '1',
			last_modified = '2019-07-24 07:42:52',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c91ea0c87c0a',
			language = 'en_us',
			lastlogin = '2019-07-24 07:42:52',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '524';
2019-07-24T07:42:52+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T07:42:53+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 07:42:53' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 07:42:53' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T07:42:53+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T07:42:53+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T07:42:53+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '524' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T07:42:53+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524');
2019-07-24T07:42:53+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T07:42:53+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-07-24T07:42:53+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-07-24T07:42:53+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T07:42:53+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-07-24T07:42:53+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-07-24T07:42:53+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-07-24T07:42:53+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T07:42:53+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T07:42:53+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T07:42:54+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-07-24T07:42:54+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-07-24T07:42:54+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T07:42:54+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-07-24T07:42:54+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-07-24T07:42:54+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-07-24T07:42:54+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '657901d65514abdde9e84958b7c3da491d26a9e6',
			salt = '49e7173e',
			fname = 'Salatan',
			lname = 'Duangdangchote',
			email = 'Salatan.d_s17@vistec.ac.th',
			username = 'stpayu',
			homepageId = '1',
			last_modified = '2019-07-24 07:42:54',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c91ea0c87c0a',
			language = 'en_us',
			lastlogin = '2019-07-24 07:42:52',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '524';
2019-07-24T07:42:54+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('524' = -1 OR ru.user_id = '524') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T07:42:54+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d33e461b56c4686431830' AND
			rs.status_id <> 2;
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3388'
		ORDER BY resource_level_id, r.name;
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3375';
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3388';
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3388';
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3388';
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3388';
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3375';
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-07-24T07:43:41+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_instances r
		INNER JOIN reservation_series rs ON r.series_id = rs.series_id
		WHERE
			reference_number = '5d33e461b56c4686431830' AND
			status_id <> 2;
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_instances
		WHERE series_id = '3388';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3388'
		ORDER BY resource_level_id, r.name;
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT ru.*, ri.*
		FROM reservation_users ru
		INNER JOIN reservation_instances ri ON ru.reservation_instance_id = ri.reservation_instance_id
		WHERE series_id = '3388';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3388';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3388';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3388';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3388';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT rg.*, ri.*
			FROM reservation_guests rg
			INNER JOIN reservation_instances ri ON rg.reservation_instance_id = ri.reservation_instance_id
			WHERE series_id = '3388';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 09:00:00' AND ri.start_date <= '2019-07-24 12:00:00') OR
					(ri.end_date >= '2019-07-24 09:00:00' AND ri.end_date <= '2019-07-24 12:00:00') OR
					(ri.start_date <= '2019-07-24 09:00:00' AND ri.end_date >= '2019-07-24 12:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-24 09:00:00' AND bi.start_date <= '2019-07-24 12:00:00')
				OR
				(bi.end_date >= '2019-07-24 09:00:00' AND bi.end_date <= '2019-07-24 12:00:00')
				OR
				(bi.start_date <= '2019-07-24 09:00:00' AND bi.end_date >= '2019-07-24 12:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '524' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524');
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 07:43:51' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-24 07:43:51' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-24 07:43:51' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('524' = -1 OR ru.user_id = '524') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Execute: UPDATE
			reservation_series
		SET
			last_modified = '2019-07-24 07:43:51',
			title = null,
			description = null,
			repeat_type = 'none',
			repeat_options = '',
			status_id = '1',
			owner_id = '524',
			allow_participation = '0'
		WHERE
			series_id = '3388';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '534';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '534';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '534' AND r.resource_id = urp.resource_id;
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '534' AND (null is null OR r.role_level IN (null) );
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '534';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '534';
2019-07-24T07:43:51+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:08:21+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'khptipja' OR email = 'khptipja') AND status_id = 1;
2019-07-24T09:08:21+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'khptipja' OR email = 'khptipja');
2019-07-24T09:08:21+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-07-24T09:08:21+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-07-24T09:08:21+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:08:21+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-07-24T09:08:21+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-07-24T09:08:21+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ba91b73a522395bf7bc376626b9e051e67067ac4',
			salt = '0cd9f08c',
			fname = 'Tiphanan',
			lname = 'Janijai',
			email = 'tiphanan.jan@gmail.com',
			username = 'khptipja',
			homepageId = '1',
			last_modified = '2019-07-24 09:08:21',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d086a1114b8a',
			language = 'en_us',
			lastlogin = '2019-07-24 09:08:21',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '559';
2019-07-24T09:08:21+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T09:08:21+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:08:21+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:08:21+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:08:21+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:08:21+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:08:21+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:08:21+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:08:21+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:08:21+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-07-24T09:08:21+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '559' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:08:21+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559');
2019-07-24T09:08:21+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:08:21+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:08:21+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T09:08:21+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:08:21+07:00 [3895] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:08:28+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:08:28+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:08:28+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:08:28+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:08:28+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:08:28+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:08:28+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:08:28+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:08:28+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-07-24T09:08:28+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '559' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:08:28+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559');
2019-07-24T09:08:28+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:08:28+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:08:28+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T09:08:28+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:08:28+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:16:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'mosrutdo' OR email = 'mosrutdo') AND status_id = 1;
2019-07-24T09:16:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'mosrutdo' OR email = 'mosrutdo');
2019-07-24T09:16:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '533';
2019-07-24T09:16:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '533' AND r.resource_id = urp.resource_id;
2019-07-24T09:16:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '533' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:16:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '533';
2019-07-24T09:16:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '533';
2019-07-24T09:16:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'b4dd3d40b23792f127e3378a935079cc4cbd165f',
			salt = '1ff9cd25',
			fname = 'Ruttiyakorn',
			lname = 'Donthongkwa',
			email = 'rttykn.fresh@gmail.com',
			username = 'mosrutdo',
			homepageId = '1',
			last_modified = '2019-07-24 09:16:20',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c91e7d07c03b',
			language = 'en_us',
			lastlogin = '2019-07-24 09:16:20',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '533';
2019-07-24T09:16:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T09:16:21+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 09:16:21' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 09:16:21' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T09:16:21+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:16:21+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '533' AND r.resource_id = urp.resource_id;
2019-07-24T09:16:21+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '533' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:16:21+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '533')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '533');
2019-07-24T09:16:21+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:16:21+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '533';
2019-07-24T09:16:21+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '533';
2019-07-24T09:16:21+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '533' AND r.resource_id = urp.resource_id;
2019-07-24T09:16:21+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '533' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:16:21+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '533';
2019-07-24T09:16:21+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '533';
2019-07-24T09:16:21+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:16:21+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:16:21+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:16:22+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '533';
2019-07-24T09:16:22+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '533';
2019-07-24T09:16:22+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '533' AND r.resource_id = urp.resource_id;
2019-07-24T09:16:22+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '533' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:16:22+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '533';
2019-07-24T09:16:22+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '533';
2019-07-24T09:16:22+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'b4dd3d40b23792f127e3378a935079cc4cbd165f',
			salt = '1ff9cd25',
			fname = 'Ruttiyakorn',
			lname = 'Donthongkwa',
			email = 'rttykn.fresh@gmail.com',
			username = 'mosrutdo',
			homepageId = '1',
			last_modified = '2019-07-24 09:16:22',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c91e7d07c03b',
			language = 'en_us',
			lastlogin = '2019-07-24 09:16:20',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '533';
2019-07-24T09:16:22+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('533' = -1 OR ru.user_id = '533') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T09:16:22+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:16:31+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:16:31+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:16:31+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:16:31+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:16:31+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:16:31+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:16:31+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:16:31+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:16:31+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '533' AND r.resource_id = urp.resource_id;
2019-07-24T09:16:31+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '533' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:16:31+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '533')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '533');
2019-07-24T09:16:31+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:16:31+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:16:31+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T09:16:31+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:16:31+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:16:37+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:16:37+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:16:37+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:16:37+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:16:37+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:16:37+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:16:37+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:16:37+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:16:37+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '533' AND r.resource_id = urp.resource_id;
2019-07-24T09:16:37+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '533' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:16:37+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '533')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '533');
2019-07-24T09:16:37+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:16:37+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:16:37+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T09:16:37+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:16:37+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:22:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'maonavpa' OR email = 'maonavpa') AND status_id = 1;
2019-07-24T09:22:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'maonavpa' OR email = 'maonavpa');
2019-07-24T09:22:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T09:22:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:22:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T09:22:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T09:22:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0fc50cca7442b739d9ae10b53cf7df01e0a68568',
			salt = '03cfae9c',
			fname = 'Navarut',
			lname = 'Paengjun',
			email = '1830406@vistec.ac.th',
			username = 'maonavpa',
			homepageId = '1',
			last_modified = '2019-07-24 09:22:06',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca1968dd6288',
			language = 'en_us',
			lastlogin = '2019-07-24 09:22:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '484';
2019-07-24T09:22:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T09:22:07+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 09:22:07' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 09:22:07' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T09:22:07+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:22:07+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:07+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '484' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:22:07+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484');
2019-07-24T09:22:07+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:22:07+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T09:22:07+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T09:22:07+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:07+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:22:07+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T09:22:07+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T09:22:07+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:22:07+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:22:07+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:22:09+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T09:22:09+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T09:22:09+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:09+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:22:09+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T09:22:09+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T09:22:09+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0fc50cca7442b739d9ae10b53cf7df01e0a68568',
			salt = '03cfae9c',
			fname = 'Navarut',
			lname = 'Paengjun',
			email = '1830406@vistec.ac.th',
			username = 'maonavpa',
			homepageId = '1',
			last_modified = '2019-07-24 09:22:09',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca1968dd6288',
			language = 'en_us',
			lastlogin = '2019-07-24 09:22:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '484';
2019-07-24T09:22:09+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('484' = -1 OR ru.user_id = '484') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T09:22:09+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:22:17+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:22:17+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:17+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '484' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:22:17+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484');
2019-07-24T09:22:17+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:22:17+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T09:22:17+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T09:22:17+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:17+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:22:17+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T09:22:17+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T09:22:17+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:22:17+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:22:17+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:22:18+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T09:22:18+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T09:22:18+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:18+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:22:18+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T09:22:18+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T09:22:18+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0fc50cca7442b739d9ae10b53cf7df01e0a68568',
			salt = '03cfae9c',
			fname = 'Navarut',
			lname = 'Paengjun',
			email = '1830406@vistec.ac.th',
			username = 'maonavpa',
			homepageId = '1',
			last_modified = '2019-07-24 09:22:18',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca1968dd6288',
			language = 'en_us',
			lastlogin = '2019-07-24 09:22:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '484';
2019-07-24T09:22:18+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:22:18+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:18+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '484' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:22:18+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484');
2019-07-24T09:22:18+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T09:22:18+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:22:30+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'mosphasu' OR email = 'mosphasu') AND status_id = 1;
2019-07-24T09:22:30+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'mosphasu' OR email = 'mosphasu');
2019-07-24T09:22:30+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '509';
2019-07-24T09:22:30+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:30+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '509' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:22:30+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '509';
2019-07-24T09:22:30+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '509';
2019-07-24T09:22:30+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '663037b724ae13ed544f7a34573c40a77cf5a74d',
			salt = '47449e26',
			fname = 'Phansiri',
			lname = 'Suktha',
			email = 'phansiri.koy@gmail.com',
			username = 'mosphasu',
			homepageId = '1',
			last_modified = '2019-07-24 09:22:30',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8ef910a096f',
			language = 'en_us',
			lastlogin = '2019-07-24 09:22:30',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '509';
2019-07-24T09:22:30+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T09:22:30+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 09:22:30' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 09:22:30' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T09:22:30+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:22:30+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:30+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:22:30+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:22:30+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:22:31+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '509';
2019-07-24T09:22:31+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '509';
2019-07-24T09:22:31+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:31+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '509' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:22:31+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '509';
2019-07-24T09:22:31+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '509';
2019-07-24T09:22:31+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:22:31+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:22:31+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:22:32+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '509';
2019-07-24T09:22:32+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '509';
2019-07-24T09:22:32+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:32+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '509' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:22:32+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '509';
2019-07-24T09:22:32+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '509';
2019-07-24T09:22:32+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '663037b724ae13ed544f7a34573c40a77cf5a74d',
			salt = '47449e26',
			fname = 'Phansiri',
			lname = 'Suktha',
			email = 'phansiri.koy@gmail.com',
			username = 'mosphasu',
			homepageId = '1',
			last_modified = '2019-07-24 09:22:32',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8ef910a096f',
			language = 'en_us',
			lastlogin = '2019-07-24 09:22:30',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '509';
2019-07-24T09:22:32+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('509' = -1 OR ru.user_id = '509') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T09:22:32+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:22:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T09:22:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T09:22:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:22:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T09:22:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T09:22:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0fc50cca7442b739d9ae10b53cf7df01e0a68568',
			salt = '03cfae9c',
			fname = 'Navarut',
			lname = 'Paengjun',
			email = '1830406@vistec.ac.th',
			username = 'maonavpa',
			homepageId = '1',
			last_modified = '2019-07-24 09:22:33',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca1968dd6288',
			language = 'en_us',
			lastlogin = '2019-07-24 09:22:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '484';
2019-07-24T09:22:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:22:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '484' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:22:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484');
2019-07-24T09:22:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('8'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:22:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:22:34+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '8';
2019-07-24T09:22:34+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '8';
2019-07-24T09:22:34+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '8';
2019-07-24T09:22:39+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:22:39+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:39+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:22:39+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:22:39+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:22:39+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '509';
2019-07-24T09:22:39+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '509';
2019-07-24T09:22:39+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:39+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '509' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:22:39+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '509';
2019-07-24T09:22:39+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '509';
2019-07-24T09:22:39+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:22:39+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:22:39+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:22:40+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '509';
2019-07-24T09:22:40+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '509';
2019-07-24T09:22:40+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:40+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '509' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:22:40+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '509';
2019-07-24T09:22:40+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '509';
2019-07-24T09:22:40+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '663037b724ae13ed544f7a34573c40a77cf5a74d',
			salt = '47449e26',
			fname = 'Phansiri',
			lname = 'Suktha',
			email = 'phansiri.koy@gmail.com',
			username = 'mosphasu',
			homepageId = '1',
			last_modified = '2019-07-24 09:22:40',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8ef910a096f',
			language = 'en_us',
			lastlogin = '2019-07-24 09:22:30',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '509';
2019-07-24T09:22:40+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:22:40+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:40+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:22:40+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:22:40+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T09:22:40+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:22:49+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '509';
2019-07-24T09:22:49+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '509';
2019-07-24T09:22:49+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:49+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '509' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:22:49+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '509';
2019-07-24T09:22:49+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '509';
2019-07-24T09:22:49+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '663037b724ae13ed544f7a34573c40a77cf5a74d',
			salt = '47449e26',
			fname = 'Phansiri',
			lname = 'Suktha',
			email = 'phansiri.koy@gmail.com',
			username = 'mosphasu',
			homepageId = '1',
			last_modified = '2019-07-24 09:22:49',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8ef910a096f',
			language = 'en_us',
			lastlogin = '2019-07-24 09:22:30',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '509';
2019-07-24T09:22:49+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:22:49+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:22:49+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:22:49+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:22:49+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:22:49+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:22:49+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '25';
2019-07-24T09:22:49+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '25';
2019-07-24T09:22:49+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '25';
2019-07-24T09:23:52+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:23:52+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:23:52+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:23:52+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:23:52+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:23:52+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:23:52+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:23:52+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:23:52+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:23:52+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:23:52+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:23:52+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:23:52+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:23:52+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T09:23:52+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:23:52+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:23:57+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:23:57+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:23:57+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:23:57+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:23:57+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:23:57+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:23:57+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:23:57+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:23:57+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:23:57+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:23:57+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:23:57+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:23:57+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:23:57+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:23:57+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:23:57+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:24:06+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:24:06+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:24:06+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:06+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:06+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:24:06+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:24:06+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:24:06+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:06+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:24:06+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:24:06+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:24:06+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-29 00:00:00' AND ri.start_date <= '2019-08-05 00:00:00') OR
					(ri.end_date >= '2019-07-29 00:00:00' AND ri.end_date <= '2019-08-05 00:00:00') OR
					(ri.start_date <= '2019-07-29 00:00:00' AND ri.end_date >= '2019-08-05 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:24:06+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:24:06+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-29 00:00:00' AND bi.start_date <= '2019-08-05 00:00:00')
				OR
				(bi.end_date >= '2019-07-29 00:00:00' AND bi.end_date <= '2019-08-05 00:00:00')
				OR
				(bi.start_date <= '2019-07-29 00:00:00' AND bi.end_date >= '2019-08-05 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:24:06+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:24:06+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:24:18+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:24:18+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:24:18+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:18+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:18+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:24:18+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:24:18+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:24:18+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:18+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:24:18+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:24:18+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:24:18+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-08-05 00:00:00' AND ri.start_date <= '2019-08-12 00:00:00') OR
					(ri.end_date >= '2019-08-05 00:00:00' AND ri.end_date <= '2019-08-12 00:00:00') OR
					(ri.start_date <= '2019-08-05 00:00:00' AND ri.end_date >= '2019-08-12 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:24:18+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:24:18+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-08-05 00:00:00' AND bi.start_date <= '2019-08-12 00:00:00')
				OR
				(bi.end_date >= '2019-08-05 00:00:00' AND bi.end_date <= '2019-08-12 00:00:00')
				OR
				(bi.start_date <= '2019-08-05 00:00:00' AND bi.end_date >= '2019-08-12 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:24:18+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:24:18+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:24:24+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:24:24+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:24:24+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:24+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:24+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:24:24+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:24:24+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:24:24+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:24+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:24:24+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:24:24+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:24:24+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-29 00:00:00' AND ri.start_date <= '2019-08-05 00:00:00') OR
					(ri.end_date >= '2019-07-29 00:00:00' AND ri.end_date <= '2019-08-05 00:00:00') OR
					(ri.start_date <= '2019-07-29 00:00:00' AND ri.end_date >= '2019-08-05 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:24:24+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:24:24+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-29 00:00:00' AND bi.start_date <= '2019-08-05 00:00:00')
				OR
				(bi.end_date >= '2019-07-29 00:00:00' AND bi.end_date <= '2019-08-05 00:00:00')
				OR
				(bi.start_date <= '2019-07-29 00:00:00' AND bi.end_date >= '2019-08-05 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:24:24+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:24:24+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:24:33+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:24:33+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:24:33+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:33+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:33+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:24:33+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:24:33+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:24:33+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:33+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:24:33+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:24:33+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:24:33+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-08-05 00:00:00' AND ri.start_date <= '2019-08-12 00:00:00') OR
					(ri.end_date >= '2019-08-05 00:00:00' AND ri.end_date <= '2019-08-12 00:00:00') OR
					(ri.start_date <= '2019-08-05 00:00:00' AND ri.end_date >= '2019-08-12 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:24:33+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:24:33+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-08-05 00:00:00' AND bi.start_date <= '2019-08-12 00:00:00')
				OR
				(bi.end_date >= '2019-08-05 00:00:00' AND bi.end_date <= '2019-08-12 00:00:00')
				OR
				(bi.start_date <= '2019-08-05 00:00:00' AND bi.end_date >= '2019-08-12 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:24:33+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:24:33+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:24:40+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:24:40+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:24:40+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:40+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:40+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:24:40+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:24:40+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:24:40+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:40+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:24:40+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:24:40+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:24:40+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-08-12 00:00:00' AND ri.start_date <= '2019-08-19 00:00:00') OR
					(ri.end_date >= '2019-08-12 00:00:00' AND ri.end_date <= '2019-08-19 00:00:00') OR
					(ri.start_date <= '2019-08-12 00:00:00' AND ri.end_date >= '2019-08-19 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:24:40+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:24:40+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-08-12 00:00:00' AND bi.start_date <= '2019-08-19 00:00:00')
				OR
				(bi.end_date >= '2019-08-12 00:00:00' AND bi.end_date <= '2019-08-19 00:00:00')
				OR
				(bi.start_date <= '2019-08-12 00:00:00' AND bi.end_date >= '2019-08-19 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:24:40+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:24:40+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:24:52+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:24:52+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:24:52+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:52+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:52+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:24:52+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:24:52+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:24:52+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:24:52+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:24:52+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:24:52+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:24:52+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-08-05 00:00:00' AND ri.start_date <= '2019-08-12 00:00:00') OR
					(ri.end_date >= '2019-08-05 00:00:00' AND ri.end_date <= '2019-08-12 00:00:00') OR
					(ri.start_date <= '2019-08-05 00:00:00' AND ri.end_date >= '2019-08-12 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:24:52+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:24:52+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-08-05 00:00:00' AND bi.start_date <= '2019-08-12 00:00:00')
				OR
				(bi.end_date >= '2019-08-05 00:00:00' AND bi.end_date <= '2019-08-12 00:00:00')
				OR
				(bi.start_date <= '2019-08-05 00:00:00' AND bi.end_date >= '2019-08-12 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:24:52+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:24:52+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:25:03+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:25:03+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:25:03+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:25:03+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:25:03+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:25:03+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:25:03+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:25:03+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:25:03+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:25:03+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:25:03+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:25:03+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-29 00:00:00' AND ri.start_date <= '2019-08-05 00:00:00') OR
					(ri.end_date >= '2019-07-29 00:00:00' AND ri.end_date <= '2019-08-05 00:00:00') OR
					(ri.start_date <= '2019-07-29 00:00:00' AND ri.end_date >= '2019-08-05 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:25:03+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:25:03+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-29 00:00:00' AND bi.start_date <= '2019-08-05 00:00:00')
				OR
				(bi.end_date >= '2019-07-29 00:00:00' AND bi.end_date <= '2019-08-05 00:00:00')
				OR
				(bi.start_date <= '2019-07-29 00:00:00' AND bi.end_date >= '2019-08-05 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:25:03+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:25:03+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:25:44+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:25:44+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:25:44+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:25:44+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:25:44+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:25:44+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:25:44+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:25:44+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:25:44+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:25:44+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:25:44+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:25:44+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:25:44+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:25:44+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:25:44+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:25:44+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:25:58+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:25:58+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:25:58+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:25:58+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:25:58+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:25:58+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:25:58+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:25:58+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:25:58+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:25:58+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:25:58+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:25:58+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-29 00:00:00' AND ri.start_date <= '2019-08-05 00:00:00') OR
					(ri.end_date >= '2019-07-29 00:00:00' AND ri.end_date <= '2019-08-05 00:00:00') OR
					(ri.start_date <= '2019-07-29 00:00:00' AND ri.end_date >= '2019-08-05 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:25:58+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:25:58+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-29 00:00:00' AND bi.start_date <= '2019-08-05 00:00:00')
				OR
				(bi.end_date >= '2019-07-29 00:00:00' AND bi.end_date <= '2019-08-05 00:00:00')
				OR
				(bi.start_date <= '2019-07-29 00:00:00' AND bi.end_date >= '2019-08-05 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:25:58+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:25:58+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:26:25+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:26:25+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:26:25+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:26:25+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:26:25+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:26:25+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:26:25+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:26:25+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:26:25+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:26:25+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:26:25+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:26:25+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-08-05 00:00:00' AND ri.start_date <= '2019-08-12 00:00:00') OR
					(ri.end_date >= '2019-08-05 00:00:00' AND ri.end_date <= '2019-08-12 00:00:00') OR
					(ri.start_date <= '2019-08-05 00:00:00' AND ri.end_date >= '2019-08-12 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:26:25+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:26:25+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-08-05 00:00:00' AND bi.start_date <= '2019-08-12 00:00:00')
				OR
				(bi.end_date >= '2019-08-05 00:00:00' AND bi.end_date <= '2019-08-12 00:00:00')
				OR
				(bi.start_date <= '2019-08-05 00:00:00' AND bi.end_date >= '2019-08-12 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:26:25+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:26:25+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:26:37+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:26:37+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:26:37+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:26:37+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:26:37+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:26:37+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:26:37+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:26:37+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:26:37+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:26:37+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:26:37+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:26:37+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-08-12 00:00:00' AND ri.start_date <= '2019-08-19 00:00:00') OR
					(ri.end_date >= '2019-08-12 00:00:00' AND ri.end_date <= '2019-08-19 00:00:00') OR
					(ri.start_date <= '2019-08-12 00:00:00' AND ri.end_date >= '2019-08-19 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:26:37+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:26:37+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-08-12 00:00:00' AND bi.start_date <= '2019-08-19 00:00:00')
				OR
				(bi.end_date >= '2019-08-12 00:00:00' AND bi.end_date <= '2019-08-19 00:00:00')
				OR
				(bi.start_date <= '2019-08-12 00:00:00' AND bi.end_date >= '2019-08-19 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:26:37+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:26:37+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:26:43+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:26:43+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:26:43+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:26:43+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:26:43+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:26:43+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:26:43+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:26:43+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:26:43+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:26:43+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:26:43+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:26:43+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-08-05 00:00:00' AND ri.start_date <= '2019-08-12 00:00:00') OR
					(ri.end_date >= '2019-08-05 00:00:00' AND ri.end_date <= '2019-08-12 00:00:00') OR
					(ri.start_date <= '2019-08-05 00:00:00' AND ri.end_date >= '2019-08-12 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:26:43+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:26:43+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-08-05 00:00:00' AND bi.start_date <= '2019-08-12 00:00:00')
				OR
				(bi.end_date >= '2019-08-05 00:00:00' AND bi.end_date <= '2019-08-12 00:00:00')
				OR
				(bi.start_date <= '2019-08-05 00:00:00' AND bi.end_date >= '2019-08-12 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:26:43+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:26:43+07:00 [12231] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:26:48+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:26:48+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:26:48+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:26:48+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:26:48+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:26:48+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:26:48+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:26:48+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:26:48+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:26:48+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:26:48+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:26:48+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-29 00:00:00' AND ri.start_date <= '2019-08-05 00:00:00') OR
					(ri.end_date >= '2019-07-29 00:00:00' AND ri.end_date <= '2019-08-05 00:00:00') OR
					(ri.start_date <= '2019-07-29 00:00:00' AND ri.end_date >= '2019-08-05 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:26:48+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:26:48+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-29 00:00:00' AND bi.start_date <= '2019-08-05 00:00:00')
				OR
				(bi.end_date >= '2019-07-29 00:00:00' AND bi.end_date <= '2019-08-05 00:00:00')
				OR
				(bi.start_date <= '2019-07-29 00:00:00' AND bi.end_date >= '2019-08-05 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:26:48+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:26:48+07:00 [3863] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:28:45+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:28:45+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:28:45+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:28:45+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:28:45+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:28:45+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:28:45+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:28:45+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:28:45+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '509' AND r.resource_id = urp.resource_id;
2019-07-24T09:28:45+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '509' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:28:45+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '509');
2019-07-24T09:28:45+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-08-05 00:00:00' AND ri.start_date <= '2019-08-12 00:00:00') OR
					(ri.end_date >= '2019-08-05 00:00:00' AND ri.end_date <= '2019-08-12 00:00:00') OR
					(ri.start_date <= '2019-08-05 00:00:00' AND ri.end_date >= '2019-08-12 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:28:45+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:28:45+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-08-05 00:00:00' AND bi.start_date <= '2019-08-12 00:00:00')
				OR
				(bi.end_date >= '2019-08-05 00:00:00' AND bi.end_date <= '2019-08-12 00:00:00')
				OR
				(bi.start_date <= '2019-08-05 00:00:00' AND bi.end_date >= '2019-08-12 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:28:45+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:28:45+07:00 [3895] DEBUG sql - [User=Phansiri Suktha (phansiri.koy@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:35:29+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'meshaya' OR email = 'meshaya') AND status_id = 1;
2019-07-24T09:35:29+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'meshaya' OR email = 'meshaya');
2019-07-24T09:35:29+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-07-24T09:35:29+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-07-24T09:35:29+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:35:29+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-07-24T09:35:29+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-07-24T09:35:29+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'c5b2544ab079505945f9ebe1188292854b1f7ffc',
			salt = '4f99ebe6',
			fname = 'Admin',
			lname = 'A.',
			email = 'meshaya.p@vistec.ac.th',
			username = 'Meshaya',
			homepageId = '1',
			last_modified = '2019-07-24 09:35:29',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c920b7a8b805',
			language = 'en_us',
			lastlogin = '2019-07-24 09:35:29',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '545';
2019-07-24T09:35:29+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T09:35:29+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 09:35:29' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 09:35:29' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T09:35:29+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:35:29+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:35:29+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '545';
2019-07-24T09:35:29+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-07-24T09:35:29+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-07-24T09:35:29+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:35:29+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-07-24T09:35:29+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-07-24T09:35:29+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:35:29+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:35:29+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:35:30+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '545';
2019-07-24T09:35:30+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-07-24T09:35:30+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-07-24T09:35:30+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:35:30+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-07-24T09:35:30+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-07-24T09:35:30+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'c5b2544ab079505945f9ebe1188292854b1f7ffc',
			salt = '4f99ebe6',
			fname = 'Admin',
			lname = 'A.',
			email = 'meshaya.p@vistec.ac.th',
			username = 'Meshaya',
			homepageId = '1',
			last_modified = '2019-07-24 09:35:30',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c920b7a8b805',
			language = 'en_us',
			lastlogin = '2019-07-24 09:35:29',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '545';
2019-07-24T09:35:30+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('545' = -1 OR ru.user_id = '545') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T09:35:30+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:35:37+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:35:37+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:35:37+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:35:37+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:35:37+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:35:37+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:35:37+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:35:37+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:35:37+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:35:37+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:35:37+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T09:35:37+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:35:37+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:35:44+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:35:44+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:35:44+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:35:44+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:35:44+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:35:44+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:35:44+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:35:44+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:35:44+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:35:44+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:35:44+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:35:44+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:35:44+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:35:50+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:35:50+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:35:50+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:35:50+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:35:50+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:35:50+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:35:50+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:35:50+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:35:50+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-29 00:00:00' AND ri.start_date <= '2019-08-05 00:00:00') OR
					(ri.end_date >= '2019-07-29 00:00:00' AND ri.end_date <= '2019-08-05 00:00:00') OR
					(ri.start_date <= '2019-07-29 00:00:00' AND ri.end_date >= '2019-08-05 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:35:50+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:35:50+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-29 00:00:00' AND bi.start_date <= '2019-08-05 00:00:00')
				OR
				(bi.end_date >= '2019-07-29 00:00:00' AND bi.end_date <= '2019-08-05 00:00:00')
				OR
				(bi.start_date <= '2019-07-29 00:00:00' AND bi.end_date >= '2019-08-05 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:35:50+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:35:50+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:35:56+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:35:56+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:35:56+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:35:56+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:35:56+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:35:56+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:35:56+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:35:56+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:35:56+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:35:56+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:35:56+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:35:56+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:35:56+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:36:11+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d270116daca4714555160' AND
			rs.status_id <> 2;
2019-07-24T09:36:11+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3187'
		ORDER BY resource_level_id, r.name;
2019-07-24T09:36:11+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3174';
2019-07-24T09:36:11+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3187';
2019-07-24T09:36:11+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3187';
2019-07-24T09:36:11+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3187';
2019-07-24T09:36:11+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3187';
2019-07-24T09:36:11+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3174';
2019-07-24T09:36:11+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:36:11+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:36:11+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:36:11+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T09:36:11+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:36:11+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:36:11+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '549';
2019-07-24T09:36:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:36:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:36:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '16' OR r.schedule_id = '16')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:36:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:36:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:36:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:36:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:36:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '16' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:36:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('16')) AND
					('0' = 1 OR rr.resource_id IN ('25'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:36:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:36:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('16' = -1 OR r.schedule_id = '16')
		ORDER BY bi.start_date ASC;
2019-07-24T09:36:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '16'
		ORDER BY tb.start_time;
2019-07-24T09:36:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '16';
2019-07-24T09:41:08+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'mosrutdo' OR email = 'mosrutdo') AND status_id = 1;
2019-07-24T09:41:19+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'mosrutdo' OR email = 'mosrutdo') AND status_id = 1;
2019-07-24T09:41:19+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'mosrutdo' OR email = 'mosrutdo');
2019-07-24T09:41:19+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '533';
2019-07-24T09:41:19+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '533' AND r.resource_id = urp.resource_id;
2019-07-24T09:41:19+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '533' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:41:19+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '533';
2019-07-24T09:41:19+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '533';
2019-07-24T09:41:19+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'b4dd3d40b23792f127e3378a935079cc4cbd165f',
			salt = '1ff9cd25',
			fname = 'Ruttiyakorn',
			lname = 'Donthongkwa',
			email = 'rttykn.fresh@gmail.com',
			username = 'mosrutdo',
			homepageId = '1',
			last_modified = '2019-07-24 09:41:19',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c91e7d07c03b',
			language = 'en_us',
			lastlogin = '2019-07-24 09:41:19',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '533';
2019-07-24T09:41:19+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T09:41:19+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 09:41:19' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 09:41:19' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T09:41:19+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:41:19+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '533' AND r.resource_id = urp.resource_id;
2019-07-24T09:41:19+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '533' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:41:19+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '533')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '533');
2019-07-24T09:41:19+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:41:19+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '533';
2019-07-24T09:41:19+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '533';
2019-07-24T09:41:19+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '533' AND r.resource_id = urp.resource_id;
2019-07-24T09:41:19+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '533' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:41:19+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '533';
2019-07-24T09:41:19+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '533';
2019-07-24T09:41:19+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:41:19+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:41:19+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:41:20+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '533';
2019-07-24T09:41:20+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '533';
2019-07-24T09:41:20+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '533' AND r.resource_id = urp.resource_id;
2019-07-24T09:41:20+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '533' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:41:20+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '533';
2019-07-24T09:41:20+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '533';
2019-07-24T09:41:20+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'b4dd3d40b23792f127e3378a935079cc4cbd165f',
			salt = '1ff9cd25',
			fname = 'Ruttiyakorn',
			lname = 'Donthongkwa',
			email = 'rttykn.fresh@gmail.com',
			username = 'mosrutdo',
			homepageId = '1',
			last_modified = '2019-07-24 09:41:20',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c91e7d07c03b',
			language = 'en_us',
			lastlogin = '2019-07-24 09:41:19',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '533';
2019-07-24T09:41:20+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('533' = -1 OR ru.user_id = '533') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T09:41:20+07:00 [3895] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:41:53+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:41:53+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:41:53+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:41:53+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:41:53+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:41:53+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:41:53+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:41:53+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:41:53+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '533' AND r.resource_id = urp.resource_id;
2019-07-24T09:41:53+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '533' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:41:53+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '533')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '533');
2019-07-24T09:41:53+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:41:53+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:41:53+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T09:41:53+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:41:53+07:00 [12231] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:41:59+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:41:59+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:41:59+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:41:59+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:41:59+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:41:59+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:41:59+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:41:59+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:41:59+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '533' AND r.resource_id = urp.resource_id;
2019-07-24T09:41:59+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '533' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:41:59+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '533')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '533');
2019-07-24T09:41:59+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:41:59+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:41:59+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T09:41:59+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:41:59+07:00 [3863] DEBUG sql - [User=Ruttiyakorn Donthongkwa (rttykn.fresh@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:44:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'mospatku' OR email = 'mospatku') AND status_id = 1;
2019-07-24T09:44:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'mospatku' OR email = 'mospatku');
2019-07-24T09:44:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '535';
2019-07-24T09:44:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T09:44:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '535' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:44:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '535';
2019-07-24T09:44:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '535';
2019-07-24T09:44:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '318538c12de04eb887ef0b523d395ddea0f0683c',
			salt = '4f7e0097',
			fname = 'Pattanit',
			lname = 'Kullawattanapokin',
			email = 'Pattanit77@gmail.com',
			username = 'mospatku',
			homepageId = '1',
			last_modified = '2019-07-24 09:44:09',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9482dee8f02',
			language = 'en_us',
			lastlogin = '2019-07-24 09:44:09',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '535';
2019-07-24T09:44:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T09:44:09+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 09:44:09' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 09:44:09' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T09:44:09+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:44:09+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T09:44:09+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '535' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:44:09+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535');
2019-07-24T09:44:09+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:44:09+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '535';
2019-07-24T09:44:09+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '535';
2019-07-24T09:44:09+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T09:44:09+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '535' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:44:09+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '535';
2019-07-24T09:44:09+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '535';
2019-07-24T09:44:09+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:44:09+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:44:09+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:44:09+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '535';
2019-07-24T09:44:09+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '535';
2019-07-24T09:44:10+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T09:44:10+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '535' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:44:10+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '535';
2019-07-24T09:44:10+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '535';
2019-07-24T09:44:10+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '318538c12de04eb887ef0b523d395ddea0f0683c',
			salt = '4f7e0097',
			fname = 'Pattanit',
			lname = 'Kullawattanapokin',
			email = 'Pattanit77@gmail.com',
			username = 'mospatku',
			homepageId = '1',
			last_modified = '2019-07-24 09:44:10',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9482dee8f02',
			language = 'en_us',
			lastlogin = '2019-07-24 09:44:09',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '535';
2019-07-24T09:44:10+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('535' = -1 OR ru.user_id = '535') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T09:44:10+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:44:13+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:44:13+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:44:13+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:44:13+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:44:13+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:44:13+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:44:13+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:44:13+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:44:13+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T09:44:13+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '535' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:44:13+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535');
2019-07-24T09:44:13+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:44:13+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:44:13+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T09:44:13+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:44:13+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:44:17+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:44:17+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:44:17+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:44:17+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:44:17+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:44:17+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:44:17+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:44:17+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:44:17+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T09:44:17+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '535' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:44:17+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535');
2019-07-24T09:44:17+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:44:17+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:44:18+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T09:44:18+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:44:18+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:44:23+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:44:23+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:44:23+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:44:23+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:44:23+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:44:23+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:44:23+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:44:23+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:44:23+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T09:44:23+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '535' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:44:23+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535');
2019-07-24T09:44:23+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-29 00:00:00' AND ri.start_date <= '2019-08-05 00:00:00') OR
					(ri.end_date >= '2019-07-29 00:00:00' AND ri.end_date <= '2019-08-05 00:00:00') OR
					(ri.start_date <= '2019-07-29 00:00:00' AND ri.end_date >= '2019-08-05 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:44:23+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:44:23+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-29 00:00:00' AND bi.start_date <= '2019-08-05 00:00:00')
				OR
				(bi.end_date >= '2019-07-29 00:00:00' AND bi.end_date <= '2019-08-05 00:00:00')
				OR
				(bi.start_date <= '2019-07-29 00:00:00' AND bi.end_date >= '2019-08-05 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T09:44:23+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:44:23+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:44:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:44:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:44:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:44:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T09:44:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:44:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:44:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '535';
2019-07-24T09:44:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '535';
2019-07-24T09:44:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T09:44:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '535' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:44:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '535';
2019-07-24T09:44:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '535';
2019-07-24T09:44:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '535';
2019-07-24T09:45:30+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:45:30+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:45:30+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:45:30+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:45:43+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:45:43+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:45:43+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:45:43+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '23';
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '23';
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '23';
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-08-01 13:00:00' AND ri.start_date <= '2019-08-01 18:00:00') OR
					(ri.end_date >= '2019-08-01 13:00:00' AND ri.end_date <= '2019-08-01 18:00:00') OR
					(ri.start_date <= '2019-08-01 13:00:00' AND ri.end_date >= '2019-08-01 18:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('23'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-08-01 13:00:00' AND bi.start_date <= '2019-08-01 18:00:00')
				OR
				(bi.end_date >= '2019-08-01 13:00:00' AND bi.end_date <= '2019-08-01 18:00:00')
				OR
				(bi.start_date <= '2019-08-01 13:00:00' AND bi.end_date >= '2019-08-01 18:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '535' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535');
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '535';
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '535';
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '535' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '535';
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '535';
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 09:47:11' AND ri.start_date <= '2019-09-01 00:00:00') OR
					(ri.end_date >= '2019-07-24 09:47:11' AND ri.end_date <= '2019-09-01 00:00:00') OR
					(ri.start_date <= '2019-07-24 09:47:11' AND ri.end_date >= '2019-09-01 00:00:00')) AND
					('535' = -1 OR ru.user_id = '535') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-24 09:47:11', null, null, '0', false, 'none', '', '1', '1', '535', null);
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3459', '23', '1');
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('33', '1', 'Powders', '3459');
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('32', '1', '', '3459');
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-08-01 13:00:00', '2019-08-01 18:00:00', '5d37c6af4de9b273542239', '3459', null);
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3446', '535', '1');
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '535';
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '535';
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '535' AND (null is null OR r.role_level IN (null) );
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '535';
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '535';
2019-07-24T09:47:11+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:47:14+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:47:14+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:47:14+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:47:14+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:47:14+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:47:14+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:47:14+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:47:14+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:47:14+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T09:47:14+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '535' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:47:14+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535');
2019-07-24T09:47:14+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-29 00:00:00' AND ri.start_date <= '2019-08-05 00:00:00') OR
					(ri.end_date >= '2019-07-29 00:00:00' AND ri.end_date <= '2019-08-05 00:00:00') OR
					(ri.start_date <= '2019-07-29 00:00:00' AND ri.end_date >= '2019-08-05 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:47:14+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:47:14+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-29 00:00:00' AND bi.start_date <= '2019-08-05 00:00:00')
				OR
				(bi.end_date >= '2019-07-29 00:00:00' AND bi.end_date <= '2019-08-05 00:00:00')
				OR
				(bi.start_date <= '2019-07-29 00:00:00' AND bi.end_date >= '2019-08-05 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T09:47:14+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:47:14+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:47:24+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:47:24+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:47:24+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:47:24+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:47:24+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:47:24+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:47:24+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:47:24+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:47:24+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T09:47:24+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '535' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:47:24+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535');
2019-07-24T09:47:24+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:47:24+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:47:24+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T09:47:24+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:47:24+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T09:47:31+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T09:47:31+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T09:47:31+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:47:31+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:47:31+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T09:47:31+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:47:31+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T09:47:31+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T09:47:31+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T09:47:31+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '535' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T09:47:31+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535');
2019-07-24T09:47:31+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T09:47:31+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T09:47:31+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T09:47:31+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T09:47:31+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:12:55+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'mosprach' OR email = 'mosprach') AND status_id = 1;
2019-07-24T10:12:55+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'mosprach' OR email = 'mosprach');
2019-07-24T10:12:55+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '526';
2019-07-24T10:12:55+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:12:55+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '526' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:12:55+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '526';
2019-07-24T10:12:55+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '526';
2019-07-24T10:12:55+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ac6d6719a9894b7648d8ce53c34ac2acf1db90f2',
			salt = '7739b36a',
			fname = 'Praeploy',
			lname = 'Chomkhuntod',
			email = 'praeploy.c18@hotmail.com',
			username = 'mosprach',
			homepageId = '1',
			last_modified = '2019-07-24 10:12:55',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d314513801a2',
			language = 'en_us',
			lastlogin = '2019-07-24 10:12:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '526';
2019-07-24T10:12:55+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T10:12:56+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 10:12:56' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 10:12:56' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T10:12:56+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:12:56+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:12:56+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:12:56+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:12:56+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:12:56+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '526';
2019-07-24T10:12:56+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '526';
2019-07-24T10:12:56+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:12:56+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '526' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:12:56+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '526';
2019-07-24T10:12:56+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '526';
2019-07-24T10:12:56+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:12:56+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:12:56+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:12:56+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '526';
2019-07-24T10:12:56+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '526';
2019-07-24T10:12:56+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:12:56+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '526' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:12:56+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '526';
2019-07-24T10:12:56+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '526';
2019-07-24T10:12:56+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ac6d6719a9894b7648d8ce53c34ac2acf1db90f2',
			salt = '7739b36a',
			fname = 'Praeploy',
			lname = 'Chomkhuntod',
			email = 'praeploy.c18@hotmail.com',
			username = 'mosprach',
			homepageId = '1',
			last_modified = '2019-07-24 10:12:56',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d314513801a2',
			language = 'en_us',
			lastlogin = '2019-07-24 10:12:55',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '526';
2019-07-24T10:12:56+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('526' = -1 OR ru.user_id = '526') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T10:12:56+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:12:59+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:12:59+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:12:59+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:12:59+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:12:59+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:12:59+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:12:59+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:12:59+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:12:59+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:12:59+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:12:59+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:12:59+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:12:59+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:13:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:13:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:13:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:13:14+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:13:14+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:13:14+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:13:14+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:13:15+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:13:15+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:13:15+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:13:15+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:13:15+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:13:15+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:13:15+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:13:15+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:13:15+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:13:15+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:13:15+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:13:15+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:13:58+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:13:58+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:13:58+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:13:58+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:13:58+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:13:58+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:13:58+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:13:58+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:13:58+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:13:58+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:13:58+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:13:58+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-15 00:00:00' AND ri.start_date <= '2019-07-22 00:00:00') OR
					(ri.end_date >= '2019-07-15 00:00:00' AND ri.end_date <= '2019-07-22 00:00:00') OR
					(ri.start_date <= '2019-07-15 00:00:00' AND ri.end_date >= '2019-07-22 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:13:58+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:13:58+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-15 00:00:00' AND bi.start_date <= '2019-07-22 00:00:00')
				OR
				(bi.end_date >= '2019-07-15 00:00:00' AND bi.end_date <= '2019-07-22 00:00:00')
				OR
				(bi.start_date <= '2019-07-15 00:00:00' AND bi.end_date >= '2019-07-22 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:13:58+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:13:58+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:14:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:14:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:14:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:14:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:14:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:14:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:14:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:14:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:14:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:14:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:14:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:14:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:14:00+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:14:02+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:14:02+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:14:02+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:02+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:02+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:14:02+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:14:02+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:14:02+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:02+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:14:02+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:14:02+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:14:02+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-29 00:00:00' AND ri.start_date <= '2019-08-05 00:00:00') OR
					(ri.end_date >= '2019-07-29 00:00:00' AND ri.end_date <= '2019-08-05 00:00:00') OR
					(ri.start_date <= '2019-07-29 00:00:00' AND ri.end_date >= '2019-08-05 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:14:02+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:14:02+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-29 00:00:00' AND bi.start_date <= '2019-08-05 00:00:00')
				OR
				(bi.end_date >= '2019-07-29 00:00:00' AND bi.end_date <= '2019-08-05 00:00:00')
				OR
				(bi.start_date <= '2019-07-29 00:00:00' AND bi.end_date >= '2019-08-05 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:14:02+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:14:02+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:14:04+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:14:04+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:14:04+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:04+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:04+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:14:04+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:14:04+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:14:04+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:04+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:14:04+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:14:04+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:14:04+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:14:04+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:14:05+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:14:05+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:14:05+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:14:25+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:14:25+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:14:25+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:25+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:25+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:14:25+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:14:25+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:14:25+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:25+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:14:25+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:14:25+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:14:25+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:14:25+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:14:25+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:14:25+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:14:25+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:14:30+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:14:30+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:14:30+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:30+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:30+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:14:30+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:14:30+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:14:30+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:30+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:14:30+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:14:30+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:14:30+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:14:30+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:14:30+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:14:30+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:14:30+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:14:34+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:14:34+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:14:34+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:34+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:34+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:14:34+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:14:34+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:14:34+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:34+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:14:34+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:14:34+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:14:34+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:14:34+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:14:34+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:14:34+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:14:34+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:14:37+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:14:37+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:14:37+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:37+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:37+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:14:37+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:14:37+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:14:37+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:14:37+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:14:37+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:14:37+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:14:37+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:14:37+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:14:37+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:14:37+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:14:37+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:15:03+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:15:03+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:15:03+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:03+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:03+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:15:03+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:15:03+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:15:03+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:03+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:15:03+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:15:03+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:15:03+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:15:03+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:15:03+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:15:03+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:15:03+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:15:06+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:15:06+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:15:06+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:06+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:06+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:15:06+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:15:06+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:15:06+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:06+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:15:06+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:15:06+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:15:06+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:15:06+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:15:06+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:15:06+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:15:06+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:15:09+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:15:09+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:15:09+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:09+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:09+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:15:09+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:15:09+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:15:09+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:09+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:15:09+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:15:09+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:15:09+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:15:09+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:15:09+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:15:09+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:15:09+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:15:13+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:15:13+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:15:13+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:13+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:13+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:15:13+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:15:13+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:15:13+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:13+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:15:13+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:15:13+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:15:13+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:15:13+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:15:13+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:15:14+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:15:14+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:15:18+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:15:18+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:15:18+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:18+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:18+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:15:18+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:15:18+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:15:18+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:18+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:15:18+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:15:18+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:15:18+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:15:18+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:15:18+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:15:18+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:15:18+07:00 [3895] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:15:21+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:15:21+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:15:21+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:21+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:21+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:15:21+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:15:21+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:15:21+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:21+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:15:21+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:15:21+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:15:21+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-29 00:00:00' AND ri.start_date <= '2019-08-05 00:00:00') OR
					(ri.end_date >= '2019-07-29 00:00:00' AND ri.end_date <= '2019-08-05 00:00:00') OR
					(ri.start_date <= '2019-07-29 00:00:00' AND ri.end_date >= '2019-08-05 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:15:21+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:15:21+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-29 00:00:00' AND bi.start_date <= '2019-08-05 00:00:00')
				OR
				(bi.end_date >= '2019-07-29 00:00:00' AND bi.end_date <= '2019-08-05 00:00:00')
				OR
				(bi.start_date <= '2019-07-29 00:00:00' AND bi.end_date >= '2019-08-05 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:15:21+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:15:21+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:15:25+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:15:25+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:15:25+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:25+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:25+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:15:25+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:15:25+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:15:25+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:25+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:15:25+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:15:25+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:15:25+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:15:25+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:15:26+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:15:26+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:15:26+07:00 [3863] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:15:44+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:15:44+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:15:44+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:44+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:44+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:15:44+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:15:44+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:15:44+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:15:44+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '526' AND r.resource_id = urp.resource_id;
2019-07-24T10:15:44+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '526' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:15:44+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '526');
2019-07-24T10:15:44+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:15:44+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:15:44+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:15:44+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:15:44+07:00 [12231] DEBUG sql - [User=Praeploy Chomkhuntod (praeploy.c18@hotmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:36:50+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'jarinya' OR email = 'jarinya') AND status_id = 1;
2019-07-24T10:36:50+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'jarinya' OR email = 'jarinya');
2019-07-24T10:36:50+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-07-24T10:36:50+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-07-24T10:36:50+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:36:50+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-07-24T10:36:50+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-07-24T10:36:50+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '37c4d538040eb8fa9fd8d6a9d7f490932315b8cf',
			salt = '3ad035c9',
			fname = 'Admin',
			lname = 'A.',
			email = 'jarinya.s@vistec.ac.th',
			username = 'Jarinya',
			homepageId = '1',
			last_modified = '2019-07-24 10:36:50',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9205ca87fba',
			language = 'en_us',
			lastlogin = '2019-07-24 10:36:50',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '544';
2019-07-24T10:36:50+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T10:36:51+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 10:36:51' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 10:36:51' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T10:36:51+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:36:51+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:36:51+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-07-24T10:36:51+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-07-24T10:36:51+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-07-24T10:36:51+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:36:51+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-07-24T10:36:51+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-07-24T10:36:51+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:36:51+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:36:51+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:36:51+07:00 [12231] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-07-24T10:36:51+07:00 [12231] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-07-24T10:36:51+07:00 [12231] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-07-24T10:36:51+07:00 [12231] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:36:51+07:00 [12231] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-07-24T10:36:51+07:00 [12231] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-07-24T10:36:51+07:00 [12231] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '37c4d538040eb8fa9fd8d6a9d7f490932315b8cf',
			salt = '3ad035c9',
			fname = 'Admin',
			lname = 'A.',
			email = 'jarinya.s@vistec.ac.th',
			username = 'Jarinya',
			homepageId = '1',
			last_modified = '2019-07-24 10:36:51',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9205ca87fba',
			language = 'en_us',
			lastlogin = '2019-07-24 10:36:50',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '544';
2019-07-24T10:36:51+07:00 [12231] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('544' = -1 OR ru.user_id = '544') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T10:36:51+07:00 [12231] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:38:40+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'vippatth' OR email = 'vippatth') AND status_id = 1;
2019-07-24T10:38:40+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'vippatth' OR email = 'vippatth');
2019-07-24T10:38:40+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-07-24T10:38:40+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:38:40+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:38:40+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-07-24T10:38:40+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-07-24T10:38:40+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '60691fc924b5144e421ba52ff7e701ced50532d8',
			salt = '44cabaa8',
			fname = 'Pattarawadee',
			lname = 'Therdkatanyuphong',
			email = '1630303@vistec.ac.th',
			username = 'vippatth',
			homepageId = '1',
			last_modified = '2019-07-24 10:38:40',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca5ef41e48da',
			language = 'en_us',
			lastlogin = '2019-07-24 10:38:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '457';
2019-07-24T10:38:40+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T10:38:40+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:38:40+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:38:40+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:38:40+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:38:40+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:38:40+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:38:40+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:38:40+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:38:40+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:38:40+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:38:40+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-07-24T10:38:40+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:38:40+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:38:40+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-07-24T10:38:40+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-07-24T10:38:40+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-07-24T10:38:46+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:38:46+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:38:46+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:38:46+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:38:46+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:38:46+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:38:46+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:38:46+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:38:46+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:38:46+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:38:46+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-07-24T10:38:46+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:38:46+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:38:47+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:38:47+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:38:47+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:39:06+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:39:06+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:39:06+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:39:06+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:39:06+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:39:06+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:39:06+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:39:06+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:39:06+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:39:06+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:39:06+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-07-24T10:39:06+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:39:06+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:39:06+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-07-24T10:39:06+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-24T10:39:06+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-24T10:39:24+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:39:24+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:39:24+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:39:24+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T10:39:24+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-24T10:39:24+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-24T10:39:24+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-07-24T10:39:24+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-07-24T10:39:24+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:39:24+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:39:24+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-07-24T10:39:24+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-07-24T10:39:24+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-07-24T10:39:32+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-24T10:39:32+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-24T10:39:36+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-24T10:39:36+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-24T10:39:40+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '28';
2019-07-24T10:39:40+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '28';
2019-07-24T10:39:40+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '28';
2019-07-24T10:39:40+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-25 21:00:00' AND ri.start_date <= '2019-07-26 09:00:00') OR
					(ri.end_date >= '2019-07-25 21:00:00' AND ri.end_date <= '2019-07-26 09:00:00') OR
					(ri.start_date <= '2019-07-25 21:00:00' AND ri.end_date >= '2019-07-26 09:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-25 21:00:00' AND bi.start_date <= '2019-07-26 09:00:00')
				OR
				(bi.end_date >= '2019-07-25 21:00:00' AND bi.end_date <= '2019-07-26 09:00:00')
				OR
				(bi.start_date <= '2019-07-25 21:00:00' AND bi.end_date >= '2019-07-26 09:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '22';
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 10:39:41' AND ri.start_date <= '2019-07-27 00:00:00') OR
					(ri.end_date >= '2019-07-24 10:39:41' AND ri.end_date <= '2019-07-27 00:00:00') OR
					(ri.start_date <= '2019-07-24 10:39:41' AND ri.end_date >= '2019-07-27 00:00:00')) AND
					('457' = -1 OR ru.user_id = '457') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-24 10:39:41', null, null, '0', false, 'none', '', '1', '1', '457', null);
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3460', '28', '1');
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-25 21:00:00', '2019-07-26 09:00:00', '5d37d2fcf0a19902795875', '3460', null);
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3447', '457', '1');
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-07-24T10:39:41+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-07-24T10:39:42+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:39:42+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:39:42+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:39:42+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:39:42+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:39:42+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:39:42+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:39:42+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:39:42+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:39:42+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:39:42+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-07-24T10:39:42+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:39:42+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:39:42+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-07-24T10:39:42+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-24T10:39:42+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-24T10:41:49+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1730402@vistec.ac.th' OR email = '1730402@vistec.ac.th') AND status_id = 1;
2019-07-24T10:41:49+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = '1730402@vistec.ac.th' OR email = '1730402@vistec.ac.th');
2019-07-24T10:41:49+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '476';
2019-07-24T10:41:49+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '476' AND r.resource_id = urp.resource_id;
2019-07-24T10:41:49+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '476' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:41:49+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '476';
2019-07-24T10:41:49+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '476';
2019-07-24T10:41:49+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'fb95892799fe0246b3ccd94402acf7fb5739f154',
			salt = '6b8017d6',
			fname = 'Rattanawadee',
			lname = 'Wijitwongwan',
			email = '1730402@vistec.ac.th',
			username = 'maoratwi',
			homepageId = '1',
			last_modified = '2019-07-24 10:41:49',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c92152920308',
			language = 'en_us',
			lastlogin = '2019-07-24 10:41:49',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '476';
2019-07-24T10:41:49+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T10:41:49+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:41:49+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:41:49+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:41:49+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:41:49+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:41:49+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:41:49+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:41:49+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:41:49+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '476' AND r.resource_id = urp.resource_id;
2019-07-24T10:41:49+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '476' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:41:49+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '476')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '476');
2019-07-24T10:41:49+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:41:49+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:41:49+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:41:49+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:41:49+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:41:51+07:00 [3863] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 10:41:51' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 10:41:51' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T10:41:51+07:00 [3863] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:41:51+07:00 [3863] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:41:51+07:00 [3863] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-07-24T10:41:51+07:00 [3863] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-07-24T10:41:51+07:00 [3863] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-07-24T10:41:51+07:00 [3863] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:41:51+07:00 [3863] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-07-24T10:41:51+07:00 [3863] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-07-24T10:41:51+07:00 [3863] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:41:51+07:00 [3863] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:41:51+07:00 [3863] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:41:52+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '544';
2019-07-24T10:41:52+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '544';
2019-07-24T10:41:52+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '544' AND r.resource_id = urp.resource_id;
2019-07-24T10:41:52+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '544' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:41:52+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '544';
2019-07-24T10:41:52+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '544';
2019-07-24T10:41:52+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '37c4d538040eb8fa9fd8d6a9d7f490932315b8cf',
			salt = '3ad035c9',
			fname = 'Admin',
			lname = 'A.',
			email = 'jarinya.s@vistec.ac.th',
			username = 'Jarinya',
			homepageId = '1',
			last_modified = '2019-07-24 10:41:52',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9205ca87fba',
			language = 'en_us',
			lastlogin = '2019-07-24 10:36:50',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '544';
2019-07-24T10:41:52+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('544' = -1 OR ru.user_id = '544') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T10:41:52+07:00 [3895] DEBUG sql - [User=Admin A. (jarinya.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:41:53+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:41:53+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:41:53+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:41:53+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:41:53+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:41:53+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:41:53+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:41:53+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:41:53+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '476' AND r.resource_id = urp.resource_id;
2019-07-24T10:41:53+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '476' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:41:53+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '476')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '476');
2019-07-24T10:41:53+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:41:53+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:41:53+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:41:53+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:41:53+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:41:59+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:41:59+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:41:59+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:41:59+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:41:59+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:41:59+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:41:59+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:41:59+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:41:59+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '476' AND r.resource_id = urp.resource_id;
2019-07-24T10:41:59+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '476' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:41:59+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '476')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '476');
2019-07-24T10:41:59+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:41:59+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:41:59+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T10:41:59+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T10:41:59+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T10:42:02+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:42:02+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:42:02+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:42:02+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-07-24T10:42:02+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:42:02+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-07-24T10:42:02+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-07-24T10:42:02+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:42:02+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:42:02+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-07-24T10:42:02+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-07-24T10:42:02+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:42:02+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:42:02+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:42:03+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-07-24T10:42:03+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-07-24T10:42:03+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:42:03+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:42:03+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-07-24T10:42:03+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-07-24T10:42:03+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '60691fc924b5144e421ba52ff7e701ced50532d8',
			salt = '44cabaa8',
			fname = 'Pattarawadee',
			lname = 'Therdkatanyuphong',
			email = '1630303@vistec.ac.th',
			username = 'vippatth',
			homepageId = '1',
			last_modified = '2019-07-24 10:42:03',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca5ef41e48da',
			language = 'en_us',
			lastlogin = '2019-07-24 10:38:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '457';
2019-07-24T10:42:03+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('457' = -1 OR ru.user_id = '457') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T10:42:03+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:42:09+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:42:09+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:42:09+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:42:09+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T10:42:09+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T10:42:09+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T10:42:09+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '476';
2019-07-24T10:42:09+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '476';
2019-07-24T10:42:09+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '476' AND r.resource_id = urp.resource_id;
2019-07-24T10:42:09+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '476' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:42:09+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '476';
2019-07-24T10:42:09+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '476';
2019-07-24T10:42:09+07:00 [3895] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '476';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 12:00:00' AND ri.start_date <= '2019-07-24 13:00:00') OR
					(ri.end_date >= '2019-07-24 12:00:00' AND ri.end_date <= '2019-07-24 13:00:00') OR
					(ri.start_date <= '2019-07-24 12:00:00' AND ri.end_date >= '2019-07-24 13:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-24 12:00:00' AND bi.start_date <= '2019-07-24 13:00:00')
				OR
				(bi.end_date >= '2019-07-24 12:00:00' AND bi.end_date <= '2019-07-24 13:00:00')
				OR
				(bi.start_date <= '2019-07-24 12:00:00' AND bi.end_date >= '2019-07-24 13:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '476' AND r.resource_id = urp.resource_id;
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '476' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '476')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '476');
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '476';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '476';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '476' AND r.resource_id = urp.resource_id;
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '476' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '476';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '476';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 10:42:31' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-24 10:42:31' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-24 10:42:31' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('476' = -1 OR ru.user_id = '476') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-24 10:42:31', null, null, '0', false, 'none', '', '1', '1', '476', null);
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3461', '19', '1');
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-24 12:00:00', '2019-07-24 13:00:00', '5d37d3a7135f5179289115', '3461', null);
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3448', '476', '1');
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3448', '484', '2');
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '476';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '476';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '476' AND r.resource_id = urp.resource_id;
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '476' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '476';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '476';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T10:42:31+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:42:38+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:42:38+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:42:38+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:42:38+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:42:38+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:42:38+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:42:38+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:42:38+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:42:38+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '476' AND r.resource_id = urp.resource_id;
2019-07-24T10:42:38+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '476' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:42:38+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '476')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '476');
2019-07-24T10:42:38+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:42:38+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:42:38+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T10:42:38+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T10:42:38+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d368df46adb3622866339' AND
			rs.status_id <> 2;
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3438'
		ORDER BY resource_level_id, r.name;
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3425';
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3438';
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3438';
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3438';
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3438';
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3425';
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-07-24T10:43:15+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_instances r
		INNER JOIN reservation_series rs ON r.series_id = rs.series_id
		WHERE
			reference_number = '5d368df46adb3622866339' AND
			status_id <> 2;
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_instances
		WHERE series_id = '3438';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3438'
		ORDER BY resource_level_id, r.name;
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT ru.*, ri.*
		FROM reservation_users ru
		INNER JOIN reservation_instances ri ON ru.reservation_instance_id = ri.reservation_instance_id
		WHERE series_id = '3438';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3438';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3438';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3438';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3438';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT rg.*, ri.*
			FROM reservation_guests rg
			INNER JOIN reservation_instances ri ON rg.reservation_instance_id = ri.reservation_instance_id
			WHERE series_id = '3438';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '26';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '26';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '26';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-26 10:00:00' AND ri.start_date <= '2019-07-27 00:00:00') OR
					(ri.end_date >= '2019-07-26 10:00:00' AND ri.end_date <= '2019-07-27 00:00:00') OR
					(ri.start_date <= '2019-07-26 10:00:00' AND ri.end_date >= '2019-07-27 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-26 10:00:00' AND bi.start_date <= '2019-07-27 00:00:00')
				OR
				(bi.end_date >= '2019-07-26 10:00:00' AND bi.end_date <= '2019-07-27 00:00:00')
				OR
				(bi.start_date <= '2019-07-26 10:00:00' AND bi.end_date >= '2019-07-27 00:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '21';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 10:44:14' AND ri.start_date <= '2019-07-28 00:00:00') OR
					(ri.end_date >= '2019-07-24 10:44:14' AND ri.end_date <= '2019-07-28 00:00:00') OR
					(ri.start_date <= '2019-07-24 10:44:14' AND ri.end_date >= '2019-07-28 00:00:00')) AND
					('457' = -1 OR ru.user_id = '457') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: UPDATE
			reservation_series
		SET
			last_modified = '2019-07-24 10:44:14',
			title = null,
			description = null,
			repeat_type = 'none',
			repeat_options = '',
			status_id = '1',
			owner_id = '457',
			allow_participation = '0'
		WHERE
			series_id = '3438';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-07-24T10:44:14+07:00 [3895] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-07-24T10:44:15+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:44:15+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:44:15+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '457' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:44:15+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '457');
2019-07-24T10:44:15+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:44:15+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-07-24T10:44:15+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-07-24T10:44:15+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:44:15+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:44:15+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-07-24T10:44:15+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-07-24T10:44:15+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:44:15+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:44:15+07:00 [12231] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:44:16+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '457';
2019-07-24T10:44:16+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '457';
2019-07-24T10:44:16+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '457' AND r.resource_id = urp.resource_id;
2019-07-24T10:44:16+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '457' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:44:16+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '457';
2019-07-24T10:44:16+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '457';
2019-07-24T10:44:16+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '60691fc924b5144e421ba52ff7e701ced50532d8',
			salt = '44cabaa8',
			fname = 'Pattarawadee',
			lname = 'Therdkatanyuphong',
			email = '1630303@vistec.ac.th',
			username = 'vippatth',
			homepageId = '1',
			last_modified = '2019-07-24 10:44:16',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca5ef41e48da',
			language = 'en_us',
			lastlogin = '2019-07-24 10:38:40',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '457';
2019-07-24T10:44:16+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('457' = -1 OR ru.user_id = '457') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T10:44:16+07:00 [3863] DEBUG sql - [User=Pattarawadee Therdkatanyuphong (1630303@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:48:08+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'maonavpa' OR email = 'maonavpa') AND status_id = 1;
2019-07-24T10:48:08+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'maonavpa' OR email = 'maonavpa');
2019-07-24T10:48:08+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T10:48:08+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T10:48:08+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:48:08+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T10:48:08+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T10:48:08+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0fc50cca7442b739d9ae10b53cf7df01e0a68568',
			salt = '03cfae9c',
			fname = 'Navarut',
			lname = 'Paengjun',
			email = '1830406@vistec.ac.th',
			username = 'maonavpa',
			homepageId = '1',
			last_modified = '2019-07-24 10:48:08',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca1968dd6288',
			language = 'en_us',
			lastlogin = '2019-07-24 10:48:08',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '484';
2019-07-24T10:48:08+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T10:48:08+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-24T10:48:08+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-24T10:48:08+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-24T10:48:12+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-24T10:48:12+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-24T10:48:12+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-24T10:48:21+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-24T10:48:21+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-24T10:48:21+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-24T10:48:25+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-24T10:48:25+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-24T10:48:25+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-24T10:48:28+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 10:48:28' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 10:48:28' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T10:48:28+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:48:28+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T10:48:28+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '484' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:48:28+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484');
2019-07-24T10:48:28+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:48:28+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T10:48:28+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T10:48:28+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T10:48:28+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:48:28+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T10:48:28+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T10:48:28+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:48:28+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:48:28+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:48:29+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T10:48:29+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T10:48:29+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T10:48:29+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:48:29+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T10:48:29+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T10:48:29+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0fc50cca7442b739d9ae10b53cf7df01e0a68568',
			salt = '03cfae9c',
			fname = 'Navarut',
			lname = 'Paengjun',
			email = '1830406@vistec.ac.th',
			username = 'maonavpa',
			homepageId = '1',
			last_modified = '2019-07-24 10:48:29',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca1968dd6288',
			language = 'en_us',
			lastlogin = '2019-07-24 10:48:08',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '484';
2019-07-24T10:48:29+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('484' = -1 OR ru.user_id = '484') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T10:48:29+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:48:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:48:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:48:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:48:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:48:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:48:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:48:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:48:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:48:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T10:48:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '484' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:48:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484');
2019-07-24T10:48:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:48:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:48:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:48:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:48:33+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:48:46+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:48:46+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:48:46+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:48:46+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:48:46+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:48:46+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:48:46+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:48:46+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:48:46+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T10:48:46+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '484' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:48:46+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484');
2019-07-24T10:48:46+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:48:46+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:48:46+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T10:48:46+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T10:48:46+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T10:49:22+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:49:22+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:49:22+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:49:22+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T10:49:22+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T10:49:22+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T10:49:22+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '476';
2019-07-24T10:49:22+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '476';
2019-07-24T10:49:22+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '476' AND r.resource_id = urp.resource_id;
2019-07-24T10:49:22+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '476' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:49:22+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '476';
2019-07-24T10:49:22+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '476';
2019-07-24T10:49:22+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '476';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 16:00:00' AND ri.start_date <= '2019-07-24 18:00:00') OR
					(ri.end_date >= '2019-07-24 16:00:00' AND ri.end_date <= '2019-07-24 18:00:00') OR
					(ri.start_date <= '2019-07-24 16:00:00' AND ri.end_date >= '2019-07-24 18:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-24 16:00:00' AND bi.start_date <= '2019-07-24 18:00:00')
				OR
				(bi.end_date >= '2019-07-24 16:00:00' AND bi.end_date <= '2019-07-24 18:00:00')
				OR
				(bi.start_date <= '2019-07-24 16:00:00' AND bi.end_date >= '2019-07-24 18:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '476' AND r.resource_id = urp.resource_id;
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '476' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '476')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '476');
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '476';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '476';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '476' AND r.resource_id = urp.resource_id;
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '476' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '476';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '476';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 10:49:35' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-24 10:49:35' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-24 10:49:35' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('476' = -1 OR ru.user_id = '476') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-24 10:49:35', null, null, '0', false, 'none', '', '1', '1', '476', null);
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3462', '19', '1');
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-24 16:00:00', '2019-07-24 18:00:00', '5d37d54fa9208335678251', '3462', null);
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3449', '476', '1');
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3449', '484', '2');
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '476';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '476';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '476' AND r.resource_id = urp.resource_id;
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '476' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '476';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '476';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T10:49:35+07:00 [12231] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:49:41+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:49:41+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:49:41+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:49:41+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:49:41+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:49:41+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:49:41+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:49:41+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:49:41+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '476' AND r.resource_id = urp.resource_id;
2019-07-24T10:49:41+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '476' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:49:41+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '476')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '476');
2019-07-24T10:49:41+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:49:41+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:49:41+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T10:49:41+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T10:49:41+07:00 [3863] DEBUG sql - [User=Rattanawadee Wijitwongwan (1730402@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T10:56:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'dacpapna' OR email = 'dacpapna') AND status_id = 1;
2019-07-24T10:56:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'dacpapna' OR email = 'dacpapna');
2019-07-24T10:56:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-07-24T10:56:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T10:56:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:56:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-07-24T10:56:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-07-24T10:56:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '18dce0c4458894b74cff2d157ad6db0f33775c7d',
			salt = '4c596d19',
			fname = 'Papada',
			lname = 'Natsathaporn',
			email = '1630302@vistec.ac.th',
			username = 'dacpapna',
			homepageId = '1',
			last_modified = '2019-07-24 10:56:20',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c85fbdbd0edd',
			language = 'en_us',
			lastlogin = '2019-07-24 10:56:20',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '404';
2019-07-24T10:56:20+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T10:56:20+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 10:56:20' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 10:56:20' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T10:56:20+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:56:20+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T10:56:20+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '404' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:56:20+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404');
2019-07-24T10:56:20+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:56:20+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-07-24T10:56:20+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-07-24T10:56:20+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T10:56:20+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:56:20+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-07-24T10:56:20+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-07-24T10:56:20+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:56:20+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:56:20+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:56:21+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-07-24T10:56:21+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-07-24T10:56:21+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T10:56:21+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-07-24T10:56:21+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-07-24T10:56:21+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-07-24T10:56:21+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '18dce0c4458894b74cff2d157ad6db0f33775c7d',
			salt = '4c596d19',
			fname = 'Papada',
			lname = 'Natsathaporn',
			email = '1630302@vistec.ac.th',
			username = 'dacpapna',
			homepageId = '1',
			last_modified = '2019-07-24 10:56:21',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c85fbdbd0edd',
			language = 'en_us',
			lastlogin = '2019-07-24 10:56:20',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '404';
2019-07-24T10:56:21+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('404' = -1 OR ru.user_id = '404') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T10:56:21+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:56:30+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:56:30+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:56:30+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:56:30+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:56:30+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:56:30+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:56:30+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:56:30+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:56:30+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T10:56:30+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '404' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:56:30+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404');
2019-07-24T10:56:30+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:56:30+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:56:30+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:56:30+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:56:30+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T10:56:34+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T10:56:34+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T10:56:34+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:56:34+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:56:34+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T10:56:34+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:56:34+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T10:56:34+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T10:56:34+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T10:56:34+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '404' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T10:56:34+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404');
2019-07-24T10:56:34+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T10:56:34+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T10:56:34+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T10:56:34+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T10:56:34+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T11:17:00+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'stpayu' OR email = 'stpayu') AND status_id = 1;
2019-07-24T11:17:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'stpayu' OR email = 'stpayu') AND status_id = 1;
2019-07-24T11:17:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'stpayu' OR email = 'stpayu');
2019-07-24T11:17:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-07-24T11:17:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T11:17:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-07-24T11:17:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-07-24T11:17:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-07-24T11:17:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '657901d65514abdde9e84958b7c3da491d26a9e6',
			salt = '49e7173e',
			fname = 'Salatan',
			lname = 'Duangdangchote',
			email = 'Salatan.d_s17@vistec.ac.th',
			username = 'stpayu',
			homepageId = '1',
			last_modified = '2019-07-24 11:17:06',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c91ea0c87c0a',
			language = 'en_us',
			lastlogin = '2019-07-24 11:17:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '524';
2019-07-24T11:17:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T11:17:07+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 11:17:07' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 11:17:07' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T11:17:07+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:17:07+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T11:17:07+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '524' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T11:17:07+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524');
2019-07-24T11:17:07+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T11:17:07+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-07-24T11:17:07+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-07-24T11:17:07+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T11:17:07+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-07-24T11:17:07+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-07-24T11:17:07+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-07-24T11:17:07+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T11:17:07+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:17:07+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:17:07+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-07-24T11:17:07+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-07-24T11:17:07+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T11:17:07+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-07-24T11:17:07+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-07-24T11:17:07+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-07-24T11:17:07+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '657901d65514abdde9e84958b7c3da491d26a9e6',
			salt = '49e7173e',
			fname = 'Salatan',
			lname = 'Duangdangchote',
			email = 'Salatan.d_s17@vistec.ac.th',
			username = 'stpayu',
			homepageId = '1',
			last_modified = '2019-07-24 11:17:07',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c91ea0c87c0a',
			language = 'en_us',
			lastlogin = '2019-07-24 11:17:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '524';
2019-07-24T11:17:07+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('524' = -1 OR ru.user_id = '524') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T11:17:07+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T11:17:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T11:17:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T11:17:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:17:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:17:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T11:17:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T11:17:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T11:17:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:17:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T11:17:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '524' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T11:17:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524');
2019-07-24T11:17:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T11:17:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T11:17:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T11:17:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T11:17:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T11:17:18+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T11:17:18+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T11:17:18+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:17:18+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:17:18+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T11:17:18+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T11:17:18+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T11:17:18+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:17:18+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T11:17:18+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '524' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T11:17:18+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524');
2019-07-24T11:17:18+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T11:17:18+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T11:17:18+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T11:17:18+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T11:17:18+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T11:29:34+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'maokasvi' OR email = 'maokasvi') AND status_id = 1;
2019-07-24T11:29:34+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'maokasvi' OR email = 'maokasvi');
2019-07-24T11:29:34+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '558';
2019-07-24T11:29:34+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '558' AND r.resource_id = urp.resource_id;
2019-07-24T11:29:34+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '558' AND (null is null OR r.role_level IN (null) );
2019-07-24T11:29:34+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '558';
2019-07-24T11:29:34+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '558';
2019-07-24T11:29:34+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ba537ee11effcd89bff94e38db7b7575104a25e5',
			salt = '226b5754',
			fname = 'Kasimanat',
			lname = 'Vibulyaseak',
			email = '1530404@vistec.ac.th',
			username = 'maokasvi',
			homepageId = '1',
			last_modified = '2019-07-24 11:29:34',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5cf5db4484938',
			language = 'en_us',
			lastlogin = '2019-07-24 11:29:34',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '558';
2019-07-24T11:29:34+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T11:29:34+07:00 [3895] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 11:29:34' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 11:29:34' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T11:29:35+07:00 [3895] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:29:35+07:00 [3895] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '558' AND r.resource_id = urp.resource_id;
2019-07-24T11:29:35+07:00 [3895] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '558' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T11:29:35+07:00 [3895] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '558')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '558');
2019-07-24T11:29:35+07:00 [3895] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T11:29:35+07:00 [3895] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '558';
2019-07-24T11:29:35+07:00 [3895] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '558';
2019-07-24T11:29:35+07:00 [3895] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '558' AND r.resource_id = urp.resource_id;
2019-07-24T11:29:35+07:00 [3895] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '558' AND (null is null OR r.role_level IN (null) );
2019-07-24T11:29:35+07:00 [3895] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '558';
2019-07-24T11:29:35+07:00 [3895] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '558';
2019-07-24T11:29:35+07:00 [3895] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T11:29:35+07:00 [3895] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:29:35+07:00 [3895] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:29:35+07:00 [12231] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '558';
2019-07-24T11:29:35+07:00 [12231] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '558';
2019-07-24T11:29:35+07:00 [12231] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '558' AND r.resource_id = urp.resource_id;
2019-07-24T11:29:35+07:00 [12231] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '558' AND (null is null OR r.role_level IN (null) );
2019-07-24T11:29:35+07:00 [12231] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '558';
2019-07-24T11:29:35+07:00 [12231] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '558';
2019-07-24T11:29:35+07:00 [12231] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ba537ee11effcd89bff94e38db7b7575104a25e5',
			salt = '226b5754',
			fname = 'Kasimanat',
			lname = 'Vibulyaseak',
			email = '1530404@vistec.ac.th',
			username = 'maokasvi',
			homepageId = '1',
			last_modified = '2019-07-24 11:29:35',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5cf5db4484938',
			language = 'en_us',
			lastlogin = '2019-07-24 11:29:34',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '558';
2019-07-24T11:29:35+07:00 [12231] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('558' = -1 OR ru.user_id = '558') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T11:29:35+07:00 [12231] DEBUG sql - [User=Kasimanat Vibulyaseak (1530404@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T11:35:36+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'pipchawe' OR email = 'pipchawe') AND status_id = 1;
2019-07-24T11:35:36+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'pipchawe' OR email = 'pipchawe');
2019-07-24T11:35:36+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '380';
2019-07-24T11:35:36+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:35:36+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '380' AND (null is null OR r.role_level IN (null) );
2019-07-24T11:35:36+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '380';
2019-07-24T11:35:36+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '380';
2019-07-24T11:35:36+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0b02775671f5ea18a07ee3c31ce354ecf6b86151',
			salt = '66283419',
			fname = 'Chayanit',
			lname = 'Wechwithayakhlung',
			email = 'chayanit.w_s16@vistec.ac.th',
			username = 'pipchawe',
			homepageId = '1',
			last_modified = '2019-07-24 11:35:36',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d133aee9efa1',
			language = 'en_us',
			lastlogin = '2019-07-24 11:35:36',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '380';
2019-07-24T11:35:36+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T11:35:37+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 11:35:37' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 11:35:37' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T11:35:37+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:35:37+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:35:37+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '380' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T11:35:37+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380');
2019-07-24T11:35:37+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T11:35:37+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '380';
2019-07-24T11:35:37+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '380';
2019-07-24T11:35:37+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:35:37+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '380' AND (null is null OR r.role_level IN (null) );
2019-07-24T11:35:37+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '380';
2019-07-24T11:35:37+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '380';
2019-07-24T11:35:37+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T11:35:37+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:35:37+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:35:38+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '380';
2019-07-24T11:35:38+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '380';
2019-07-24T11:35:38+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:35:38+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '380' AND (null is null OR r.role_level IN (null) );
2019-07-24T11:35:38+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '380';
2019-07-24T11:35:38+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '380';
2019-07-24T11:35:38+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0b02775671f5ea18a07ee3c31ce354ecf6b86151',
			salt = '66283419',
			fname = 'Chayanit',
			lname = 'Wechwithayakhlung',
			email = 'chayanit.w_s16@vistec.ac.th',
			username = 'pipchawe',
			homepageId = '1',
			last_modified = '2019-07-24 11:35:38',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d133aee9efa1',
			language = 'en_us',
			lastlogin = '2019-07-24 11:35:36',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '380';
2019-07-24T11:35:38+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('380' = -1 OR ru.user_id = '380') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T11:35:38+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T11:35:55+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:35:55+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:35:55+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '380' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T11:35:55+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380');
2019-07-24T11:35:55+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T11:35:55+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '380';
2019-07-24T11:35:55+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '380';
2019-07-24T11:35:55+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:35:55+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '380' AND (null is null OR r.role_level IN (null) );
2019-07-24T11:35:55+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '380';
2019-07-24T11:35:55+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '380';
2019-07-24T11:35:55+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T11:35:55+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:35:55+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:35:56+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '380';
2019-07-24T11:35:56+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '380';
2019-07-24T11:35:56+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:35:56+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '380' AND (null is null OR r.role_level IN (null) );
2019-07-24T11:35:56+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '380';
2019-07-24T11:35:56+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '380';
2019-07-24T11:35:56+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0b02775671f5ea18a07ee3c31ce354ecf6b86151',
			salt = '66283419',
			fname = 'Chayanit',
			lname = 'Wechwithayakhlung',
			email = 'chayanit.w_s16@vistec.ac.th',
			username = 'pipchawe',
			homepageId = '1',
			last_modified = '2019-07-24 11:35:56',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d133aee9efa1',
			language = 'en_us',
			lastlogin = '2019-07-24 11:35:36',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '380';
2019-07-24T11:35:56+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:35:56+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:35:56+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '380' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T11:35:56+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380');
2019-07-24T11:35:56+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T11:35:56+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T11:36:24+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:36:24+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:36:24+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '380' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T11:36:24+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380');
2019-07-24T11:36:24+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T11:36:24+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '380';
2019-07-24T11:36:24+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '380';
2019-07-24T11:36:24+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:36:24+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '380' AND (null is null OR r.role_level IN (null) );
2019-07-24T11:36:24+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '380';
2019-07-24T11:36:24+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '380';
2019-07-24T11:36:24+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T11:36:24+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:36:24+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:36:25+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '380';
2019-07-24T11:36:25+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '380';
2019-07-24T11:36:25+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:36:25+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '380' AND (null is null OR r.role_level IN (null) );
2019-07-24T11:36:25+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '380';
2019-07-24T11:36:25+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '380';
2019-07-24T11:36:25+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0b02775671f5ea18a07ee3c31ce354ecf6b86151',
			salt = '66283419',
			fname = 'Chayanit',
			lname = 'Wechwithayakhlung',
			email = 'chayanit.w_s16@vistec.ac.th',
			username = 'pipchawe',
			homepageId = '1',
			last_modified = '2019-07-24 11:36:25',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d133aee9efa1',
			language = 'en_us',
			lastlogin = '2019-07-24 11:35:36',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '380';
2019-07-24T11:36:25+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:36:25+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:36:25+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '380' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T11:36:25+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380');
2019-07-24T11:36:25+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T11:36:25+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T11:36:25+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 11:36:25' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 11:36:25' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T11:36:26+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:36:26+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:36:26+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '380' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T11:36:26+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380');
2019-07-24T11:36:26+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T11:36:26+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '380';
2019-07-24T11:36:26+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '380';
2019-07-24T11:36:26+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:36:26+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '380' AND (null is null OR r.role_level IN (null) );
2019-07-24T11:36:26+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '380';
2019-07-24T11:36:26+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '380';
2019-07-24T11:36:26+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T11:36:26+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:36:26+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:36:26+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '380';
2019-07-24T11:36:26+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '380';
2019-07-24T11:36:26+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:36:26+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '380' AND (null is null OR r.role_level IN (null) );
2019-07-24T11:36:26+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '380';
2019-07-24T11:36:26+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '380';
2019-07-24T11:36:26+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0b02775671f5ea18a07ee3c31ce354ecf6b86151',
			salt = '66283419',
			fname = 'Chayanit',
			lname = 'Wechwithayakhlung',
			email = 'chayanit.w_s16@vistec.ac.th',
			username = 'pipchawe',
			homepageId = '1',
			last_modified = '2019-07-24 11:36:26',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d133aee9efa1',
			language = 'en_us',
			lastlogin = '2019-07-24 11:35:36',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '380';
2019-07-24T11:36:26+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('380' = -1 OR ru.user_id = '380') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T11:36:26+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T11:36:41+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T11:36:41+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T11:36:41+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:36:41+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:36:41+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T11:36:41+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T11:36:41+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T11:36:41+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:36:41+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:36:41+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '380' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T11:36:41+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380');
2019-07-24T11:36:41+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T11:36:41+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T11:36:41+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T11:36:41+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T11:36:41+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T11:37:58+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T11:37:58+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T11:37:58+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '12' OR r.schedule_id = '12')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:37:58+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:37:58+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T11:37:58+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T11:37:58+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T11:37:58+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:37:58+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:37:58+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '380' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T11:37:58+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380');
2019-07-24T11:37:58+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('12')) AND
					('0' = 1 OR rr.resource_id IN ('27'))
			ORDER BY ri.start_date ASC;
2019-07-24T11:37:58+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T11:37:58+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('12' = -1 OR r.schedule_id = '12')
		ORDER BY bi.start_date ASC;
2019-07-24T11:37:58+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '12'
		ORDER BY tb.start_time;
2019-07-24T11:37:58+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '12';
2019-07-24T11:37:59+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T11:37:59+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T11:37:59+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '12' OR r.schedule_id = '12')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:37:59+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:37:59+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T11:37:59+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T11:37:59+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T11:37:59+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '12' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T11:37:59+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T11:37:59+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '380' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T11:37:59+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380');
2019-07-24T11:37:59+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('12')) AND
					('0' = 1 OR rr.resource_id IN ('27'))
			ORDER BY ri.start_date ASC;
2019-07-24T11:37:59+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T11:37:59+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('12' = -1 OR r.schedule_id = '12')
		ORDER BY bi.start_date ASC;
2019-07-24T11:37:59+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '12'
		ORDER BY tb.start_time;
2019-07-24T11:37:59+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '12';
2019-07-24T12:13:43+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'pipchawe' OR email = 'pipchawe') AND status_id = 1;
2019-07-24T12:13:43+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'pipchawe' OR email = 'pipchawe');
2019-07-24T12:13:43+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '380';
2019-07-24T12:13:43+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T12:13:43+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '380' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:13:43+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '380';
2019-07-24T12:13:43+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '380';
2019-07-24T12:13:43+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0b02775671f5ea18a07ee3c31ce354ecf6b86151',
			salt = '66283419',
			fname = 'Chayanit',
			lname = 'Wechwithayakhlung',
			email = 'chayanit.w_s16@vistec.ac.th',
			username = 'pipchawe',
			homepageId = '1',
			last_modified = '2019-07-24 12:13:43',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d133aee9efa1',
			language = 'en_us',
			lastlogin = '2019-07-24 12:13:43',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '380';
2019-07-24T12:13:44+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T12:13:44+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 12:13:44' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 12:13:44' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T12:13:44+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:13:44+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T12:13:44+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '380' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T12:13:44+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380');
2019-07-24T12:13:44+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T12:13:44+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '380';
2019-07-24T12:13:44+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '380';
2019-07-24T12:13:44+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T12:13:44+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '380' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:13:44+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '380';
2019-07-24T12:13:44+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '380';
2019-07-24T12:13:44+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:13:44+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:13:44+07:00 [12231] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:13:44+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '380';
2019-07-24T12:13:44+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '380';
2019-07-24T12:13:44+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T12:13:44+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '380' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:13:44+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '380';
2019-07-24T12:13:44+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '380';
2019-07-24T12:13:44+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0b02775671f5ea18a07ee3c31ce354ecf6b86151',
			salt = '66283419',
			fname = 'Chayanit',
			lname = 'Wechwithayakhlung',
			email = 'chayanit.w_s16@vistec.ac.th',
			username = 'pipchawe',
			homepageId = '1',
			last_modified = '2019-07-24 12:13:44',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d133aee9efa1',
			language = 'en_us',
			lastlogin = '2019-07-24 12:13:43',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '380';
2019-07-24T12:13:44+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('380' = -1 OR ru.user_id = '380') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T12:13:44+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:13:50+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T12:13:50+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:13:50+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:13:50+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:13:50+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T12:13:50+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:13:50+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:13:50+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:13:50+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T12:13:50+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '380' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T12:13:50+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380');
2019-07-24T12:13:50+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T12:13:50+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:13:50+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T12:13:50+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T12:13:50+07:00 [3895] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T12:14:00+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T12:14:00+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:14:00+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:14:00+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:14:00+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T12:14:00+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:14:00+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:14:00+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:14:00+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '380' AND r.resource_id = urp.resource_id;
2019-07-24T12:14:00+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '380' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T12:14:00+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '380');
2019-07-24T12:14:00+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-07-24T12:14:00+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:14:00+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-07-24T12:14:00+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-07-24T12:14:00+07:00 [3863] DEBUG sql - [User=Chayanit Wechwithayakhlung (chayanit.w_s16@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-07-24T12:17:53+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'pippimwo' OR email = 'pippimwo') AND status_id = 1;
2019-07-24T12:17:53+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'pippimwo' OR email = 'pippimwo');
2019-07-24T12:17:53+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '378';
2019-07-24T12:17:53+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '378' AND r.resource_id = urp.resource_id;
2019-07-24T12:17:53+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '378' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:17:53+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '378';
2019-07-24T12:17:53+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '378';
2019-07-24T12:17:53+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '9d5f50169f8fac34371df649f5950bd9306dd546',
			salt = '5d54bc90',
			fname = 'Pimpisut',
			lname = 'Worakajit',
			email = '1530312@vistec.ac.th',
			username = 'pippimwo',
			homepageId = '1',
			last_modified = '2019-07-24 12:17:53',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88f2a5ee56e',
			language = 'en_us',
			lastlogin = '2019-07-24 12:17:53',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '378';
2019-07-24T12:17:53+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T12:17:53+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 12:17:53' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 12:17:53' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T12:17:53+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:17:53+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '378' AND r.resource_id = urp.resource_id;
2019-07-24T12:17:53+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '378' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T12:17:53+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '378')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '378');
2019-07-24T12:17:53+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T12:17:53+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '378';
2019-07-24T12:17:53+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '378';
2019-07-24T12:17:53+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '378' AND r.resource_id = urp.resource_id;
2019-07-24T12:17:53+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '378' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:17:53+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '378';
2019-07-24T12:17:53+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '378';
2019-07-24T12:17:53+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:17:53+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:17:53+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:17:57+07:00 [3863] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '378';
2019-07-24T12:17:57+07:00 [3863] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '378';
2019-07-24T12:17:57+07:00 [3863] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '378' AND r.resource_id = urp.resource_id;
2019-07-24T12:17:57+07:00 [3863] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '378' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:17:57+07:00 [3863] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '378';
2019-07-24T12:17:57+07:00 [3863] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '378';
2019-07-24T12:17:57+07:00 [3863] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '9d5f50169f8fac34371df649f5950bd9306dd546',
			salt = '5d54bc90',
			fname = 'Pimpisut',
			lname = 'Worakajit',
			email = '1530312@vistec.ac.th',
			username = 'pippimwo',
			homepageId = '1',
			last_modified = '2019-07-24 12:17:57',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88f2a5ee56e',
			language = 'en_us',
			lastlogin = '2019-07-24 12:17:53',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '378';
2019-07-24T12:17:57+07:00 [3863] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('378' = -1 OR ru.user_id = '378') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T12:17:57+07:00 [3863] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:17:59+07:00 [3895] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T12:17:59+07:00 [3895] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:17:59+07:00 [3895] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:17:59+07:00 [3895] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:17:59+07:00 [3895] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T12:17:59+07:00 [3895] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:17:59+07:00 [3895] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:17:59+07:00 [3895] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:17:59+07:00 [3895] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '378' AND r.resource_id = urp.resource_id;
2019-07-24T12:17:59+07:00 [3895] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '378' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T12:17:59+07:00 [3895] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '378')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '378');
2019-07-24T12:17:59+07:00 [3895] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T12:18:00+07:00 [3895] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:18:00+07:00 [3895] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T12:18:00+07:00 [3895] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T12:18:00+07:00 [3895] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T12:18:05+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T12:18:05+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:18:05+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:18:05+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:18:05+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T12:18:05+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:18:05+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:18:05+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:18:05+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '378' AND r.resource_id = urp.resource_id;
2019-07-24T12:18:05+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '378' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T12:18:05+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '378')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '378');
2019-07-24T12:18:05+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-07-24T12:18:05+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:18:05+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-07-24T12:18:05+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-07-24T12:18:05+07:00 [12231] DEBUG sql - [User=Pimpisut Worakajit (1530312@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-07-24T12:48:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1830301@vistec.ac.th' OR email = '1830301@vistec.ac.th') AND status_id = 1;
2019-07-24T12:48:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = '1830301@vistec.ac.th' OR email = '1830301@vistec.ac.th');
2019-07-24T12:48:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-07-24T12:48:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-07-24T12:48:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:48:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-07-24T12:48:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-07-24T12:48:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'e4c322e60c271fe86d0acf74bc7849fd418d7690',
			salt = '73149551',
			fname = 'Jitpisut',
			lname = 'Poolwong',
			email = '1830301@vistec.ac.th',
			username = 'vdejitpo',
			homepageId = '1',
			last_modified = '2019-07-24 12:48:32',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f136fabfbb',
			language = 'en_us',
			lastlogin = '2019-07-24 12:48:32',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '389';
2019-07-24T12:48:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T12:48:32+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 12:48:32' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 12:48:32' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T12:48:32+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:48:32+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-07-24T12:48:32+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '389' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T12:48:32+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389');
2019-07-24T12:48:32+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T12:48:32+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-07-24T12:48:32+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-07-24T12:48:32+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-07-24T12:48:32+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:48:32+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-07-24T12:48:32+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-07-24T12:48:32+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:48:32+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:48:32+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:48:33+07:00 [3863] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-07-24T12:48:33+07:00 [3863] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-07-24T12:48:33+07:00 [3863] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-07-24T12:48:33+07:00 [3863] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:48:33+07:00 [3863] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-07-24T12:48:33+07:00 [3863] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-07-24T12:48:33+07:00 [3863] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'e4c322e60c271fe86d0acf74bc7849fd418d7690',
			salt = '73149551',
			fname = 'Jitpisut',
			lname = 'Poolwong',
			email = '1830301@vistec.ac.th',
			username = 'vdejitpo',
			homepageId = '1',
			last_modified = '2019-07-24 12:48:33',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f136fabfbb',
			language = 'en_us',
			lastlogin = '2019-07-24 12:48:32',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '389';
2019-07-24T12:48:33+07:00 [3863] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('389' = -1 OR ru.user_id = '389') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T12:48:33+07:00 [3863] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:48:37+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T12:48:37+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:48:37+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:48:37+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:48:37+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T12:48:37+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:48:37+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:48:37+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:48:37+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-07-24T12:48:37+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '389' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T12:48:37+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389');
2019-07-24T12:48:37+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T12:48:37+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:48:37+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T12:48:37+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T12:48:37+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T12:48:46+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T12:48:46+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:48:46+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:48:46+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:48:47+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T12:48:47+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:48:47+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:48:47+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:48:47+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-07-24T12:48:47+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '389' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T12:48:47+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389');
2019-07-24T12:48:47+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T12:48:47+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:48:47+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T12:48:47+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T12:48:47+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T12:48:56+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:48:56+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:48:56+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:48:56+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T12:48:56+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T12:48:56+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T12:48:56+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-07-24T12:48:56+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-07-24T12:48:56+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-07-24T12:48:56+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:48:56+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-07-24T12:48:56+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-07-24T12:48:56+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-07-24T12:49:10+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T12:49:10+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:49:10+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:49:10+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:49:10+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T12:49:10+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:49:10+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:49:10+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:49:10+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-07-24T12:49:10+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '389' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T12:49:10+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389');
2019-07-24T12:49:10+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T12:49:10+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:49:10+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T12:49:10+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T12:49:10+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T12:49:14+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:49:14+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:49:14+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:49:14+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T12:49:14+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T12:49:14+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T12:49:14+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-07-24T12:49:14+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-07-24T12:49:14+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-07-24T12:49:14+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:49:14+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-07-24T12:49:14+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-07-24T12:49:14+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '12';
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '12';
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '12';
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 18:00:00' AND ri.start_date <= '2019-07-24 21:00:00') OR
					(ri.end_date >= '2019-07-24 18:00:00' AND ri.end_date <= '2019-07-24 21:00:00') OR
					(ri.start_date <= '2019-07-24 18:00:00' AND ri.end_date >= '2019-07-24 21:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('12'))
			ORDER BY ri.start_date ASC;
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-24 18:00:00' AND bi.start_date <= '2019-07-24 21:00:00')
				OR
				(bi.end_date >= '2019-07-24 18:00:00' AND bi.end_date <= '2019-07-24 21:00:00')
				OR
				(bi.start_date <= '2019-07-24 18:00:00' AND bi.end_date >= '2019-07-24 21:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '389' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389');
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 12:49:25' AND ri.start_date <= '2019-07-25 00:00:00') OR
					(ri.end_date >= '2019-07-24 12:49:25' AND ri.end_date <= '2019-07-25 00:00:00') OR
					(ri.start_date <= '2019-07-24 12:49:25' AND ri.end_date >= '2019-07-25 00:00:00')) AND
					('389' = -1 OR ru.user_id = '389') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-24 12:49:25', null, null, '0', false, 'none', '', '1', '1', '389', null);
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3463', '12', '1');
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-24 18:00:00', '2019-07-24 21:00:00', '5d37f165074cd797681960', '3463', null);
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3450', '389', '1');
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '389';
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '389';
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '389' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '389';
2019-07-24T12:49:25+07:00 [3895] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '389';
2019-07-24T12:49:26+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T12:49:26+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:49:26+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:49:26+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:49:26+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T12:49:26+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:49:26+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:49:26+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:49:26+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '389' AND r.resource_id = urp.resource_id;
2019-07-24T12:49:26+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '389' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T12:49:26+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '389');
2019-07-24T12:49:26+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T12:49:26+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:49:26+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T12:49:26+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T12:49:26+07:00 [12231] DEBUG sql - [User=Jitpisut Poolwong (1830301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T12:50:22+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'dacpapna' OR email = 'dacpapna') AND status_id = 1;
2019-07-24T12:50:22+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'dacpapna' OR email = 'dacpapna');
2019-07-24T12:50:22+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-07-24T12:50:22+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T12:50:22+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:50:22+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-07-24T12:50:22+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-07-24T12:50:22+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '18dce0c4458894b74cff2d157ad6db0f33775c7d',
			salt = '4c596d19',
			fname = 'Papada',
			lname = 'Natsathaporn',
			email = '1630302@vistec.ac.th',
			username = 'dacpapna',
			homepageId = '1',
			last_modified = '2019-07-24 12:50:22',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c85fbdbd0edd',
			language = 'en_us',
			lastlogin = '2019-07-24 12:50:22',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '404';
2019-07-24T12:50:22+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T12:50:22+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:50:22+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T12:50:22+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '404' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T12:50:22+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404');
2019-07-24T12:50:22+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T12:50:22+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-07-24T12:50:22+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-07-24T12:50:22+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T12:50:22+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:50:22+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-07-24T12:50:22+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-07-24T12:50:22+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:50:22+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:50:22+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:50:23+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-07-24T12:50:23+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-07-24T12:50:23+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T12:50:23+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:50:23+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-07-24T12:50:23+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-07-24T12:50:23+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '18dce0c4458894b74cff2d157ad6db0f33775c7d',
			salt = '4c596d19',
			fname = 'Papada',
			lname = 'Natsathaporn',
			email = '1630302@vistec.ac.th',
			username = 'dacpapna',
			homepageId = '1',
			last_modified = '2019-07-24 12:50:23',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c85fbdbd0edd',
			language = 'en_us',
			lastlogin = '2019-07-24 12:50:22',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '404';
2019-07-24T12:50:23+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('404' = -1 OR ru.user_id = '404') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T12:50:23+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d2489e4dc82f780275381' AND
			rs.status_id <> 2;
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3147'
		ORDER BY resource_level_id, r.name;
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3134';
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3147';
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3147';
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3147';
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3147';
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3134';
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-07-24T12:50:33+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-07-24T12:50:43+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:50:43+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T12:50:43+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '404' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T12:50:43+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404');
2019-07-24T12:50:43+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T12:50:43+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-07-24T12:50:43+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-07-24T12:50:43+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T12:50:43+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:50:43+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-07-24T12:50:43+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-07-24T12:50:43+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:50:43+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:50:43+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:50:44+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-07-24T12:50:44+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-07-24T12:50:44+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T12:50:44+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:50:44+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-07-24T12:50:44+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-07-24T12:50:44+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '18dce0c4458894b74cff2d157ad6db0f33775c7d',
			salt = '4c596d19',
			fname = 'Papada',
			lname = 'Natsathaporn',
			email = '1630302@vistec.ac.th',
			username = 'dacpapna',
			homepageId = '1',
			last_modified = '2019-07-24 12:50:44',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c85fbdbd0edd',
			language = 'en_us',
			lastlogin = '2019-07-24 12:50:22',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '404';
2019-07-24T12:50:44+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('404' = -1 OR ru.user_id = '404') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T12:50:44+07:00 [12231] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:50:48+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-07-24T12:50:48+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-07-24T12:50:48+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T12:50:48+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:50:48+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-07-24T12:50:48+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-07-24T12:50:48+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '18dce0c4458894b74cff2d157ad6db0f33775c7d',
			salt = '4c596d19',
			fname = 'Papada',
			lname = 'Natsathaporn',
			email = '1630302@vistec.ac.th',
			username = 'dacpapna',
			homepageId = '1',
			last_modified = '2019-07-24 12:50:48',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c85fbdbd0edd',
			language = 'en_us',
			lastlogin = '2019-07-24 12:50:22',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '404';
2019-07-24T12:50:48+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('404' = -1 OR ru.user_id = '404') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T12:50:48+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:50:48+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '404';
2019-07-24T12:50:48+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '404';
2019-07-24T12:50:48+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T12:50:48+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '404' AND (null is null OR r.role_level IN (null) );
2019-07-24T12:50:48+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '404';
2019-07-24T12:50:48+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '404';
2019-07-24T12:50:48+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-24T12:50:48+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-24T12:50:48+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-24T12:50:48+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-24T12:51:00+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T12:51:00+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:51:00+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:51:00+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:51:00+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T12:51:00+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:51:00+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:51:00+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:51:00+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T12:51:00+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '404' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T12:51:00+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404');
2019-07-24T12:51:00+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T12:51:00+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:51:00+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T12:51:00+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T12:51:00+07:00 [3863] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T12:51:07+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T12:51:07+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T12:51:07+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:51:07+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:51:07+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T12:51:07+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:51:07+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T12:51:07+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T12:51:07+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '404' AND r.resource_id = urp.resource_id;
2019-07-24T12:51:07+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '404' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T12:51:07+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '404');
2019-07-24T12:51:07+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T12:51:07+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T12:51:07+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T12:51:07+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T12:51:07+07:00 [3895] DEBUG sql - [User=Papada Natsathaporn (1630302@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T14:03:45+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'meshaya' OR email = 'meshaya') AND status_id = 1;
2019-07-24T14:03:45+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'meshaya' OR email = 'meshaya');
2019-07-24T14:03:45+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-07-24T14:03:45+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-07-24T14:03:45+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-07-24T14:03:45+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-07-24T14:03:45+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-07-24T14:03:45+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'c5b2544ab079505945f9ebe1188292854b1f7ffc',
			salt = '4f99ebe6',
			fname = 'Admin',
			lname = 'A.',
			email = 'meshaya.p@vistec.ac.th',
			username = 'Meshaya',
			homepageId = '1',
			last_modified = '2019-07-24 14:03:45',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c920b7a8b805',
			language = 'en_us',
			lastlogin = '2019-07-24 14:03:45',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '545';
2019-07-24T14:03:45+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T14:03:45+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 14:03:45' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 14:03:45' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T14:03:45+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:03:45+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T14:03:45+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '545';
2019-07-24T14:03:45+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-07-24T14:03:45+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-07-24T14:03:45+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-07-24T14:03:45+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-07-24T14:03:45+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-07-24T14:03:45+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T14:03:45+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:03:45+07:00 [3863] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:03:46+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '545';
2019-07-24T14:03:46+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-07-24T14:03:46+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-07-24T14:03:46+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-07-24T14:03:46+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-07-24T14:03:46+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-07-24T14:03:46+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'c5b2544ab079505945f9ebe1188292854b1f7ffc',
			salt = '4f99ebe6',
			fname = 'Admin',
			lname = 'A.',
			email = 'meshaya.p@vistec.ac.th',
			username = 'Meshaya',
			homepageId = '1',
			last_modified = '2019-07-24 14:03:46',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c920b7a8b805',
			language = 'en_us',
			lastlogin = '2019-07-24 14:03:45',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '545';
2019-07-24T14:03:46+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('545' = -1 OR ru.user_id = '545') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T14:03:46+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T14:23:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'stpayu' OR email = 'stpayu') AND status_id = 1;
2019-07-24T14:23:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'stpayu' OR email = 'stpayu');
2019-07-24T14:23:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-07-24T14:23:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T14:23:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-07-24T14:23:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-07-24T14:23:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-07-24T14:23:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '657901d65514abdde9e84958b7c3da491d26a9e6',
			salt = '49e7173e',
			fname = 'Salatan',
			lname = 'Duangdangchote',
			email = 'Salatan.d_s17@vistec.ac.th',
			username = 'stpayu',
			homepageId = '1',
			last_modified = '2019-07-24 14:23:09',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c91ea0c87c0a',
			language = 'en_us',
			lastlogin = '2019-07-24 14:23:09',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '524';
2019-07-24T14:23:09+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T14:23:09+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 14:23:09' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 14:23:09' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T14:23:09+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:23:09+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T14:23:09+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '524' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T14:23:09+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524');
2019-07-24T14:23:09+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T14:23:09+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-07-24T14:23:09+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-07-24T14:23:09+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T14:23:09+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-07-24T14:23:09+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-07-24T14:23:09+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-07-24T14:23:09+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T14:23:09+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:23:09+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:23:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-07-24T14:23:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-07-24T14:23:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T14:23:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-07-24T14:23:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-07-24T14:23:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-07-24T14:23:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '657901d65514abdde9e84958b7c3da491d26a9e6',
			salt = '49e7173e',
			fname = 'Salatan',
			lname = 'Duangdangchote',
			email = 'Salatan.d_s17@vistec.ac.th',
			username = 'stpayu',
			homepageId = '1',
			last_modified = '2019-07-24 14:23:10',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c91ea0c87c0a',
			language = 'en_us',
			lastlogin = '2019-07-24 14:23:09',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '524';
2019-07-24T14:23:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('524' = -1 OR ru.user_id = '524') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T14:23:10+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T14:23:13+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T14:23:13+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T14:23:13+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:23:13+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:23:13+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T14:23:13+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:23:13+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:23:13+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:23:13+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T14:23:13+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '524' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T14:23:13+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524');
2019-07-24T14:23:13+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T14:23:13+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T14:23:13+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T14:23:13+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T14:23:13+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T14:23:25+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T14:23:25+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T14:23:25+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:23:25+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:23:25+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T14:23:25+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:23:25+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:23:25+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:23:25+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T14:23:25+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '524' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T14:23:25+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524');
2019-07-24T14:23:25+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T14:23:25+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T14:23:25+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T14:23:25+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T14:23:25+07:00 [3895] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T14:26:43+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T14:26:43+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:26:43+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:26:43+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T14:26:43+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T14:26:43+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T14:26:43+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-07-24T14:26:43+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-07-24T14:26:43+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T14:26:43+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-07-24T14:26:43+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-07-24T14:26:43+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-07-24T14:26:43+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-25 09:00:00' AND ri.start_date <= '2019-07-25 12:00:00') OR
					(ri.end_date >= '2019-07-25 09:00:00' AND ri.end_date <= '2019-07-25 12:00:00') OR
					(ri.start_date <= '2019-07-25 09:00:00' AND ri.end_date >= '2019-07-25 12:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-25 09:00:00' AND bi.start_date <= '2019-07-25 12:00:00')
				OR
				(bi.end_date >= '2019-07-25 09:00:00' AND bi.end_date <= '2019-07-25 12:00:00')
				OR
				(bi.start_date <= '2019-07-25 09:00:00' AND bi.end_date >= '2019-07-25 12:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '524' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524');
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 14:26:55' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-24 14:26:55' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-24 14:26:55' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('524' = -1 OR ru.user_id = '524') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-24 14:26:55', null, null, '0', false, 'none', '', '1', '1', '524', null);
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3464', '19', '1');
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-25 09:00:00', '2019-07-25 12:00:00', '5d38083fcaf6d808111453', '3464', null);
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3451', '524', '1');
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3451', '534', '2');
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '524';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '524' AND (null is null OR r.role_level IN (null) );
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '524';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '524';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '534';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '534';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '534' AND r.resource_id = urp.resource_id;
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '534' AND (null is null OR r.role_level IN (null) );
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '534';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '534';
2019-07-24T14:26:55+07:00 [12231] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:27:00+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T14:27:00+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T14:27:00+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:27:00+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:27:00+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T14:27:00+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:27:00+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:27:00+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:27:00+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '524' AND r.resource_id = urp.resource_id;
2019-07-24T14:27:00+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '524' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T14:27:00+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '524');
2019-07-24T14:27:00+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T14:27:00+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T14:27:00+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T14:27:00+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T14:27:00+07:00 [3863] DEBUG sql - [User=Salatan Duangdangchote (Salatan.d_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T14:27:14+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 14:27:14' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 14:27:14' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T14:27:14+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:27:14+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T14:27:14+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '545';
2019-07-24T14:27:14+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-07-24T14:27:14+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-07-24T14:27:14+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-07-24T14:27:14+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-07-24T14:27:14+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-07-24T14:27:14+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T14:27:14+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:27:14+07:00 [3895] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:27:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '545';
2019-07-24T14:27:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '545';
2019-07-24T14:27:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '545' AND r.resource_id = urp.resource_id;
2019-07-24T14:27:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '545' AND (null is null OR r.role_level IN (null) );
2019-07-24T14:27:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '545';
2019-07-24T14:27:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '545';
2019-07-24T14:27:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'c5b2544ab079505945f9ebe1188292854b1f7ffc',
			salt = '4f99ebe6',
			fname = 'Admin',
			lname = 'A.',
			email = 'meshaya.p@vistec.ac.th',
			username = 'Meshaya',
			homepageId = '1',
			last_modified = '2019-07-24 14:27:15',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c920b7a8b805',
			language = 'en_us',
			lastlogin = '2019-07-24 14:03:45',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '545';
2019-07-24T14:27:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('545' = -1 OR ru.user_id = '545') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T14:27:15+07:00 [12231] DEBUG sql - [User=Admin A. (meshaya.p@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T14:36:07+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'pipjidch' OR email = 'pipjidch') AND status_id = 1;
2019-07-24T14:36:07+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'pipjidch' OR email = 'pipjidch');
2019-07-24T14:36:07+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '379';
2019-07-24T14:36:07+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '379' AND r.resource_id = urp.resource_id;
2019-07-24T14:36:07+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '379' AND (null is null OR r.role_level IN (null) );
2019-07-24T14:36:07+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '379';
2019-07-24T14:36:07+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '379';
2019-07-24T14:36:07+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '6e8a484088521162972f68a602033017fc468314',
			salt = '31014e17',
			fname = 'Jidapa',
			lname = 'Chaopaknam',
			email = '1530305@vistec.ac.th',
			username = 'pipjidch',
			homepageId = '1',
			last_modified = '2019-07-24 14:36:07',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5cc7cce8dcda7',
			language = 'en_us',
			lastlogin = '2019-07-24 14:36:07',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '379';
2019-07-24T14:36:07+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T14:36:07+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T14:36:07+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T14:36:07+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:36:07+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:36:07+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T14:36:07+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:36:07+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:36:07+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:36:07+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '379' AND r.resource_id = urp.resource_id;
2019-07-24T14:36:07+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '379' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T14:36:07+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '379')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '379');
2019-07-24T14:36:07+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-05-06 00:00:00' AND ri.start_date <= '2019-05-13 00:00:00') OR
					(ri.end_date >= '2019-05-06 00:00:00' AND ri.end_date <= '2019-05-13 00:00:00') OR
					(ri.start_date <= '2019-05-06 00:00:00' AND ri.end_date >= '2019-05-13 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T14:36:07+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T14:36:07+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-05-06 00:00:00' AND bi.start_date <= '2019-05-13 00:00:00')
				OR
				(bi.end_date >= '2019-05-06 00:00:00' AND bi.end_date <= '2019-05-13 00:00:00')
				OR
				(bi.start_date <= '2019-05-06 00:00:00' AND bi.end_date >= '2019-05-13 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T14:36:07+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T14:36:07+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T14:36:11+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T14:36:11+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T14:36:11+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:36:11+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:36:11+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T14:36:11+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:36:11+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:36:11+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:36:11+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '379' AND r.resource_id = urp.resource_id;
2019-07-24T14:36:11+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '379' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T14:36:11+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '379')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '379');
2019-07-24T14:36:11+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T14:36:11+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T14:36:11+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T14:36:11+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T14:36:11+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T14:36:19+07:00 [12231] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T14:36:19+07:00 [12231] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T14:36:19+07:00 [12231] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:36:19+07:00 [12231] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:36:19+07:00 [12231] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T14:36:19+07:00 [12231] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:36:19+07:00 [12231] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:36:19+07:00 [12231] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:36:19+07:00 [12231] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '379' AND r.resource_id = urp.resource_id;
2019-07-24T14:36:19+07:00 [12231] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '379' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T14:36:19+07:00 [12231] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '379')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '379');
2019-07-24T14:36:19+07:00 [12231] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T14:36:19+07:00 [12231] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T14:36:19+07:00 [12231] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T14:36:19+07:00 [12231] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T14:36:19+07:00 [12231] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T14:36:28+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T14:36:28+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T14:36:28+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:36:28+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:36:28+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T14:36:28+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:36:28+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:36:28+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:36:28+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '379' AND r.resource_id = urp.resource_id;
2019-07-24T14:36:28+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '379' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T14:36:28+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '379')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '379');
2019-07-24T14:36:28+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-29 00:00:00' AND ri.start_date <= '2019-08-05 00:00:00') OR
					(ri.end_date >= '2019-07-29 00:00:00' AND ri.end_date <= '2019-08-05 00:00:00') OR
					(ri.start_date <= '2019-07-29 00:00:00' AND ri.end_date >= '2019-08-05 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T14:36:28+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T14:36:28+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-29 00:00:00' AND bi.start_date <= '2019-08-05 00:00:00')
				OR
				(bi.end_date >= '2019-07-29 00:00:00' AND bi.end_date <= '2019-08-05 00:00:00')
				OR
				(bi.start_date <= '2019-07-29 00:00:00' AND bi.end_date >= '2019-08-05 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T14:36:28+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T14:36:28+07:00 [3863] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T14:36:31+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T14:36:31+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T14:36:31+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:36:31+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:36:31+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T14:36:31+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:36:31+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T14:36:31+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T14:36:31+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '379' AND r.resource_id = urp.resource_id;
2019-07-24T14:36:31+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '379' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T14:36:31+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '379')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '379');
2019-07-24T14:36:31+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T14:36:32+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T14:36:32+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T14:36:32+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T14:36:32+07:00 [3895] DEBUG sql - [User=Jidapa Chaopaknam (1530305@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:08:39+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'vdeounso' OR email = 'vdeounso') AND status_id = 1;
2019-07-24T15:08:39+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'vdeounso' OR email = 'vdeounso');
2019-07-24T15:08:39+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '384';
2019-07-24T15:08:39+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '384' AND r.resource_id = urp.resource_id;
2019-07-24T15:08:39+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '384' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:08:39+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '384';
2019-07-24T15:08:39+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '384';
2019-07-24T15:08:39+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '2ba88add91306479643176176b7f3c1c77750b05',
			salt = '292a4bec',
			fname = 'Ounjit',
			lname = 'Sodpiban',
			email = 's15_ounjit.s@vistec.ac.th',
			username = 'vdeounso',
			homepageId = '1',
			last_modified = '2019-07-24 15:08:39',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c908e8f75f00',
			language = 'en_us',
			lastlogin = '2019-07-24 15:08:39',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '384';
2019-07-24T15:08:39+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T15:08:39+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 15:08:39' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 15:08:39' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T15:08:39+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:08:39+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '384' AND r.resource_id = urp.resource_id;
2019-07-24T15:08:39+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '384' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:08:39+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '384')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '384');
2019-07-24T15:08:39+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:08:39+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '384';
2019-07-24T15:08:39+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '384';
2019-07-24T15:08:39+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '384' AND r.resource_id = urp.resource_id;
2019-07-24T15:08:39+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '384' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:08:39+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '384';
2019-07-24T15:08:39+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '384';
2019-07-24T15:08:39+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:08:39+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:08:39+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:08:40+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '384';
2019-07-24T15:08:40+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '384';
2019-07-24T15:08:40+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '384' AND r.resource_id = urp.resource_id;
2019-07-24T15:08:40+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '384' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:08:40+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '384';
2019-07-24T15:08:40+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '384';
2019-07-24T15:08:40+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '2ba88add91306479643176176b7f3c1c77750b05',
			salt = '292a4bec',
			fname = 'Ounjit',
			lname = 'Sodpiban',
			email = 's15_ounjit.s@vistec.ac.th',
			username = 'vdeounso',
			homepageId = '1',
			last_modified = '2019-07-24 15:08:40',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c908e8f75f00',
			language = 'en_us',
			lastlogin = '2019-07-24 15:08:39',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '384';
2019-07-24T15:08:40+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('384' = -1 OR ru.user_id = '384') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T15:08:40+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:08:45+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:08:45+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:08:45+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:08:45+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:08:45+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:08:45+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:08:45+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:08:45+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:08:45+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '384' AND r.resource_id = urp.resource_id;
2019-07-24T15:08:45+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '384' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:08:45+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '384')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '384');
2019-07-24T15:08:45+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:08:45+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:08:45+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:08:45+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:08:45+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:09:20+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:09:20+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:09:20+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:09:20+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:09:20+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:09:20+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:09:20+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:09:20+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:09:20+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '384' AND r.resource_id = urp.resource_id;
2019-07-24T15:09:20+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '384' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:09:20+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '384')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '384');
2019-07-24T15:09:20+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:09:20+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:09:20+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:09:20+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:09:20+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:09:52+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:09:52+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:09:52+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:09:52+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T15:09:52+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:09:52+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:09:52+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '384';
2019-07-24T15:09:52+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '384';
2019-07-24T15:09:52+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '384' AND r.resource_id = urp.resource_id;
2019-07-24T15:09:52+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '384' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:09:52+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '384';
2019-07-24T15:09:52+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '384';
2019-07-24T15:09:52+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '384';
2019-07-24T15:10:13+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:10:13+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:10:13+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:10:13+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:10:13+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:10:13+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:10:13+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:10:13+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:10:13+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '384' AND r.resource_id = urp.resource_id;
2019-07-24T15:10:13+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '384' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:10:13+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '384')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '384');
2019-07-24T15:10:13+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:10:13+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:10:13+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:10:13+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:10:13+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:10:36+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:10:36+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:10:36+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:10:36+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T15:10:36+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:10:36+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:10:36+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '384';
2019-07-24T15:10:36+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '384';
2019-07-24T15:10:36+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '384' AND r.resource_id = urp.resource_id;
2019-07-24T15:10:36+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '384' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:10:36+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '384';
2019-07-24T15:10:36+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '384';
2019-07-24T15:10:36+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '384';
2019-07-24T15:10:43+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:10:43+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:10:43+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:10:43+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:10:43+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:10:43+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:10:43+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:10:43+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:10:43+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '384' AND r.resource_id = urp.resource_id;
2019-07-24T15:10:43+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '384' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:10:43+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '384')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '384');
2019-07-24T15:10:43+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:10:43+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:10:43+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:10:43+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:10:43+07:00 [3895] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:10:53+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:10:53+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:10:53+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:10:53+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T15:10:53+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:10:53+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:10:53+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '384';
2019-07-24T15:10:53+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '384';
2019-07-24T15:10:53+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '384' AND r.resource_id = urp.resource_id;
2019-07-24T15:10:53+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '384' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:10:53+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '384';
2019-07-24T15:10:53+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '384';
2019-07-24T15:10:53+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '384';
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '17';
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '17';
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '17';
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-25 09:00:00' AND ri.start_date <= '2019-07-25 18:00:00') OR
					(ri.end_date >= '2019-07-25 09:00:00' AND ri.end_date <= '2019-07-25 18:00:00') OR
					(ri.start_date <= '2019-07-25 09:00:00' AND ri.end_date >= '2019-07-25 18:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('17'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-25 09:00:00' AND bi.start_date <= '2019-07-25 18:00:00')
				OR
				(bi.end_date >= '2019-07-25 09:00:00' AND bi.end_date <= '2019-07-25 18:00:00')
				OR
				(bi.start_date <= '2019-07-25 09:00:00' AND bi.end_date >= '2019-07-25 18:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '384' AND r.resource_id = urp.resource_id;
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '384' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '384')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '384');
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '384';
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '384';
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '384' AND r.resource_id = urp.resource_id;
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '384' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '384';
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '384';
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '1';
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 15:13:42' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-24 15:13:42' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-24 15:13:42' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('384' = -1 OR ru.user_id = '384') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T15:13:42+07:00 [3863] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:14:40+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:14:40+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:14:40+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:14:40+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:14:40+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:14:40+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:14:40+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:14:40+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:14:40+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '384' AND r.resource_id = urp.resource_id;
2019-07-24T15:14:40+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '384' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:14:40+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '384')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '384');
2019-07-24T15:14:40+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:14:40+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:14:40+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:14:40+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:14:40+07:00 [12231] DEBUG sql - [User=Ounjit Sodpiban (s15_ounjit.s@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:16:29+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'vippatfu' OR email = 'vippatfu') AND status_id = 1;
2019-07-24T15:16:29+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'vippatfu' OR email = 'vippatfu');
2019-07-24T15:16:29+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '451';
2019-07-24T15:16:29+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-07-24T15:16:29+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '451' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:16:29+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '451';
2019-07-24T15:16:29+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '451';
2019-07-24T15:16:29+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '367d0a820b128187e1b1d7c05e32658b7251d8ef',
			salt = '0a70ace5',
			fname = 'Patteera',
			lname = 'Funchien',
			email = '1630304@vistec.ac.th',
			username = 'vippatfu',
			homepageId = '1',
			last_modified = '2019-07-24 15:16:29',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9301cb40537',
			language = 'en_us',
			lastlogin = '2019-07-24 15:16:29',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '451';
2019-07-24T15:16:29+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T15:16:29+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:16:29+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:16:29+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:16:29+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:16:29+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:16:29+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:16:29+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:16:29+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:16:29+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-07-24T15:16:29+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:16:29+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-07-24T15:16:29+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:16:29+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:16:29+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:16:29+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:16:29+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:16:42+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:16:42+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:16:42+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:16:42+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:16:42+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:16:42+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:16:42+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:16:42+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:16:42+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-07-24T15:16:42+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:16:42+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-07-24T15:16:42+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:16:42+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:16:42+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-07-24T15:16:42+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-07-24T15:16:42+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-07-24T15:16:53+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:16:53+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:16:53+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:16:53+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T15:16:53+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-07-24T15:16:53+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-07-24T15:16:53+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-07-24T15:16:53+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '451';
2019-07-24T15:16:53+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-07-24T15:16:53+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '451' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:16:53+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '451';
2019-07-24T15:16:53+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '451';
2019-07-24T15:16:53+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-07-24T15:17:24+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:17:24+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:17:24+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:17:24+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:17:24+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:17:24+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:17:24+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:17:24+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:17:24+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-07-24T15:17:24+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:17:24+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-07-24T15:17:24+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:17:24+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:17:24+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-07-24T15:17:24+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-07-24T15:17:24+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-07-24T15:17:30+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:17:30+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:17:30+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:17:30+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:17:30+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:17:30+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:17:30+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:17:30+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:17:30+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-07-24T15:17:30+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:17:30+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-07-24T15:17:30+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:17:30+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:17:30+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:17:30+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:17:30+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:17:39+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:17:39+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:17:39+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:17:39+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:17:39+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:17:39+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:17:39+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:17:39+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:17:39+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-07-24T15:17:39+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:17:39+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-07-24T15:17:39+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:17:39+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:17:39+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-07-24T15:17:39+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-07-24T15:17:39+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-07-24T15:18:14+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:18:14+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:18:14+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:18:14+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T15:18:14+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-07-24T15:18:14+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-07-24T15:18:14+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-07-24T15:18:14+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '451';
2019-07-24T15:18:14+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-07-24T15:18:14+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '451' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:18:14+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '451';
2019-07-24T15:18:14+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '451';
2019-07-24T15:18:14+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '16';
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '16';
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '16';
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 17:00:00' AND ri.start_date <= '2019-07-24 21:00:00') OR
					(ri.end_date >= '2019-07-24 17:00:00' AND ri.end_date <= '2019-07-24 21:00:00') OR
					(ri.start_date <= '2019-07-24 17:00:00' AND ri.end_date >= '2019-07-24 21:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-24 17:00:00' AND bi.start_date <= '2019-07-24 21:00:00')
				OR
				(bi.end_date >= '2019-07-24 17:00:00' AND bi.end_date <= '2019-07-24 21:00:00')
				OR
				(bi.start_date <= '2019-07-24 17:00:00' AND bi.end_date >= '2019-07-24 21:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '451';
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '451' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '451';
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '451';
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '13';
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 15:18:24' AND ri.start_date <= '2019-07-25 00:00:00') OR
					(ri.end_date >= '2019-07-24 15:18:24' AND ri.end_date <= '2019-07-25 00:00:00') OR
					(ri.start_date <= '2019-07-24 15:18:24' AND ri.end_date >= '2019-07-25 00:00:00')) AND
					('451' = -1 OR ru.user_id = '451') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-24 15:18:24', null, null, '0', false, 'none', '', '1', '1', '451', null);
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3467', '16', '1');
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('28', '1', 'Solid', '3467');
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('47', '1', '14', '3467');
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('48', '1', '', '3467');
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-24 17:00:00', '2019-07-24 21:00:00', '5d3814502235e496992818', '3467', null);
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3454', '451', '1');
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '451';
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '451';
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '451' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '451';
2019-07-24T15:18:24+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '451';
2019-07-24T15:18:26+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:18:26+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:18:26+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:18:26+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:18:26+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:18:26+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:18:26+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:18:26+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:18:26+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-07-24T15:18:26+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:18:26+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-07-24T15:18:26+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:18:26+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:18:26+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-07-24T15:18:26+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-07-24T15:18:26+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-07-24T15:24:32+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'mospatku' OR email = 'mospatku') AND status_id = 1;
2019-07-24T15:24:32+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'mospatku' OR email = 'mospatku');
2019-07-24T15:24:32+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '535';
2019-07-24T15:24:32+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T15:24:32+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '535' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:24:32+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '535';
2019-07-24T15:24:32+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '535';
2019-07-24T15:24:32+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '318538c12de04eb887ef0b523d395ddea0f0683c',
			salt = '4f7e0097',
			fname = 'Pattanit',
			lname = 'Kullawattanapokin',
			email = 'Pattanit77@gmail.com',
			username = 'mospatku',
			homepageId = '1',
			last_modified = '2019-07-24 15:24:32',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9482dee8f02',
			language = 'en_us',
			lastlogin = '2019-07-24 15:24:32',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '535';
2019-07-24T15:24:32+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T15:24:32+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 15:24:32' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 15:24:32' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T15:24:32+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:24:32+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T15:24:32+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '535' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:24:32+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535');
2019-07-24T15:24:32+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:24:32+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '535';
2019-07-24T15:24:32+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '535';
2019-07-24T15:24:32+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T15:24:32+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '535' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:24:32+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '535';
2019-07-24T15:24:32+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '535';
2019-07-24T15:24:32+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:24:32+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:24:32+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:24:34+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '535';
2019-07-24T15:24:34+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '535';
2019-07-24T15:24:34+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T15:24:34+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '535' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:24:34+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '535';
2019-07-24T15:24:34+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '535';
2019-07-24T15:24:34+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '318538c12de04eb887ef0b523d395ddea0f0683c',
			salt = '4f7e0097',
			fname = 'Pattanit',
			lname = 'Kullawattanapokin',
			email = 'Pattanit77@gmail.com',
			username = 'mospatku',
			homepageId = '1',
			last_modified = '2019-07-24 15:24:34',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9482dee8f02',
			language = 'en_us',
			lastlogin = '2019-07-24 15:24:32',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '535';
2019-07-24T15:24:34+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('535' = -1 OR ru.user_id = '535') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T15:24:34+07:00 [12231] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:24:37+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:24:37+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:24:37+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:24:37+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:24:37+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:24:37+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:24:37+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:24:37+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:24:37+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T15:24:37+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '535' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:24:37+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535');
2019-07-24T15:24:37+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:24:37+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:24:37+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:24:37+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:24:37+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:24:48+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:24:48+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:24:48+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:24:48+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:24:48+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:24:48+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:24:48+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:24:48+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:24:48+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T15:24:48+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '535' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:24:48+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535');
2019-07-24T15:24:48+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:24:48+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:24:48+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:24:48+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:24:48+07:00 [3895] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:25:14+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:25:14+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:25:14+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:25:14+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:25:14+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:25:14+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:25:14+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:25:14+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:25:15+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T15:25:15+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '535' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:25:15+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535');
2019-07-24T15:25:15+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-15 00:00:00' AND ri.start_date <= '2019-07-22 00:00:00') OR
					(ri.end_date >= '2019-07-15 00:00:00' AND ri.end_date <= '2019-07-22 00:00:00') OR
					(ri.start_date <= '2019-07-15 00:00:00' AND ri.end_date >= '2019-07-22 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:25:15+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:25:15+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-15 00:00:00' AND bi.start_date <= '2019-07-22 00:00:00')
				OR
				(bi.end_date >= '2019-07-15 00:00:00' AND bi.end_date <= '2019-07-22 00:00:00')
				OR
				(bi.start_date <= '2019-07-15 00:00:00' AND bi.end_date >= '2019-07-22 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:25:15+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:25:15+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:25:39+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:25:39+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:25:39+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:25:39+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:25:39+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:25:39+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:25:39+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:25:39+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:25:39+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '535' AND r.resource_id = urp.resource_id;
2019-07-24T15:25:39+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '535' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:25:39+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '535');
2019-07-24T15:25:39+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:25:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:25:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:25:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:25:40+07:00 [3863] DEBUG sql - [User=Pattanit Kullawattanapokin (Pattanit77@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:42:41+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'thwpanpu' OR email = 'thwpanpu') AND status_id = 1;
2019-07-24T15:42:41+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'thwpanpu' OR email = 'thwpanpu');
2019-07-24T15:42:41+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '496';
2019-07-24T15:42:41+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:42:41+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '496' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:42:41+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '496';
2019-07-24T15:42:41+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '496';
2019-07-24T15:42:41+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'f8b9dca9dc940bed52b8d28005318f507a128db1',
			salt = '2cef290b',
			fname = 'Pangrum',
			lname = 'Punthong',
			email = 'Pangrum.p_s17@vistec.ac.th',
			username = 'thwpanpu',
			homepageId = '1',
			last_modified = '2019-07-24 15:42:41',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c986ee515517',
			language = 'en_us',
			lastlogin = '2019-07-24 15:42:41',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '496';
2019-07-24T15:42:41+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T15:42:41+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:42:41+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:42:41+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:42:41+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:42:41+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:42:41+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:42:41+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:42:41+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:42:41+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:42:41+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '496' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:42:41+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496');
2019-07-24T15:42:41+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:42:41+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:42:41+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:42:41+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:42:41+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:42:49+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:42:49+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:42:49+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '496' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:42:49+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496');
2019-07-24T15:42:49+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:42:49+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '496';
2019-07-24T15:42:49+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '496';
2019-07-24T15:42:49+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:42:49+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '496' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:42:49+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '496';
2019-07-24T15:42:49+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '496';
2019-07-24T15:42:49+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:42:49+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:42:49+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:42:49+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '496';
2019-07-24T15:42:49+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '496';
2019-07-24T15:42:49+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:42:49+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '496' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:42:49+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '496';
2019-07-24T15:42:49+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '496';
2019-07-24T15:42:49+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'f8b9dca9dc940bed52b8d28005318f507a128db1',
			salt = '2cef290b',
			fname = 'Pangrum',
			lname = 'Punthong',
			email = 'Pangrum.p_s17@vistec.ac.th',
			username = 'thwpanpu',
			homepageId = '1',
			last_modified = '2019-07-24 15:42:49',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c986ee515517',
			language = 'en_us',
			lastlogin = '2019-07-24 15:42:41',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '496';
2019-07-24T15:42:49+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('496' = -1 OR ru.user_id = '496') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T15:42:49+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d3580e24c318162205138' AND
			rs.status_id <> 2;
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3421'
		ORDER BY resource_level_id, r.name;
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3408';
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3421';
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3421';
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3421';
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3421';
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3408';
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '20' OR r.schedule_id = '20')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '20' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '20'
		ORDER BY tb.start_time;
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '20';
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '496';
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '496';
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '496' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '496';
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '496';
2019-07-24T15:43:04+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '496';
2019-07-24T15:43:27+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:43:27+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:43:27+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:43:27+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:43:27+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:43:27+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:43:27+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:43:27+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:43:27+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:43:27+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '496' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:43:27+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496');
2019-07-24T15:43:27+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:43:27+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:43:27+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:43:27+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:43:27+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:43:35+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:43:35+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:43:35+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '20' OR r.schedule_id = '20')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:43:35+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '20' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:43:35+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:43:35+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:43:35+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:43:35+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '20' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:43:35+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:43:35+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '496' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:43:35+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496');
2019-07-24T15:43:35+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('20')) AND
					('0' = 1 OR rr.resource_id IN ('24'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:43:35+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:43:35+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('20' = -1 OR r.schedule_id = '20')
		ORDER BY bi.start_date ASC;
2019-07-24T15:43:35+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '20'
		ORDER BY tb.start_time;
2019-07-24T15:43:35+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '20';
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d3580e24c318162205138' AND
			rs.status_id <> 2;
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3421'
		ORDER BY resource_level_id, r.name;
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3408';
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3421';
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3421';
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3421';
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3421';
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3408';
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '20' OR r.schedule_id = '20')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '20' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '20'
		ORDER BY tb.start_time;
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '20';
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '496';
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '496';
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '496' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '496';
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '496';
2019-07-24T15:43:44+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '496';
2019-07-24T15:43:50+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:43:50+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:43:50+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '20' OR r.schedule_id = '20')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:43:50+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '20' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:43:50+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:43:50+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:43:50+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:43:50+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '20' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:43:50+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:43:50+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '496' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:43:50+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496');
2019-07-24T15:43:50+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('20')) AND
					('0' = 1 OR rr.resource_id IN ('24'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:43:50+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:43:50+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('20' = -1 OR r.schedule_id = '20')
		ORDER BY bi.start_date ASC;
2019-07-24T15:43:50+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '20'
		ORDER BY tb.start_time;
2019-07-24T15:43:50+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '20';
2019-07-24T15:43:54+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:43:54+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:43:54+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '20' OR r.schedule_id = '20')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:43:54+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '20' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:43:54+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:43:54+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:43:54+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:43:54+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '20' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:43:54+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:43:54+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '496' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:43:54+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496');
2019-07-24T15:43:54+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-29 00:00:00' AND ri.start_date <= '2019-08-05 00:00:00') OR
					(ri.end_date >= '2019-07-29 00:00:00' AND ri.end_date <= '2019-08-05 00:00:00') OR
					(ri.start_date <= '2019-07-29 00:00:00' AND ri.end_date >= '2019-08-05 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('20')) AND
					('0' = 1 OR rr.resource_id IN ('24'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:43:54+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:43:54+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-29 00:00:00' AND bi.start_date <= '2019-08-05 00:00:00')
				OR
				(bi.end_date >= '2019-07-29 00:00:00' AND bi.end_date <= '2019-08-05 00:00:00')
				OR
				(bi.start_date <= '2019-07-29 00:00:00' AND bi.end_date >= '2019-08-05 00:00:00')
			) AND
			('20' = -1 OR r.schedule_id = '20')
		ORDER BY bi.start_date ASC;
2019-07-24T15:43:54+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '20'
		ORDER BY tb.start_time;
2019-07-24T15:43:54+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '20';
2019-07-24T15:44:03+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:44:03+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '20' OR r.schedule_id = '20')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:44:03+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '20' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:44:03+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T15:44:03+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '20'
		ORDER BY tb.start_time;
2019-07-24T15:44:03+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '20';
2019-07-24T15:44:03+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '496';
2019-07-24T15:44:03+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '496';
2019-07-24T15:44:03+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:44:03+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '496' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:44:03+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '496';
2019-07-24T15:44:03+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '496';
2019-07-24T15:44:03+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '496';
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '24';
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '24';
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '24';
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-29 20:00:00' AND ri.start_date <= '2019-07-29 23:00:00') OR
					(ri.end_date >= '2019-07-29 20:00:00' AND ri.end_date <= '2019-07-29 23:00:00') OR
					(ri.start_date <= '2019-07-29 20:00:00' AND ri.end_date >= '2019-07-29 23:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('24'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-29 20:00:00' AND bi.start_date <= '2019-07-29 23:00:00')
				OR
				(bi.end_date >= '2019-07-29 20:00:00' AND bi.end_date <= '2019-07-29 23:00:00')
				OR
				(bi.start_date <= '2019-07-29 20:00:00' AND bi.end_date >= '2019-07-29 23:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '496' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496');
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '20'
		ORDER BY tb.start_time;
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '20';
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '496';
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '496';
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '496' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '496';
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '496';
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:44:05+07:00 [3863] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T15:44:08+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:44:08+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:44:08+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '20' OR r.schedule_id = '20')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:44:08+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '20' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:44:08+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:44:08+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:44:08+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:44:08+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '20' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:44:08+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:44:08+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '496' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:44:08+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496');
2019-07-24T15:44:08+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-29 00:00:00' AND ri.start_date <= '2019-08-05 00:00:00') OR
					(ri.end_date >= '2019-07-29 00:00:00' AND ri.end_date <= '2019-08-05 00:00:00') OR
					(ri.start_date <= '2019-07-29 00:00:00' AND ri.end_date >= '2019-08-05 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('20')) AND
					('0' = 1 OR rr.resource_id IN ('24'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:44:08+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:44:08+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-29 00:00:00' AND bi.start_date <= '2019-08-05 00:00:00')
				OR
				(bi.end_date >= '2019-07-29 00:00:00' AND bi.end_date <= '2019-08-05 00:00:00')
				OR
				(bi.start_date <= '2019-07-29 00:00:00' AND bi.end_date >= '2019-08-05 00:00:00')
			) AND
			('20' = -1 OR r.schedule_id = '20')
		ORDER BY bi.start_date ASC;
2019-07-24T15:44:08+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '20'
		ORDER BY tb.start_time;
2019-07-24T15:44:08+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '20';
2019-07-24T15:44:11+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:44:11+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '20' OR r.schedule_id = '20')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:44:11+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '20' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:44:11+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T15:44:11+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '20'
		ORDER BY tb.start_time;
2019-07-24T15:44:11+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '20';
2019-07-24T15:44:11+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '496';
2019-07-24T15:44:11+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '496';
2019-07-24T15:44:11+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:44:11+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '496' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:44:11+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '496';
2019-07-24T15:44:11+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '496';
2019-07-24T15:44:11+07:00 [12231] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '496';
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '24';
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '24';
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '24';
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-30 20:00:00' AND ri.start_date <= '2019-07-30 22:00:00') OR
					(ri.end_date >= '2019-07-30 20:00:00' AND ri.end_date <= '2019-07-30 22:00:00') OR
					(ri.start_date <= '2019-07-30 20:00:00' AND ri.end_date >= '2019-07-30 22:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('24'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-30 20:00:00' AND bi.start_date <= '2019-07-30 22:00:00')
				OR
				(bi.end_date >= '2019-07-30 20:00:00' AND bi.end_date <= '2019-07-30 22:00:00')
				OR
				(bi.start_date <= '2019-07-30 20:00:00' AND bi.end_date >= '2019-07-30 22:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '496' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '496');
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '20'
		ORDER BY tb.start_time;
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '20';
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '496';
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '496';
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '496' AND r.resource_id = urp.resource_id;
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '496' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '496';
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '496';
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:44:13+07:00 [3895] DEBUG sql - [User=Pangrum Punthong (Pangrum.p_s17@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T15:52:37+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'tipwip123@gmail.com' OR email = 'tipwip123@gmail.com') AND status_id = 1;
2019-07-24T15:52:37+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'tipwip123@gmail.com' OR email = 'tipwip123@gmail.com');
2019-07-24T15:52:37+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '561';
2019-07-24T15:52:37+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '561' AND r.resource_id = urp.resource_id;
2019-07-24T15:52:37+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '561' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:52:37+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '561';
2019-07-24T15:52:37+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '561';
2019-07-24T15:52:37+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'fab32118c6f0f24a5fbc150b8fd6110ae39a2c0a',
			salt = '5e409e53',
			fname = 'Thipwipa',
			lname = 'Sirinakorn',
			email = 'tipwip123@gmail.com',
			username = 'maothisi',
			homepageId = '1',
			last_modified = '2019-07-24 15:52:37',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d3681f234c2a',
			language = 'en_us',
			lastlogin = '2019-07-24 15:52:37',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '561';
2019-07-24T15:52:37+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T15:52:37+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 15:52:37' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 15:52:37' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T15:52:37+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:52:37+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '561' AND r.resource_id = urp.resource_id;
2019-07-24T15:52:37+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '561' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:52:37+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '561')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '561');
2019-07-24T15:52:37+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:52:37+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '561';
2019-07-24T15:52:37+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '561';
2019-07-24T15:52:37+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '561' AND r.resource_id = urp.resource_id;
2019-07-24T15:52:37+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '561' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:52:37+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '561';
2019-07-24T15:52:37+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '561';
2019-07-24T15:52:37+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:52:37+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:52:37+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:52:38+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '561';
2019-07-24T15:52:38+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '561';
2019-07-24T15:52:38+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '561' AND r.resource_id = urp.resource_id;
2019-07-24T15:52:38+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '561' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:52:38+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '561';
2019-07-24T15:52:38+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '561';
2019-07-24T15:52:38+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'fab32118c6f0f24a5fbc150b8fd6110ae39a2c0a',
			salt = '5e409e53',
			fname = 'Thipwipa',
			lname = 'Sirinakorn',
			email = 'tipwip123@gmail.com',
			username = 'maothisi',
			homepageId = '1',
			last_modified = '2019-07-24 15:52:38',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d3681f234c2a',
			language = 'en_us',
			lastlogin = '2019-07-24 15:52:37',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '561';
2019-07-24T15:52:38+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('561' = -1 OR ru.user_id = '561') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T15:52:38+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:52:55+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:52:55+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:52:55+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:52:55+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:52:55+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:52:55+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:52:55+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:52:55+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:52:55+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '561' AND r.resource_id = urp.resource_id;
2019-07-24T15:52:55+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '561' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:52:55+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '561')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '561');
2019-07-24T15:52:55+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:52:55+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:52:55+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:52:55+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:52:55+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:53:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:53:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:53:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:53:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:53:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:53:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:53:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:53:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:53:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '561' AND r.resource_id = urp.resource_id;
2019-07-24T15:53:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '561' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:53:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '561')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '561');
2019-07-24T15:53:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:53:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:53:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:53:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:53:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d36acc74fb43461664064' AND
			rs.status_id <> 2;
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3440'
		ORDER BY resource_level_id, r.name;
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3427';
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3440';
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3440';
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3440';
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3440';
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3427';
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '561';
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '561';
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '561' AND r.resource_id = urp.resource_id;
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '561' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '561';
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '561';
2019-07-24T15:54:02+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '396';
2019-07-24T15:54:15+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 15:54:15' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 15:54:15' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T15:54:15+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:54:15+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '561' AND r.resource_id = urp.resource_id;
2019-07-24T15:54:15+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '561' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:54:15+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '561')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '561');
2019-07-24T15:54:15+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:54:15+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '561';
2019-07-24T15:54:15+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '561';
2019-07-24T15:54:15+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '561' AND r.resource_id = urp.resource_id;
2019-07-24T15:54:15+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '561' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:54:15+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '561';
2019-07-24T15:54:15+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '561';
2019-07-24T15:54:15+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:54:15+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:54:15+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:54:16+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '561';
2019-07-24T15:54:16+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '561';
2019-07-24T15:54:16+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '561' AND r.resource_id = urp.resource_id;
2019-07-24T15:54:16+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '561' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:54:16+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '561';
2019-07-24T15:54:16+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '561';
2019-07-24T15:54:16+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'fab32118c6f0f24a5fbc150b8fd6110ae39a2c0a',
			salt = '5e409e53',
			fname = 'Thipwipa',
			lname = 'Sirinakorn',
			email = 'tipwip123@gmail.com',
			username = 'maothisi',
			homepageId = '1',
			last_modified = '2019-07-24 15:54:16',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d3681f234c2a',
			language = 'en_us',
			lastlogin = '2019-07-24 15:52:37',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '561';
2019-07-24T15:54:16+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('561' = -1 OR ru.user_id = '561') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T15:54:16+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:55:27+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:55:27+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:55:27+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:55:27+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:55:27+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:55:27+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:55:27+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:55:27+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:55:27+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '561' AND r.resource_id = urp.resource_id;
2019-07-24T15:55:27+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '561' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:55:27+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '561')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '561');
2019-07-24T15:55:27+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:55:27+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:55:27+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:55:27+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:55:27+07:00 [12231] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:55:57+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:55:57+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:55:57+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:55:57+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:55:57+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:55:57+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:55:57+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:55:57+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:55:57+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '561' AND r.resource_id = urp.resource_id;
2019-07-24T15:55:57+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '561' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:55:57+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '561')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '561');
2019-07-24T15:55:57+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:55:57+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:55:57+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:55:57+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:55:57+07:00 [3863] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:56:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:56:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:56:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:56:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:56:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:56:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:56:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:56:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:56:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '561' AND r.resource_id = urp.resource_id;
2019-07-24T15:56:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '561' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:56:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '561')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '561');
2019-07-24T15:56:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:56:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:56:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:56:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:56:01+07:00 [3895] DEBUG sql - [User=Thipwipa Sirinakorn (tipwip123@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:58:10+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'khpweepa' OR email = 'khpweepa') AND status_id = 1;
2019-07-24T15:58:10+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'khpweepa' OR email = 'khpweepa');
2019-07-24T15:58:10+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '438';
2019-07-24T15:58:10+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-07-24T15:58:10+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '438' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:58:10+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '438';
2019-07-24T15:58:10+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '438';
2019-07-24T15:58:10+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'b5be60a4aab00aec38630eaa8af09c7c193d4cd3',
			salt = '3c312ec5',
			fname = 'Weerapha',
			lname = 'Panatdasirisuk',
			email = 'gluay88weerapha@gmail.com',
			username = 'khpweepa',
			homepageId = '1',
			last_modified = '2019-07-24 15:58:10',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b4ed41bc9',
			language = 'en_us',
			lastlogin = '2019-07-24 15:58:10',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '438';
2019-07-24T15:58:10+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T15:58:10+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 15:58:10' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 15:58:10' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T15:58:10+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:58:10+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-07-24T15:58:10+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '438' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:58:10+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438');
2019-07-24T15:58:10+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:58:10+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '438';
2019-07-24T15:58:10+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '438';
2019-07-24T15:58:10+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-07-24T15:58:10+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '438' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:58:10+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '438';
2019-07-24T15:58:10+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '438';
2019-07-24T15:58:10+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:58:10+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:58:10+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:58:11+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '438';
2019-07-24T15:58:11+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '438';
2019-07-24T15:58:11+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-07-24T15:58:11+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '438' AND (null is null OR r.role_level IN (null) );
2019-07-24T15:58:11+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '438';
2019-07-24T15:58:11+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '438';
2019-07-24T15:58:11+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'b5be60a4aab00aec38630eaa8af09c7c193d4cd3',
			salt = '3c312ec5',
			fname = 'Weerapha',
			lname = 'Panatdasirisuk',
			email = 'gluay88weerapha@gmail.com',
			username = 'khpweepa',
			homepageId = '1',
			last_modified = '2019-07-24 15:58:11',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b4ed41bc9',
			language = 'en_us',
			lastlogin = '2019-07-24 15:58:10',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '438';
2019-07-24T15:58:11+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('438' = -1 OR ru.user_id = '438') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T15:58:11+07:00 [3895] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:58:17+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:58:17+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:58:17+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:58:17+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:58:17+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:58:17+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:58:17+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:58:17+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:58:17+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-07-24T15:58:17+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '438' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:58:17+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438');
2019-07-24T15:58:17+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:58:17+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:58:18+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:58:18+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:58:18+07:00 [12231] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T15:58:23+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T15:58:23+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T15:58:23+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:58:23+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:58:23+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T15:58:23+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:58:23+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T15:58:23+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T15:58:23+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '438' AND r.resource_id = urp.resource_id;
2019-07-24T15:58:23+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '438' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T15:58:23+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '438');
2019-07-24T15:58:23+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T15:58:23+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T15:58:24+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T15:58:24+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T15:58:24+07:00 [3863] DEBUG sql - [User=Weerapha Panatdasirisuk (gluay88weerapha@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T16:09:22+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'dacarjjo' OR email = 'dacarjjo') AND status_id = 1;
2019-07-24T16:09:22+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'dacarjjo' OR email = 'dacarjjo');
2019-07-24T16:09:22+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '406';
2019-07-24T16:09:22+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T16:09:22+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '406' AND (null is null OR r.role_level IN (null) );
2019-07-24T16:09:22+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '406';
2019-07-24T16:09:22+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '406';
2019-07-24T16:09:22+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '47eedafcc4d2f6049396b7203e49e8a9d8014477',
			salt = '054f45b8',
			fname = 'Arjaree',
			lname = 'Jobdeedamrong',
			email = '1630301@vistec.ac.th',
			username = 'dacarjjo',
			homepageId = '1',
			last_modified = '2019-07-24 16:09:22',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9070eb8aed6',
			language = 'en_us',
			lastlogin = '2019-07-24 16:09:22',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '406';
2019-07-24T16:09:22+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T16:09:22+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 16:09:22' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 16:09:22' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T16:09:22+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T16:09:22+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T16:09:22+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '406' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T16:09:22+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406');
2019-07-24T16:09:22+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T16:09:22+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '406';
2019-07-24T16:09:22+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '406';
2019-07-24T16:09:22+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T16:09:22+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '406' AND (null is null OR r.role_level IN (null) );
2019-07-24T16:09:22+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '406';
2019-07-24T16:09:22+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '406';
2019-07-24T16:09:22+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T16:09:22+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T16:09:22+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T16:09:23+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '406';
2019-07-24T16:09:23+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '406';
2019-07-24T16:09:23+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T16:09:23+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '406' AND (null is null OR r.role_level IN (null) );
2019-07-24T16:09:23+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '406';
2019-07-24T16:09:23+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '406';
2019-07-24T16:09:23+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '47eedafcc4d2f6049396b7203e49e8a9d8014477',
			salt = '054f45b8',
			fname = 'Arjaree',
			lname = 'Jobdeedamrong',
			email = '1630301@vistec.ac.th',
			username = 'dacarjjo',
			homepageId = '1',
			last_modified = '2019-07-24 16:09:23',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9070eb8aed6',
			language = 'en_us',
			lastlogin = '2019-07-24 16:09:22',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '406';
2019-07-24T16:09:23+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('406' = -1 OR ru.user_id = '406') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T16:09:23+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T16:09:35+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T16:09:35+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T16:09:35+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T16:09:35+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T16:09:35+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T16:09:35+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T16:09:35+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T16:09:35+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T16:09:35+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T16:09:35+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '406' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T16:09:35+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406');
2019-07-24T16:09:35+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T16:09:35+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T16:09:35+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T16:09:35+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T16:09:35+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T16:09:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T16:09:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T16:09:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T16:09:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T16:09:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T16:09:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T16:09:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T16:09:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T16:09:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T16:09:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '406' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T16:09:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406');
2019-07-24T16:09:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T16:09:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T16:09:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T16:09:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T16:09:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T17:01:05+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'vippatfu' OR email = 'vippatfu') AND status_id = 1;
2019-07-24T17:01:05+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'vippatfu' OR email = 'vippatfu');
2019-07-24T17:01:05+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '451';
2019-07-24T17:01:05+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-07-24T17:01:05+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '451' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:01:05+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '451';
2019-07-24T17:01:05+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '451';
2019-07-24T17:01:05+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '367d0a820b128187e1b1d7c05e32658b7251d8ef',
			salt = '0a70ace5',
			fname = 'Patteera',
			lname = 'Funchien',
			email = '1630304@vistec.ac.th',
			username = 'vippatfu',
			homepageId = '1',
			last_modified = '2019-07-24 17:01:05',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9301cb40537',
			language = 'en_us',
			lastlogin = '2019-07-24 17:01:05',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '451';
2019-07-24T17:01:05+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T17:01:06+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:01:06+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:01:06+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:01:06+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:01:06+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:01:06+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:01:06+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:01:06+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:01:06+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-07-24T17:01:06+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:01:06+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-07-24T17:01:06+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:01:06+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:01:06+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-07-24T17:01:06+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-07-24T17:01:06+07:00 [3895] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-07-24T17:01:12+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:01:12+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:01:12+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:01:12+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:01:12+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:01:12+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:01:12+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:01:12+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:01:12+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-07-24T17:01:12+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:01:12+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-07-24T17:01:12+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:01:12+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:01:13+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T17:01:13+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:01:13+07:00 [12231] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:01:29+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'maoaliph' OR email = 'maoaliph') AND status_id = 1;
2019-07-24T17:01:29+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'maoaliph' OR email = 'maoaliph');
2019-07-24T17:01:29+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-07-24T17:01:29+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-07-24T17:01:29+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:01:29+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-07-24T17:01:29+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-07-24T17:01:29+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '75084d32e32d9238485b1f24b50f22699fb0d73d',
			salt = '09e91774',
			fname = 'Alisa',
			lname = 'Phuekphong',
			email = '1830401@vistec.ac.th',
			username = 'maoaliph',
			homepageId = '1',
			last_modified = '2019-07-24 17:01:29',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9ddd7ee819c',
			language = 'en_us',
			lastlogin = '2019-07-24 17:01:29',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '485';
2019-07-24T17:01:29+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T17:01:29+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 17:01:29' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 17:01:29' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T17:01:29+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:01:29+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-07-24T17:01:29+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:01:29+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-07-24T17:01:29+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:01:29+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-07-24T17:01:29+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-07-24T17:01:29+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-07-24T17:01:29+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:01:29+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-07-24T17:01:29+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-07-24T17:01:29+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:01:29+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:01:29+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:01:30+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-07-24T17:01:30+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-07-24T17:01:30+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-07-24T17:01:30+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:01:30+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-07-24T17:01:30+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-07-24T17:01:30+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '75084d32e32d9238485b1f24b50f22699fb0d73d',
			salt = '09e91774',
			fname = 'Alisa',
			lname = 'Phuekphong',
			email = '1830401@vistec.ac.th',
			username = 'maoaliph',
			homepageId = '1',
			last_modified = '2019-07-24 17:01:30',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9ddd7ee819c',
			language = 'en_us',
			lastlogin = '2019-07-24 17:01:29',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '485';
2019-07-24T17:01:30+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('485' = -1 OR ru.user_id = '485') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T17:01:30+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:01:42+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:01:42+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:01:42+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '21' OR r.schedule_id = '21')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:01:42+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:01:42+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:01:42+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:01:42+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:01:42+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '21' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:01:42+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '451' AND r.resource_id = urp.resource_id;
2019-07-24T17:01:42+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '451' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:01:42+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '451');
2019-07-24T17:01:42+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('21')) AND
					('0' = 1 OR rr.resource_id IN ('26'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:01:42+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:01:42+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('21' = -1 OR r.schedule_id = '21')
		ORDER BY bi.start_date ASC;
2019-07-24T17:01:42+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '21'
		ORDER BY tb.start_time;
2019-07-24T17:01:42+07:00 [3863] DEBUG sql - [User=Patteera Funchien (1630304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '21';
2019-07-24T17:01:54+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:01:54+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:01:54+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:01:54+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:01:54+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:01:54+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:01:54+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:01:54+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:01:54+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-07-24T17:01:54+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:01:54+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-07-24T17:01:54+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:01:54+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:01:54+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T17:01:54+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:01:54+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:02:02+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:02:02+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:02:02+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:02:02+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:02:02+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:02:02+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:02:02+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:02:02+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:02:02+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-07-24T17:02:02+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:02:02+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-07-24T17:02:02+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:02:02+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:02:02+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-07-24T17:02:02+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-07-24T17:02:02+07:00 [12231] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d36a6873caed166965215' AND
			rs.status_id <> 2;
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3439'
		ORDER BY resource_level_id, r.name;
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3426';
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3439';
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3439';
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3439';
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3439';
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3426';
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '485';
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '485';
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '485' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '485';
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '485';
2019-07-24T17:02:21+07:00 [3895] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-07-24T17:02:25+07:00 [3863] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:02:25+07:00 [3863] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:02:25+07:00 [3863] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:02:25+07:00 [3863] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:02:25+07:00 [3863] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:02:25+07:00 [3863] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:02:25+07:00 [3863] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:02:25+07:00 [3863] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:02:25+07:00 [3863] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '485' AND r.resource_id = urp.resource_id;
2019-07-24T17:02:25+07:00 [3863] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '485' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:02:25+07:00 [3863] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '485');
2019-07-24T17:02:25+07:00 [3863] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:02:25+07:00 [3863] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:02:25+07:00 [3863] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-07-24T17:02:25+07:00 [3863] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-07-24T17:02:25+07:00 [3863] DEBUG sql - [User=Alisa Phuekphong (1830401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-07-24T17:03:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'maosiwde' OR email = 'maosiwde') AND status_id = 1;
2019-07-24T17:03:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'maosiwde' OR email = 'maosiwde');
2019-07-24T17:03:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '482';
2019-07-24T17:03:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:03:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '482' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:03:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '482';
2019-07-24T17:03:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '482';
2019-07-24T17:03:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'dadaaa29490fbb3be3dda4c38274329199e3a08e',
			salt = '333a31a8',
			fname = 'Siwada',
			lname = 'Deepracha',
			email = '1630201@vistec.ac.th',
			username = 'maosiwde',
			homepageId = '1',
			last_modified = '2019-07-24 17:03:06',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f33c13fc9e',
			language = 'en_us',
			lastlogin = '2019-07-24 17:03:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '482';
2019-07-24T17:03:06+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T17:03:06+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 17:03:06' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 17:03:06' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T17:03:06+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:06+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:03:06+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:03:06+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-07-24T17:03:06+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:03:06+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-07-24T17:03:06+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '482';
2019-07-24T17:03:06+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:03:06+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '482' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:03:06+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '482';
2019-07-24T17:03:06+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '482';
2019-07-24T17:03:06+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:03:06+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:06+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:07+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-07-24T17:03:07+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '482';
2019-07-24T17:03:07+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:03:07+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '482' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:03:07+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '482';
2019-07-24T17:03:07+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '482';
2019-07-24T17:03:07+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'dadaaa29490fbb3be3dda4c38274329199e3a08e',
			salt = '333a31a8',
			fname = 'Siwada',
			lname = 'Deepracha',
			email = '1630201@vistec.ac.th',
			username = 'maosiwde',
			homepageId = '1',
			last_modified = '2019-07-24 17:03:07',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f33c13fc9e',
			language = 'en_us',
			lastlogin = '2019-07-24 17:03:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '482';
2019-07-24T17:03:07+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('482' = -1 OR ru.user_id = '482') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T17:03:07+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:03:09+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:03:09+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:03:09+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:09+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:09+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:03:09+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:03:09+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:03:09+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:09+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:03:09+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:03:09+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-07-24T17:03:09+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:03:09+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:03:09+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T17:03:09+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:03:09+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:03:15+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:03:15+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:03:15+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '13' OR r.schedule_id = '13')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:15+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:15+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:03:15+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:03:15+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:03:15+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '13' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:15+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:03:15+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:03:15+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-07-24T17:03:15+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('13')) AND
					('0' = 1 OR rr.resource_id IN ('16'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:03:15+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:03:15+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('13' = -1 OR r.schedule_id = '13')
		ORDER BY bi.start_date ASC;
2019-07-24T17:03:15+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '13'
		ORDER BY tb.start_time;
2019-07-24T17:03:15+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '13';
2019-07-24T17:03:37+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 17:03:37' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 17:03:37' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T17:03:37+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:37+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:03:37+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:03:37+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-07-24T17:03:37+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:03:37+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-07-24T17:03:37+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '482';
2019-07-24T17:03:37+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:03:37+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '482' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:03:37+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '482';
2019-07-24T17:03:37+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '482';
2019-07-24T17:03:37+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:03:37+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:37+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:37+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-07-24T17:03:37+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '482';
2019-07-24T17:03:37+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:03:37+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '482' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:03:37+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '482';
2019-07-24T17:03:37+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '482';
2019-07-24T17:03:37+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'dadaaa29490fbb3be3dda4c38274329199e3a08e',
			salt = '333a31a8',
			fname = 'Siwada',
			lname = 'Deepracha',
			email = '1630201@vistec.ac.th',
			username = 'maosiwde',
			homepageId = '1',
			last_modified = '2019-07-24 17:03:37',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f33c13fc9e',
			language = 'en_us',
			lastlogin = '2019-07-24 17:03:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '482';
2019-07-24T17:03:37+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('482' = -1 OR ru.user_id = '482') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T17:03:37+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:03:41+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:03:41+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:03:41+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:41+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:41+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:03:41+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:03:41+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:03:41+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:41+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:03:41+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:03:41+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-07-24T17:03:41+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:03:41+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:03:41+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T17:03:41+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:03:41+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:03:50+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:03:50+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:03:50+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:50+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:50+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:03:50+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:03:50+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:03:50+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:03:50+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:03:50+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:03:50+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-07-24T17:03:50+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:03:50+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:03:50+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T17:03:50+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T17:03:50+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T17:05:01+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 17:05:01' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 17:05:01' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T17:05:01+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:01+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:05:01+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:05:01+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-07-24T17:05:01+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:05:01+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-07-24T17:05:01+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '482';
2019-07-24T17:05:01+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:05:01+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '482' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:05:01+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '482';
2019-07-24T17:05:01+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '482';
2019-07-24T17:05:01+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:05:01+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:01+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:02+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-07-24T17:05:02+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '482';
2019-07-24T17:05:02+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:05:02+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '482' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:05:02+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '482';
2019-07-24T17:05:02+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '482';
2019-07-24T17:05:02+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'dadaaa29490fbb3be3dda4c38274329199e3a08e',
			salt = '333a31a8',
			fname = 'Siwada',
			lname = 'Deepracha',
			email = '1630201@vistec.ac.th',
			username = 'maosiwde',
			homepageId = '1',
			last_modified = '2019-07-24 17:05:02',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8f33c13fc9e',
			language = 'en_us',
			lastlogin = '2019-07-24 17:03:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '482';
2019-07-24T17:05:02+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('482' = -1 OR ru.user_id = '482') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T17:05:02+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:05:05+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:05:05+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:05:05+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:05+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:05+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:05:05+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:05:05+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:05:05+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:05+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:05:05+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:05:05+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-07-24T17:05:05+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:05:05+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:05:05+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T17:05:05+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:05:05+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:05:17+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:05:17+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:05:17+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:17+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:17+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:05:17+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:05:17+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:05:17+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:17+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:05:17+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:05:17+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-07-24T17:05:17+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:05:17+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:05:17+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T17:05:17+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T17:05:17+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T17:05:23+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:05:23+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:23+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:23+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T17:05:23+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T17:05:23+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T17:05:23+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-07-24T17:05:23+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '482';
2019-07-24T17:05:23+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:05:23+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '482' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:05:23+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '482';
2019-07-24T17:05:23+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '482';
2019-07-24T17:05:23+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 20:00:00' AND ri.start_date <= '2019-07-24 22:00:00') OR
					(ri.end_date >= '2019-07-24 20:00:00' AND ri.end_date <= '2019-07-24 22:00:00') OR
					(ri.start_date <= '2019-07-24 20:00:00' AND ri.end_date >= '2019-07-24 22:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-24 20:00:00' AND bi.start_date <= '2019-07-24 22:00:00')
				OR
				(bi.end_date >= '2019-07-24 20:00:00' AND bi.end_date <= '2019-07-24 22:00:00')
				OR
				(bi.start_date <= '2019-07-24 20:00:00' AND bi.end_date >= '2019-07-24 22:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '482';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '482' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '482';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '482';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 17:05:41' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-24 17:05:41' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-24 17:05:41' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('482' = -1 OR ru.user_id = '482') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-24 17:05:41', null, null, '0', false, 'none', '', '1', '1', '482', null);
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3468', '19', '1');
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-24 20:00:00', '2019-07-24 22:00:00', '5d382d753cb00716965175', '3468', null);
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3455', '482', '1');
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3455', '484', '2');
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '482';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '482' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '482';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '482';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T17:05:41+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:05:44+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:05:44+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:05:44+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:44+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:44+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:05:44+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:05:44+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:05:44+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:44+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:05:44+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:05:44+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-07-24T17:05:44+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:05:44+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:05:44+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T17:05:44+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T17:05:44+07:00 [3863] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T17:05:53+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'maonavpa' OR email = 'maonavpa') AND status_id = 1;
2019-07-24T17:05:53+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'maonavpa' OR email = 'maonavpa');
2019-07-24T17:05:53+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T17:05:53+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:05:53+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:05:53+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T17:05:53+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T17:05:53+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0fc50cca7442b739d9ae10b53cf7df01e0a68568',
			salt = '03cfae9c',
			fname = 'Navarut',
			lname = 'Paengjun',
			email = '1830406@vistec.ac.th',
			username = 'maonavpa',
			homepageId = '1',
			last_modified = '2019-07-24 17:05:53',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca1968dd6288',
			language = 'en_us',
			lastlogin = '2019-07-24 17:05:53',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '484';
2019-07-24T17:05:53+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T17:05:54+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 17:05:54' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 17:05:54' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T17:05:54+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:54+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:05:54+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '484' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:05:54+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484');
2019-07-24T17:05:54+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:05:54+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T17:05:54+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T17:05:54+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:05:54+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:05:54+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T17:05:54+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T17:05:54+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:05:54+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:54+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:55+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T17:05:55+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T17:05:55+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:05:55+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:05:55+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T17:05:55+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T17:05:55+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0fc50cca7442b739d9ae10b53cf7df01e0a68568',
			salt = '03cfae9c',
			fname = 'Navarut',
			lname = 'Paengjun',
			email = '1830406@vistec.ac.th',
			username = 'maonavpa',
			homepageId = '1',
			last_modified = '2019-07-24 17:05:55',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca1968dd6288',
			language = 'en_us',
			lastlogin = '2019-07-24 17:05:53',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '484';
2019-07-24T17:05:55+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('484' = -1 OR ru.user_id = '484') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T17:05:55+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d35b5eadb57a148093727' AND
			rs.status_id <> 2;
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3429'
		ORDER BY resource_level_id, r.name;
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3416';
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3429';
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3429';
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3429';
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3429';
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3416';
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '482';
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '482' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '482';
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '482';
2019-07-24T17:05:57+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-07-24T17:06:02+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:06:02+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:06:02+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:02+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:02+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:06:02+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:06:02+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:06:02+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:02+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:02+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:06:02+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-07-24T17:06:02+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:06:02+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:06:02+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T17:06:02+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T17:06:02+07:00 [3895] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d33e3fb9c41d502550200' AND
			rs.status_id <> 2;
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3387'
		ORDER BY resource_level_id, r.name;
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3374';
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3387';
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3387';
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3387';
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3387';
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3374';
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T17:06:04+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T17:06:04+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:06:04+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:04+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T17:06:04+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:06:04+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:06:04+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '482';
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '482';
2019-07-24T17:06:04+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:04+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '482' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '482';
2019-07-24T17:06:04+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '484' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:06:04+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484');
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '482';
2019-07-24T17:06:04+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '524';
2019-07-24T17:06:04+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:06:04+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:06:04+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T17:06:04+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:06:04+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:06:07+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:06:07+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:06:07+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:07+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:07+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:06:07+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:06:07+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:06:07+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:07+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '482' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:07+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '482' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:06:07+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '482');
2019-07-24T17:06:07+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:06:07+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:06:07+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T17:06:07+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T17:06:07+07:00 [12231] DEBUG sql - [User=Siwada Deepracha (1630201@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T17:06:11+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:06:11+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:06:11+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:11+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:11+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:06:11+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:06:11+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:06:11+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:11+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:11+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '484' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:06:11+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484');
2019-07-24T17:06:11+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:06:11+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:06:11+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T17:06:11+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:06:11+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:06:23+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:06:23+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:23+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:23+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T17:06:23+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:06:23+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:06:23+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T17:06:23+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T17:06:23+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:23+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:06:23+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T17:06:23+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T17:06:23+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T17:06:34+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:06:34+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:06:34+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:34+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:34+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:06:34+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:06:34+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:06:34+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:34+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:34+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '484' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:06:34+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484');
2019-07-24T17:06:34+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:06:34+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:06:34+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T17:06:34+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:06:34+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:06:38+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:38+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:38+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '484' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:06:38+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484');
2019-07-24T17:06:38+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:06:38+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T17:06:38+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T17:06:38+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:38+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:06:38+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T17:06:38+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T17:06:38+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:06:38+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:38+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:39+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T17:06:39+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T17:06:39+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:39+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:06:39+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T17:06:39+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T17:06:39+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0fc50cca7442b739d9ae10b53cf7df01e0a68568',
			salt = '03cfae9c',
			fname = 'Navarut',
			lname = 'Paengjun',
			email = '1830406@vistec.ac.th',
			username = 'maonavpa',
			homepageId = '1',
			last_modified = '2019-07-24 17:06:39',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca1968dd6288',
			language = 'en_us',
			lastlogin = '2019-07-24 17:05:53',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '484';
2019-07-24T17:06:39+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('484' = -1 OR ru.user_id = '484') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T17:06:39+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d2afa5499001095995132' AND
			rs.status_id <> 2;
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3228'
		ORDER BY resource_level_id, r.name;
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3215';
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3228';
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3228';
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3228';
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3228';
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3215';
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T17:06:40+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T17:06:43+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:43+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:43+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '484' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:06:43+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484');
2019-07-24T17:06:43+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:06:43+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T17:06:43+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T17:06:43+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:43+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:06:43+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T17:06:43+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T17:06:43+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:06:43+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:43+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:43+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T17:06:43+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T17:06:43+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:43+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:06:43+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T17:06:43+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T17:06:43+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0fc50cca7442b739d9ae10b53cf7df01e0a68568',
			salt = '03cfae9c',
			fname = 'Navarut',
			lname = 'Paengjun',
			email = '1830406@vistec.ac.th',
			username = 'maonavpa',
			homepageId = '1',
			last_modified = '2019-07-24 17:06:43',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca1968dd6288',
			language = 'en_us',
			lastlogin = '2019-07-24 17:05:53',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '484';
2019-07-24T17:06:43+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('484' = -1 OR ru.user_id = '484') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T17:06:43+07:00 [12231] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d3134424c525256078529' AND
			rs.status_id <> 2;
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3351'
		ORDER BY resource_level_id, r.name;
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3338';
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3351';
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3351';
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3351';
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3351';
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3338';
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T17:06:46+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T17:06:58+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:58+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:58+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '484' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:06:58+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '484');
2019-07-24T17:06:58+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:06:58+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T17:06:58+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T17:06:58+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:58+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:06:58+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T17:06:58+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T17:06:58+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:06:58+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:58+07:00 [3863] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:06:59+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '484';
2019-07-24T17:06:59+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '484';
2019-07-24T17:06:59+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '484' AND r.resource_id = urp.resource_id;
2019-07-24T17:06:59+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '484' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:06:59+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '484';
2019-07-24T17:06:59+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '484';
2019-07-24T17:06:59+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '0fc50cca7442b739d9ae10b53cf7df01e0a68568',
			salt = '03cfae9c',
			fname = 'Navarut',
			lname = 'Paengjun',
			email = '1830406@vistec.ac.th',
			username = 'maonavpa',
			homepageId = '1',
			last_modified = '2019-07-24 17:06:59',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5ca1968dd6288',
			language = 'en_us',
			lastlogin = '2019-07-24 17:05:53',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '484';
2019-07-24T17:06:59+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('484' = -1 OR ru.user_id = '484') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T17:06:59+07:00 [3895] DEBUG sql - [User=Navarut Paengjun (1830406@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:18:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwpandu' OR email = 'chwpandu') AND status_id = 1;
2019-07-24T17:18:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chwpandu' OR email = 'chwpandu');
2019-07-24T17:18:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T17:18:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T17:18:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:18:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T17:18:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T17:18:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '11d04029d6afd0be22580a80023b082af3a264e6',
			salt = '43422d6a',
			fname = 'Pannida',
			lname = 'Dugkhuntod',
			email = 's15_pannida.d@vistec.ac.th',
			username = 'chwpandu',
			homepageId = '1',
			last_modified = '2019-07-24 17:18:43',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c89d4cb4a9f9',
			language = 'en_us',
			lastlogin = '2019-07-24 17:18:43',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '421';
2019-07-24T17:18:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T17:18:43+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 17:18:43' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 17:18:43' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T17:18:43+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:18:43+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T17:18:43+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:18:43+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T17:18:43+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:18:43+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T17:18:43+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T17:18:43+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T17:18:43+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:18:43+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T17:18:43+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T17:18:43+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:18:43+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:18:43+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:18:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T17:18:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T17:18:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T17:18:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:18:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T17:18:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T17:18:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '11d04029d6afd0be22580a80023b082af3a264e6',
			salt = '43422d6a',
			fname = 'Pannida',
			lname = 'Dugkhuntod',
			email = 's15_pannida.d@vistec.ac.th',
			username = 'chwpandu',
			homepageId = '1',
			last_modified = '2019-07-24 17:18:44',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c89d4cb4a9f9',
			language = 'en_us',
			lastlogin = '2019-07-24 17:18:43',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '421';
2019-07-24T17:18:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('421' = -1 OR ru.user_id = '421') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T17:18:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:18:49+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:18:49+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:18:49+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:18:49+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:18:49+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:18:49+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:18:49+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:18:49+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:18:49+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T17:18:49+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:18:49+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T17:18:49+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:18:49+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:18:49+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T17:18:49+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:18:49+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:18:53+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:18:53+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:18:53+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:18:53+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:18:53+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:18:53+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:18:53+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:18:53+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:18:53+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T17:18:53+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:18:53+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T17:18:53+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:18:53+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:18:53+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T17:18:53+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T17:18:53+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T17:19:40+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:19:40+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:19:40+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:19:40+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T17:19:40+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T17:19:40+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T17:19:40+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T17:19:40+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T17:19:40+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T17:19:40+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:19:40+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T17:19:40+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T17:19:40+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 22:00:00' AND ri.start_date <= '2019-07-24 23:00:00') OR
					(ri.end_date >= '2019-07-24 22:00:00' AND ri.end_date <= '2019-07-24 23:00:00') OR
					(ri.start_date <= '2019-07-24 22:00:00' AND ri.end_date >= '2019-07-24 23:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-24 22:00:00' AND bi.start_date <= '2019-07-24 23:00:00')
				OR
				(bi.end_date >= '2019-07-24 22:00:00' AND bi.end_date <= '2019-07-24 23:00:00')
				OR
				(bi.start_date <= '2019-07-24 22:00:00' AND bi.end_date >= '2019-07-24 23:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 17:19:49' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-24 17:19:49' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-24 17:19:49' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('421' = -1 OR ru.user_id = '421') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-24 17:19:49', null, null, '0', false, 'none', '', '1', '1', '421', null);
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3470', '19', '1');
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-24 22:00:00', '2019-07-24 23:00:00', '5d3830c562785675075021', '3470', null);
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3457', '421', '1');
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T17:19:49+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T17:19:50+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:19:50+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:19:50+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:19:50+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:19:50+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:19:50+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:19:50+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:19:50+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:19:50+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T17:19:50+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:19:50+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T17:19:50+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:19:50+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:19:50+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T17:19:50+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T17:19:50+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T17:25:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'khptipja' OR email = 'khptipja') AND status_id = 1;
2019-07-24T17:25:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'khptipja' OR email = 'khptipja');
2019-07-24T17:25:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '559';
2019-07-24T17:25:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-07-24T17:25:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '559' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:25:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '559';
2019-07-24T17:25:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '559';
2019-07-24T17:25:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ba91b73a522395bf7bc376626b9e051e67067ac4',
			salt = '0cd9f08c',
			fname = 'Tiphanan',
			lname = 'Janijai',
			email = 'tiphanan.jan@gmail.com',
			username = 'khptipja',
			homepageId = '1',
			last_modified = '2019-07-24 17:25:06',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5d086a1114b8a',
			language = 'en_us',
			lastlogin = '2019-07-24 17:25:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '559';
2019-07-24T17:25:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T17:25:06+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:25:06+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:25:06+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:25:06+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:25:06+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:25:06+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:25:06+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:25:06+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:25:06+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-07-24T17:25:06+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '559' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:25:06+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559');
2019-07-24T17:25:06+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:25:06+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:25:06+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T17:25:06+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:25:06+07:00 [12231] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:25:09+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:25:09+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:25:09+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:25:09+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:25:09+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:25:09+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:25:09+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:25:09+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:25:09+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '559' AND r.resource_id = urp.resource_id;
2019-07-24T17:25:09+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '559' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:25:09+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '559');
2019-07-24T17:25:09+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:25:09+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:25:09+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T17:25:09+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:25:09+07:00 [3863] DEBUG sql - [User=Tiphanan Janijai (tiphanan.jan@gmail.com)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:28:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1730401@vistec.ac.th' OR email = '1730401@vistec.ac.th') AND status_id = 1;
2019-07-24T17:28:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = '1730401@vistec.ac.th' OR email = '1730401@vistec.ac.th');
2019-07-24T17:28:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T17:28:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T17:28:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:28:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T17:28:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T17:28:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '6fd016bf47bb453d2d7b69844c85a1882fb2ae8c',
			salt = '0e718f75',
			fname = 'Taya',
			lname = 'Saothayanun',
			email = '1730401@vistec.ac.th',
			username = 'maotaysa',
			homepageId = '1',
			last_modified = '2019-07-24 17:28:04',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b6fa0697df',
			language = 'en_us',
			lastlogin = '2019-07-24 17:28:04',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '475';
2019-07-24T17:28:04+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T17:28:04+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:28:04+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:28:04+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:28:04+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T17:28:04+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:28:04+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:28:04+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '475';
2019-07-24T17:28:04+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T17:28:04+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T17:28:04+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:28:04+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T17:28:04+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T17:28:04+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '475';
2019-07-24T17:28:25+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'khpnarka' OR email = 'khpnarka') AND status_id = 1;
2019-07-24T17:28:25+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'khpnarka' OR email = 'khpnarka');
2019-07-24T17:28:25+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '432';
2019-07-24T17:28:25+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '432' AND r.resource_id = urp.resource_id;
2019-07-24T17:28:25+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '432' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:28:25+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '432';
2019-07-24T17:28:25+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '432';
2019-07-24T17:28:25+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ac608863108902dd98155caa12e982baa3c60c67',
			salt = '662619bd',
			fname = 'Narongchai',
			lname = 'Kanhanond',
			email = '1730304@vistec.ac.th',
			username = 'khpnarka',
			homepageId = '1',
			last_modified = '2019-07-24 17:28:25',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5cac502d145e3',
			language = 'en_us',
			lastlogin = '2019-07-24 17:28:25',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '432';
2019-07-24T17:28:25+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T17:28:26+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 17:28:26' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 17:28:26' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T17:28:26+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:28:26+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '432' AND r.resource_id = urp.resource_id;
2019-07-24T17:28:26+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '432' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:28:26+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '432')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '432');
2019-07-24T17:28:26+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:28:26+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '432';
2019-07-24T17:28:26+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '432';
2019-07-24T17:28:26+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '432' AND r.resource_id = urp.resource_id;
2019-07-24T17:28:26+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '432' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:28:26+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '432';
2019-07-24T17:28:26+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '432';
2019-07-24T17:28:26+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:28:26+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:28:26+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:28:26+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '432';
2019-07-24T17:28:26+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '432';
2019-07-24T17:28:26+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '432' AND r.resource_id = urp.resource_id;
2019-07-24T17:28:26+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '432' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:28:26+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '432';
2019-07-24T17:28:26+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '432';
2019-07-24T17:28:26+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ac608863108902dd98155caa12e982baa3c60c67',
			salt = '662619bd',
			fname = 'Narongchai',
			lname = 'Kanhanond',
			email = '1730304@vistec.ac.th',
			username = 'khpnarka',
			homepageId = '1',
			last_modified = '2019-07-24 17:28:26',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5cac502d145e3',
			language = 'en_us',
			lastlogin = '2019-07-24 17:28:25',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '432';
2019-07-24T17:28:26+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('432' = -1 OR ru.user_id = '432') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T17:28:26+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:28:30+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:28:30+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:28:30+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:28:30+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:28:30+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:28:30+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:28:30+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:28:30+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:28:30+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '432' AND r.resource_id = urp.resource_id;
2019-07-24T17:28:30+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '432' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:28:30+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '432')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '432');
2019-07-24T17:28:30+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:28:30+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:28:30+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T17:28:30+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:28:30+07:00 [12231] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 21:00:00' AND ri.start_date <= '2019-07-24 23:00:00') OR
					(ri.end_date >= '2019-07-24 21:00:00' AND ri.end_date <= '2019-07-24 23:00:00') OR
					(ri.start_date <= '2019-07-24 21:00:00' AND ri.end_date >= '2019-07-24 23:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-24 21:00:00' AND bi.start_date <= '2019-07-24 23:00:00')
				OR
				(bi.end_date >= '2019-07-24 21:00:00' AND bi.end_date <= '2019-07-24 23:00:00')
				OR
				(bi.start_date <= '2019-07-24 21:00:00' AND bi.end_date >= '2019-07-24 23:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '475' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475');
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '475';
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-24 17:28:31', null, null, '0', false, 'none', '', '1', '1', '475', 'Powder mode');
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3471', '2', '1');
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('27', '1', '2', '3471');
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('37', '1', 'None', '3471');
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '3471');
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('49', '1', 'Powder', '3471');
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-24 21:00:00', '2019-07-24 23:00:00', '5d3832cf9edb5509996442', '3471', null);
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3458', '475', '1');
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '475';
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T17:28:31+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T17:28:34+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 17:28:34' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 17:28:34' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T17:28:34+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:28:34+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T17:28:34+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '475' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:28:34+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475');
2019-07-24T17:28:34+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:28:34+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '475';
2019-07-24T17:28:34+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T17:28:34+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T17:28:34+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:28:34+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T17:28:34+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T17:28:34+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:28:34+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:28:34+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:28:34+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T17:28:34+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T17:28:34+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:28:34+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:28:34+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T17:28:34+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:28:34+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T17:28:34+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T17:28:34+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '432' AND r.resource_id = urp.resource_id;
2019-07-24T17:28:34+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '432' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T17:28:34+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '432')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '432');
2019-07-24T17:28:34+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T17:28:34+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T17:28:34+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T17:28:34+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T17:28:34+07:00 [3863] DEBUG sql - [User=Narongchai Kanhanond (1730304@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T17:28:34+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '475';
2019-07-24T17:28:34+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T17:28:34+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T17:28:34+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T17:28:34+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T17:28:34+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T17:28:34+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '6fd016bf47bb453d2d7b69844c85a1882fb2ae8c',
			salt = '0e718f75',
			fname = 'Taya',
			lname = 'Saothayanun',
			email = '1730401@vistec.ac.th',
			username = 'maotaysa',
			homepageId = '1',
			last_modified = '2019-07-24 17:28:34',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b6fa0697df',
			language = 'en_us',
			lastlogin = '2019-07-24 17:28:04',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '475';
2019-07-24T17:28:34+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('475' = -1 OR ru.user_id = '475') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T17:28:34+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T18:02:01+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T18:02:01+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T18:02:01+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T18:02:01+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T18:02:01+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T18:02:01+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T18:02:01+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T18:02:01+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T18:02:01+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T18:02:01+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '475' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T18:02:01+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475');
2019-07-24T18:02:01+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T18:02:01+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T18:02:01+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T18:02:01+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T18:02:01+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T18:02:05+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T18:02:05+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T18:02:05+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T18:02:05+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T18:02:05+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T18:02:05+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T18:02:05+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T18:02:05+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T18:02:06+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T18:02:06+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '475' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T18:02:06+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475');
2019-07-24T18:02:06+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T18:02:06+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T18:02:06+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T18:02:06+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T18:02:06+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T18:51:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1730306@vistec.ac.th' OR email = '1730306@vistec.ac.th') AND status_id = 1;
2019-07-24T18:51:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = '1730306@vistec.ac.th' OR email = '1730306@vistec.ac.th');
2019-07-24T18:51:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-07-24T18:51:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-07-24T18:51:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-07-24T18:51:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-07-24T18:51:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-07-24T18:51:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '337b11c4f9585c8e8a3e3f6a5f8e3bafbb227156',
			salt = '2207afd8',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-07-24 18:51:06',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-07-24 18:51:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-07-24T18:51:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T18:51:06+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 18:51:06' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 18:51:06' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T18:51:06+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T18:51:06+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-07-24T18:51:06+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T18:51:06+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-07-24T18:51:06+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T18:51:06+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-07-24T18:51:06+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-07-24T18:51:06+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-07-24T18:51:06+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-07-24T18:51:06+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-07-24T18:51:06+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-07-24T18:51:06+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T18:51:06+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T18:51:06+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T18:51:07+07:00 [12231] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '431';
2019-07-24T18:51:07+07:00 [12231] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '431';
2019-07-24T18:51:07+07:00 [12231] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-07-24T18:51:07+07:00 [12231] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '431' AND (null is null OR r.role_level IN (null) );
2019-07-24T18:51:07+07:00 [12231] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '431';
2019-07-24T18:51:07+07:00 [12231] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '431';
2019-07-24T18:51:07+07:00 [12231] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '337b11c4f9585c8e8a3e3f6a5f8e3bafbb227156',
			salt = '2207afd8',
			fname = 'Nattiya',
			lname = 'Laiwattanapaisarn',
			email = '1730306@vistec.ac.th',
			username = 'khpnatla',
			homepageId = '1',
			last_modified = '2019-07-24 18:51:07',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c88b5fa60e3e',
			language = 'en_us',
			lastlogin = '2019-07-24 18:51:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '431';
2019-07-24T18:51:07+07:00 [12231] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('431' = -1 OR ru.user_id = '431') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T18:51:07+07:00 [12231] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T18:51:10+07:00 [3895] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T18:51:10+07:00 [3895] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T18:51:10+07:00 [3895] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T18:51:10+07:00 [3895] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T18:51:10+07:00 [3895] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T18:51:10+07:00 [3895] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T18:51:10+07:00 [3895] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T18:51:10+07:00 [3895] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T18:51:10+07:00 [3895] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-07-24T18:51:10+07:00 [3895] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T18:51:10+07:00 [3895] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-07-24T18:51:10+07:00 [3895] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T18:51:10+07:00 [3895] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T18:51:10+07:00 [3895] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T18:51:10+07:00 [3895] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T18:51:10+07:00 [3895] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T18:51:13+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T18:51:13+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T18:51:13+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '22' OR r.schedule_id = '22')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T18:51:13+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T18:51:13+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T18:51:13+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T18:51:13+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T18:51:13+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '22' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T18:51:13+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '431' AND r.resource_id = urp.resource_id;
2019-07-24T18:51:13+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '431' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T18:51:13+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '431');
2019-07-24T18:51:13+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('22')) AND
					('0' = 1 OR rr.resource_id IN ('28'))
			ORDER BY ri.start_date ASC;
2019-07-24T18:51:13+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T18:51:13+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('22' = -1 OR r.schedule_id = '22')
		ORDER BY bi.start_date ASC;
2019-07-24T18:51:13+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '22'
		ORDER BY tb.start_time;
2019-07-24T18:51:13+07:00 [3863] DEBUG sql - [User=Nattiya Laiwattanapaisarn (1730306@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '22';
2019-07-24T19:28:44+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'dacarjjo' OR email = 'dacarjjo') AND status_id = 1;
2019-07-24T19:28:44+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'dacarjjo' OR email = 'dacarjjo');
2019-07-24T19:28:44+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '406';
2019-07-24T19:28:44+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T19:28:44+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '406' AND (null is null OR r.role_level IN (null) );
2019-07-24T19:28:44+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '406';
2019-07-24T19:28:44+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '406';
2019-07-24T19:28:44+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '47eedafcc4d2f6049396b7203e49e8a9d8014477',
			salt = '054f45b8',
			fname = 'Arjaree',
			lname = 'Jobdeedamrong',
			email = '1630301@vistec.ac.th',
			username = 'dacarjjo',
			homepageId = '1',
			last_modified = '2019-07-24 19:28:44',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9070eb8aed6',
			language = 'en_us',
			lastlogin = '2019-07-24 19:28:44',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '406';
2019-07-24T19:28:44+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T19:28:45+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T19:28:45+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T19:28:45+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T19:28:45+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T19:28:45+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T19:28:45+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T19:28:45+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '406';
2019-07-24T19:28:45+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '406';
2019-07-24T19:28:45+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T19:28:45+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '406' AND (null is null OR r.role_level IN (null) );
2019-07-24T19:28:45+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '406';
2019-07-24T19:28:45+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '406';
2019-07-24T19:28:45+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '406';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-25 20:00:00' AND ri.start_date <= '2019-07-25 22:00:00') OR
					(ri.end_date >= '2019-07-25 20:00:00' AND ri.end_date <= '2019-07-25 22:00:00') OR
					(ri.start_date <= '2019-07-25 20:00:00' AND ri.end_date >= '2019-07-25 22:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-25 20:00:00' AND bi.start_date <= '2019-07-25 22:00:00')
				OR
				(bi.end_date >= '2019-07-25 20:00:00' AND bi.end_date <= '2019-07-25 22:00:00')
				OR
				(bi.start_date <= '2019-07-25 20:00:00' AND bi.end_date >= '2019-07-25 22:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '406' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406');
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '406';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '406';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '406' AND (null is null OR r.role_level IN (null) );
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '406';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '406';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 19:28:53' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-24 19:28:53' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-24 19:28:53' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('406' = -1 OR ru.user_id = '406') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-24 19:28:53', null, null, '0', false, 'none', '', '1', '1', '406', null);
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3472', '19', '1');
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-25 20:00:00', '2019-07-25 22:00:00', '5d384f05a393b579364219', '3472', null);
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3459', '406', '1');
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3459', '407', '2');
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '406';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '406';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '406' AND (null is null OR r.role_level IN (null) );
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '406';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '406';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '407';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '407';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '407' AND r.resource_id = urp.resource_id;
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '407' AND (null is null OR r.role_level IN (null) );
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '407';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '407';
2019-07-24T19:28:53+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T19:29:01+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 19:29:00' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 19:29:00' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T19:29:01+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T19:29:01+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T19:29:01+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '406' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T19:29:01+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406');
2019-07-24T19:29:01+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T19:29:01+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '406';
2019-07-24T19:29:01+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '406';
2019-07-24T19:29:01+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T19:29:01+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '406' AND (null is null OR r.role_level IN (null) );
2019-07-24T19:29:01+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '406';
2019-07-24T19:29:01+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '406';
2019-07-24T19:29:01+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T19:29:01+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T19:29:01+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T19:29:01+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '406';
2019-07-24T19:29:01+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '406';
2019-07-24T19:29:01+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T19:29:01+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '406' AND (null is null OR r.role_level IN (null) );
2019-07-24T19:29:01+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '406';
2019-07-24T19:29:01+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '406';
2019-07-24T19:29:01+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '47eedafcc4d2f6049396b7203e49e8a9d8014477',
			salt = '054f45b8',
			fname = 'Arjaree',
			lname = 'Jobdeedamrong',
			email = '1630301@vistec.ac.th',
			username = 'dacarjjo',
			homepageId = '1',
			last_modified = '2019-07-24 19:29:01',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9070eb8aed6',
			language = 'en_us',
			lastlogin = '2019-07-24 19:28:44',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '406';
2019-07-24T19:29:01+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('406' = -1 OR ru.user_id = '406') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T19:29:01+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T19:30:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1730401@vistec.ac.th' OR email = '1730401@vistec.ac.th') AND status_id = 1;
2019-07-24T19:30:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = '1730401@vistec.ac.th' OR email = '1730401@vistec.ac.th');
2019-07-24T19:30:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T19:30:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T19:30:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T19:30:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T19:30:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T19:30:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '6fd016bf47bb453d2d7b69844c85a1882fb2ae8c',
			salt = '0e718f75',
			fname = 'Taya',
			lname = 'Saothayanun',
			email = '1730401@vistec.ac.th',
			username = 'maotaysa',
			homepageId = '1',
			last_modified = '2019-07-24 19:30:06',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b6fa0697df',
			language = 'en_us',
			lastlogin = '2019-07-24 19:30:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '475';
2019-07-24T19:30:06+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T19:30:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1730401@vistec.ac.th' OR email = '1730401@vistec.ac.th') AND status_id = 1;
2019-07-24T19:30:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM users WHERE (username = '1730401@vistec.ac.th' OR email = '1730401@vistec.ac.th');
2019-07-24T19:30:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T19:30:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T19:30:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T19:30:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T19:30:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T19:30:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '6fd016bf47bb453d2d7b69844c85a1882fb2ae8c',
			salt = '0e718f75',
			fname = 'Taya',
			lname = 'Saothayanun',
			email = '1730401@vistec.ac.th',
			username = 'maotaysa',
			homepageId = '1',
			last_modified = '2019-07-24 19:30:06',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b6fa0697df',
			language = 'en_us',
			lastlogin = '2019-07-24 19:30:06',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '475';
2019-07-24T19:30:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T19:30:06+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T19:30:06+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T19:30:06+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T19:30:06+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T19:30:06+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T19:30:06+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T19:30:06+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '475';
2019-07-24T19:30:06+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T19:30:06+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T19:30:06+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T19:30:06+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T19:30:06+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T19:30:06+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '475';
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '2';
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '2';
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '2';
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 23:00:00' AND ri.start_date <= '2019-07-25 00:00:00') OR
					(ri.end_date >= '2019-07-24 23:00:00' AND ri.end_date <= '2019-07-25 00:00:00') OR
					(ri.start_date <= '2019-07-24 23:00:00' AND ri.end_date >= '2019-07-25 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('2'))
			ORDER BY ri.start_date ASC;
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-24 23:00:00' AND bi.start_date <= '2019-07-25 00:00:00')
				OR
				(bi.end_date >= '2019-07-24 23:00:00' AND bi.end_date <= '2019-07-25 00:00:00')
				OR
				(bi.start_date <= '2019-07-24 23:00:00' AND bi.end_date >= '2019-07-25 00:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '475' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475');
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '475';
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-24 19:30:20', null, null, '0', false, 'none', '', '1', '1', '475', 'Powder mode');
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3473', '2', '1');
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('27', '1', '2', '3473');
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('37', '1', 'None', '3473');
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('38', '1', '', '3473');
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO custom_attribute_values (custom_attribute_id, attribute_category, attribute_value, entity_id)
			VALUES ('49', '1', 'Powder', '3473');
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-24 23:00:00', '2019-07-25 00:00:00', '5d384f5cbab68451036037', '3473', null);
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3460', '475', '1');
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '475';
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T19:30:20+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T19:57:05+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'vdetanke' OR email = 'vdetanke') AND status_id = 1;
2019-07-24T19:57:05+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'vdetanke' OR email = 'vdetanke');
2019-07-24T19:57:05+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '390';
2019-07-24T19:57:05+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '390' AND r.resource_id = urp.resource_id;
2019-07-24T19:57:05+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '390' AND (null is null OR r.role_level IN (null) );
2019-07-24T19:57:05+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '390';
2019-07-24T19:57:05+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '390';
2019-07-24T19:57:05+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'c0939108cb022a418e4f474d320eecb82f0355bb',
			salt = '417c495c',
			fname = 'Tanika',
			lname = 'Kessaratikoon',
			email = 'tanika.k_s18@vistec.ac.th',
			username = 'vdetanke',
			homepageId = '1',
			last_modified = '2019-07-24 19:57:05',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5cde606686480',
			language = 'en_us',
			lastlogin = '2019-07-24 19:57:05',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '390';
2019-07-24T19:57:05+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T19:57:05+07:00 [3895] DEBUG sql - [User=Tanika Kessaratikoon (tanika.k_s18@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T19:57:05+07:00 [3895] DEBUG sql - [User=Tanika Kessaratikoon (tanika.k_s18@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T19:57:05+07:00 [3895] DEBUG sql - [User=Tanika Kessaratikoon (tanika.k_s18@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T19:57:05+07:00 [3895] DEBUG sql - [User=Tanika Kessaratikoon (tanika.k_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T19:57:05+07:00 [3895] DEBUG sql - [User=Tanika Kessaratikoon (tanika.k_s18@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T19:57:05+07:00 [3895] DEBUG sql - [User=Tanika Kessaratikoon (tanika.k_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T19:57:05+07:00 [3895] DEBUG sql - [User=Tanika Kessaratikoon (tanika.k_s18@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T19:57:05+07:00 [3895] DEBUG sql - [User=Tanika Kessaratikoon (tanika.k_s18@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T19:57:05+07:00 [3895] DEBUG sql - [User=Tanika Kessaratikoon (tanika.k_s18@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '390' AND r.resource_id = urp.resource_id;
2019-07-24T19:57:05+07:00 [3895] DEBUG sql - [User=Tanika Kessaratikoon (tanika.k_s18@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '390' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T19:57:05+07:00 [3895] DEBUG sql - [User=Tanika Kessaratikoon (tanika.k_s18@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '390')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '390');
2019-07-24T19:57:05+07:00 [3895] DEBUG sql - [User=Tanika Kessaratikoon (tanika.k_s18@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T19:57:06+07:00 [3895] DEBUG sql - [User=Tanika Kessaratikoon (tanika.k_s18@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T19:57:06+07:00 [3895] DEBUG sql - [User=Tanika Kessaratikoon (tanika.k_s18@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T19:57:06+07:00 [3895] DEBUG sql - [User=Tanika Kessaratikoon (tanika.k_s18@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T19:57:06+07:00 [3895] DEBUG sql - [User=Tanika Kessaratikoon (tanika.k_s18@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T20:10:26+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'dacarjjo' OR email = 'dacarjjo') AND status_id = 1;
2019-07-24T20:10:26+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'dacarjjo' OR email = 'dacarjjo');
2019-07-24T20:10:26+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '406';
2019-07-24T20:10:26+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T20:10:26+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '406' AND (null is null OR r.role_level IN (null) );
2019-07-24T20:10:26+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '406';
2019-07-24T20:10:26+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '406';
2019-07-24T20:10:26+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '47eedafcc4d2f6049396b7203e49e8a9d8014477',
			salt = '054f45b8',
			fname = 'Arjaree',
			lname = 'Jobdeedamrong',
			email = '1630301@vistec.ac.th',
			username = 'dacarjjo',
			homepageId = '1',
			last_modified = '2019-07-24 20:10:26',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c9070eb8aed6',
			language = 'en_us',
			lastlogin = '2019-07-24 20:10:26',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '406';
2019-07-24T20:10:26+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T20:10:26+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T20:10:26+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T20:10:26+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:10:26+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:10:26+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T20:10:26+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T20:10:26+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T20:10:26+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:10:26+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T20:10:26+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '406' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T20:10:26+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406');
2019-07-24T20:10:26+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T20:10:26+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T20:10:26+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T20:10:26+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T20:10:26+07:00 [3863] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T20:10:34+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T20:10:34+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T20:10:34+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:10:34+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:10:34+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T20:10:34+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T20:10:34+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T20:10:34+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:10:34+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T20:10:34+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '406' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T20:10:34+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406');
2019-07-24T20:10:34+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T20:10:34+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T20:10:34+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T20:10:35+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T20:10:35+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T20:10:37+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T20:10:37+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T20:10:37+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:10:37+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:10:37+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T20:10:37+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T20:10:37+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T20:10:37+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:10:37+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T20:10:37+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '406' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T20:10:37+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406');
2019-07-24T20:10:37+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T20:10:37+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T20:10:37+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T20:10:37+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T20:10:37+07:00 [3895] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT ri.*, rs.*, rr.*, u.user_id, u.fname, u.lname, u.email, u.phone, r.schedule_id, r.name, rs.status_id as status_id,g.group_id,g.name AS name_group
		FROM reservation_instances ri
		INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
		INNER JOIN users u ON u.user_id = rs.owner_id
		LEFT JOIN user_groups ug ON u.user_id = ug.user_id
		LEFT JOIN groups g ON g.group_id = ug.group_id
		INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id AND rr.resource_level_id = '1'
		INNER JOIN resources r ON r.resource_id = rr.resource_id
		WHERE
			reference_number = '5d384f05a393b579364219' AND
			rs.status_id <> 2;
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, rr.resource_level_id, s.admin_group_id as s_admin_group_id
		FROM reservation_resources rr
		INNER JOIN resources r ON rr.resource_id = r.resource_id
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		WHERE rr.series_id = '3472'
		ORDER BY resource_level_id, r.name;
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			u.user_id,
			u.fname,
			u.lname,
			u.email,
			ru.*
		FROM reservation_users ru
		INNER JOIN users u ON ru.user_id = u.user_id
		WHERE reservation_instance_id = '3459';
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT *
		FROM reservation_accessories ra
		INNER JOIN accessories a ON ra.accessory_id = a.accessory_id
		WHERE ra.series_id = '3472';
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '1' AND cav.entity_id = '3472';
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_files WHERE series_id = '3472';
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_reminders WHERE series_id = '3472';
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT	rg.*
		FROM reservation_guests rg
		WHERE reservation_instance_id = '3459';
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '406';
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '406';
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '406' AND (null is null OR r.role_level IN (null) );
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '406';
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '406';
2019-07-24T20:10:51+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '406';
2019-07-24T20:10:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T20:10:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T20:10:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:10:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:10:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T20:10:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T20:10:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T20:10:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:10:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '406' AND r.resource_id = urp.resource_id;
2019-07-24T20:10:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '406' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T20:10:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '406');
2019-07-24T20:10:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T20:10:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T20:10:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T20:10:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T20:10:58+07:00 [12231] DEBUG sql - [User=Arjaree Jobdeedamrong (1630301@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T20:21:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'maochati' OR email = 'maochati') AND status_id = 1;
2019-07-24T20:21:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'maochati' OR email = 'maochati');
2019-07-24T20:21:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '483';
2019-07-24T20:21:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '483' AND r.resource_id = urp.resource_id;
2019-07-24T20:21:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '483' AND (null is null OR r.role_level IN (null) );
2019-07-24T20:21:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '483';
2019-07-24T20:21:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '483';
2019-07-24T20:21:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '416c31e85a1ce96058cf6286042afdc038b6f6a3',
			salt = '7c70e4fc',
			fname = 'Chalunda',
			lname = 'Tirayaphanitchkul',
			email = '1830403@vistec.ac.th',
			username = 'maochati',
			homepageId = '1',
			last_modified = '2019-07-24 20:21:32',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c94bb3eb4aab',
			language = 'en_us',
			lastlogin = '2019-07-24 20:21:32',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '483';
2019-07-24T20:21:32+07:00 [3895] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T20:21:32+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T20:21:32+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T20:21:32+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:21:32+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:21:32+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T20:21:32+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T20:21:32+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T20:21:32+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:21:32+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '483' AND r.resource_id = urp.resource_id;
2019-07-24T20:21:32+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '483' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T20:21:32+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483');
2019-07-24T20:21:32+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-03-25 00:00:00' AND ri.start_date <= '2019-04-01 00:00:00') OR
					(ri.end_date >= '2019-03-25 00:00:00' AND ri.end_date <= '2019-04-01 00:00:00') OR
					(ri.start_date <= '2019-03-25 00:00:00' AND ri.end_date >= '2019-04-01 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T20:21:32+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T20:21:32+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-03-25 00:00:00' AND bi.start_date <= '2019-04-01 00:00:00')
				OR
				(bi.end_date >= '2019-03-25 00:00:00' AND bi.end_date <= '2019-04-01 00:00:00')
				OR
				(bi.start_date <= '2019-03-25 00:00:00' AND bi.end_date >= '2019-04-01 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T20:21:32+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T20:21:32+07:00 [3863] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T20:21:36+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T20:21:36+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T20:21:36+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:21:36+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:21:36+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T20:21:36+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T20:21:36+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T20:21:36+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T20:21:36+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '483' AND r.resource_id = urp.resource_id;
2019-07-24T20:21:36+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '483' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T20:21:36+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '483');
2019-07-24T20:21:36+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T20:21:36+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T20:21:36+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T20:21:37+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T20:21:37+07:00 [12231] DEBUG sql - [User=Chalunda Tirayaphanitchkul (1830403@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T21:49:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'vipnutch' OR email = 'vipnutch') AND status_id = 1;
2019-07-24T21:49:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'vipnutch' OR email = 'vipnutch');
2019-07-24T21:49:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '472';
2019-07-24T21:49:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '472' AND r.resource_id = urp.resource_id;
2019-07-24T21:49:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '472' AND (null is null OR r.role_level IN (null) );
2019-07-24T21:49:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '472';
2019-07-24T21:49:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '472';
2019-07-24T21:49:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ded18653db5d4c3a0aeee1f3f889e1f9140eed03',
			salt = '64f517ae',
			fname = 'Nuttapong',
			lname = 'Chantanop',
			email = '1730307@vistec.ac.th',
			username = 'vipnutch',
			homepageId = '1',
			last_modified = '2019-07-24 21:49:43',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c90f7e3a1aa6',
			language = 'en_us',
			lastlogin = '2019-07-24 21:49:43',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '472';
2019-07-24T21:49:43+07:00 [12231] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T21:49:43+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 21:49:43' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 21:49:43' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T21:49:43+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T21:49:43+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '472' AND r.resource_id = urp.resource_id;
2019-07-24T21:49:43+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '472' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T21:49:43+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '472')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '472');
2019-07-24T21:49:43+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T21:49:43+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '472';
2019-07-24T21:49:43+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '472';
2019-07-24T21:49:43+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '472' AND r.resource_id = urp.resource_id;
2019-07-24T21:49:43+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '472' AND (null is null OR r.role_level IN (null) );
2019-07-24T21:49:43+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '472';
2019-07-24T21:49:43+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '472';
2019-07-24T21:49:43+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T21:49:43+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T21:49:43+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T21:49:44+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '472';
2019-07-24T21:49:44+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '472';
2019-07-24T21:49:44+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '472' AND r.resource_id = urp.resource_id;
2019-07-24T21:49:44+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '472' AND (null is null OR r.role_level IN (null) );
2019-07-24T21:49:44+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '472';
2019-07-24T21:49:44+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '472';
2019-07-24T21:49:44+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = 'ded18653db5d4c3a0aeee1f3f889e1f9140eed03',
			salt = '64f517ae',
			fname = 'Nuttapong',
			lname = 'Chantanop',
			email = '1730307@vistec.ac.th',
			username = 'vipnutch',
			homepageId = '1',
			last_modified = '2019-07-24 21:49:44',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c90f7e3a1aa6',
			language = 'en_us',
			lastlogin = '2019-07-24 21:49:43',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '472';
2019-07-24T21:49:44+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('472' = -1 OR ru.user_id = '472') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T21:49:44+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T21:49:47+07:00 [12231] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T21:49:47+07:00 [12231] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T21:49:47+07:00 [12231] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T21:49:47+07:00 [12231] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T21:49:47+07:00 [12231] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T21:49:47+07:00 [12231] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T21:49:47+07:00 [12231] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T21:49:47+07:00 [12231] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T21:49:47+07:00 [12231] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '472' AND r.resource_id = urp.resource_id;
2019-07-24T21:49:47+07:00 [12231] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '472' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T21:49:47+07:00 [12231] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '472')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '472');
2019-07-24T21:49:47+07:00 [12231] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T21:49:47+07:00 [12231] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T21:49:47+07:00 [12231] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T21:49:47+07:00 [12231] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T21:49:47+07:00 [12231] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T21:49:53+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T21:49:53+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T21:49:53+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T21:49:53+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T21:49:53+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T21:49:53+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T21:49:53+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T21:49:53+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T21:49:53+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '472' AND r.resource_id = urp.resource_id;
2019-07-24T21:49:53+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '472' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T21:49:53+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '472')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '472');
2019-07-24T21:49:53+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T21:49:53+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T21:49:53+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T21:49:53+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T21:49:53+07:00 [3895] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T21:49:57+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T21:49:57+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T21:49:57+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '20' OR r.schedule_id = '20')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T21:49:57+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '20' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T21:49:57+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T21:49:57+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T21:49:57+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T21:49:57+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '20' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T21:49:57+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '472' AND r.resource_id = urp.resource_id;
2019-07-24T21:49:57+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '472' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T21:49:57+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '472')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '472');
2019-07-24T21:49:57+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('20')) AND
					('0' = 1 OR rr.resource_id IN ('24'))
			ORDER BY ri.start_date ASC;
2019-07-24T21:49:57+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T21:49:57+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('20' = -1 OR r.schedule_id = '20')
		ORDER BY bi.start_date ASC;
2019-07-24T21:49:57+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '20'
		ORDER BY tb.start_time;
2019-07-24T21:49:57+07:00 [3863] DEBUG sql - [User=Nuttapong Chantanop (1730307@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '20';
2019-07-24T22:11:27+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = 'chwpandu' OR email = 'chwpandu') AND status_id = 1;
2019-07-24T22:11:27+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = 'chwpandu' OR email = 'chwpandu');
2019-07-24T22:11:27+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T22:11:27+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T22:11:27+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T22:11:27+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T22:11:27+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T22:11:27+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '11d04029d6afd0be22580a80023b082af3a264e6',
			salt = '43422d6a',
			fname = 'Pannida',
			lname = 'Dugkhuntod',
			email = 's15_pannida.d@vistec.ac.th',
			username = 'chwpandu',
			homepageId = '1',
			last_modified = '2019-07-24 22:11:27',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c89d4cb4a9f9',
			language = 'en_us',
			lastlogin = '2019-07-24 22:11:27',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '421';
2019-07-24T22:11:27+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T22:11:28+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 22:11:28' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 22:11:28' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T22:11:28+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:11:28+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T22:11:28+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T22:11:28+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T22:11:28+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T22:11:28+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T22:11:28+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T22:11:28+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T22:11:28+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T22:11:28+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T22:11:28+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T22:11:28+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T22:11:28+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:11:28+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:11:29+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T22:11:29+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T22:11:29+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T22:11:29+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T22:11:29+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T22:11:29+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T22:11:29+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '11d04029d6afd0be22580a80023b082af3a264e6',
			salt = '43422d6a',
			fname = 'Pannida',
			lname = 'Dugkhuntod',
			email = 's15_pannida.d@vistec.ac.th',
			username = 'chwpandu',
			homepageId = '1',
			last_modified = '2019-07-24 22:11:29',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c89d4cb4a9f9',
			language = 'en_us',
			lastlogin = '2019-07-24 22:11:27',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '421';
2019-07-24T22:11:29+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('421' = -1 OR ru.user_id = '421') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T22:11:29+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T22:11:36+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T22:11:36+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T22:11:36+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:11:36+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:11:36+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T22:11:36+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T22:11:36+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T22:11:36+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:11:36+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T22:11:36+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T22:11:36+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T22:11:36+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T22:11:36+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T22:11:36+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T22:11:36+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T22:11:36+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T22:11:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T22:11:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T22:11:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:11:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:11:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T22:11:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T22:11:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T22:11:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:11:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T22:11:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T22:11:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T22:11:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T22:11:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T22:11:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T22:11:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T22:11:44+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T22:14:26+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*, 
			(SELECT GROUP_CONCAT(ag.group_id) FROM announcement_groups ag WHERE ag.announcementid = a.announcementid) as group_ids,
			(SELECT GROUP_CONCAT(ar.resource_id) FROM announcement_resources ar WHERE ar.announcementid = a.announcementid) as resource_ids
			FROM announcements a
		WHERE (CONVERT(CONCAT(DATE_FORMAT(start_date, "%Y-%m-%d"), " " ,start_time), DATETIME) <= '2019-07-24 22:14:26' AND CONVERT(CONCAT(DATE_FORMAT(end_date, "%Y-%m-%d"), " " ,end_time), DATETIME) >= '2019-07-24 22:14:26' AND (a.status_deleted != "1" OR a.status_deleted IS NULL)) OR (end_date IS NULL)
		ORDER BY start_date, priority,  end_date;
2019-07-24T22:14:26+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:14:26+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T22:14:26+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T22:14:26+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T22:14:26+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T22:14:26+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T22:14:26+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T22:14:26+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T22:14:26+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T22:14:26+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T22:14:26+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T22:14:26+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T22:14:26+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '-1' OR r.schedule_id = '-1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:14:26+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE 1=1 ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:14:26+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T22:14:26+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T22:14:26+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T22:14:26+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T22:14:26+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T22:14:26+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T22:14:26+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '11d04029d6afd0be22580a80023b082af3a264e6',
			salt = '43422d6a',
			fname = 'Pannida',
			lname = 'Dugkhuntod',
			email = 's15_pannida.d@vistec.ac.th',
			username = 'chwpandu',
			homepageId = '1',
			last_modified = '2019-07-24 22:14:26',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c89d4cb4a9f9',
			language = 'en_us',
			lastlogin = '2019-07-24 22:11:27',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '421';
2019-07-24T22:14:26+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-01 00:00:00' AND ri.start_date <= '2019-08-13 00:00:00') OR
					(ri.end_date >= '2019-07-01 00:00:00' AND ri.end_date <= '2019-08-13 00:00:00') OR
					(ri.start_date <= '2019-07-01 00:00:00' AND ri.end_date >= '2019-08-13 00:00:00')) AND
					('421' = -1 OR ru.user_id = '421') AND
					('0' = 0 OR ru.reservation_user_level = '0') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T22:14:26+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T22:14:32+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T22:14:32+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T22:14:32+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:14:32+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:14:32+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T22:14:32+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T22:14:32+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T22:14:32+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:14:32+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T22:14:32+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T22:14:32+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T22:14:32+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T22:14:32+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T22:14:32+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T22:14:32+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T22:14:32+07:00 [3863] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T22:14:36+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T22:14:36+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T22:14:36+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:14:36+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:14:36+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T22:14:36+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T22:14:36+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T22:14:36+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:14:36+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T22:14:36+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T22:14:36+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T22:14:36+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T22:14:36+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T22:14:36+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T22:14:36+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T22:14:36+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T22:14:42+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T22:14:42+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:14:42+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:14:42+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T22:14:42+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T22:14:42+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T22:14:42+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T22:14:42+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T22:14:42+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T22:14:42+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T22:14:42+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T22:14:42+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T22:14:42+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-25 07:00:00' AND ri.start_date <= '2019-07-25 09:00:00') OR
					(ri.end_date >= '2019-07-25 07:00:00' AND ri.end_date <= '2019-07-25 09:00:00') OR
					(ri.start_date <= '2019-07-25 07:00:00' AND ri.end_date >= '2019-07-25 09:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-25 07:00:00' AND bi.start_date <= '2019-07-25 09:00:00')
				OR
				(bi.end_date >= '2019-07-25 07:00:00' AND bi.end_date <= '2019-07-25 09:00:00')
				OR
				(bi.start_date <= '2019-07-25 07:00:00' AND bi.end_date >= '2019-07-25 09:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 22:14:48' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-24 22:14:48' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-24 22:14:48' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('421' = -1 OR ru.user_id = '421') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-24 22:14:48', null, null, '0', false, 'none', '', '1', '1', '421', null);
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3474', '19', '1');
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-25 07:00:00', '2019-07-25 09:00:00', '5d3875e870813378866579', '3474', null);
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3461', '421', '1');
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '421';
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '421';
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '421' AND (null is null OR r.role_level IN (null) );
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '421';
2019-07-24T22:14:48+07:00 [12231] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '421';
2019-07-24T22:14:49+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T22:14:49+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T22:14:49+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:14:49+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:14:49+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T22:14:49+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T22:14:49+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T22:14:49+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:14:49+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '421' AND r.resource_id = urp.resource_id;
2019-07-24T22:14:49+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '421' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T22:14:49+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '421');
2019-07-24T22:14:49+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T22:14:49+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T22:14:49+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T22:14:49+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T22:14:49+07:00 [3895] DEBUG sql - [User=Pannida Dugkhuntod (s15_pannida.d@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T22:36:02+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT user_id, password, salt, legacypassword
		FROM users
		WHERE (username = '1730401@vistec.ac.th' OR email = '1730401@vistec.ac.th') AND status_id = 1;
2019-07-24T22:36:03+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM users WHERE (username = '1730401@vistec.ac.th' OR email = '1730401@vistec.ac.th');
2019-07-24T22:36:03+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T22:36:03+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T22:36:03+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T22:36:03+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T22:36:03+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T22:36:03+07:00 [3863] DEBUG sql - [User=  ()] MySql Execute: UPDATE users
		SET
			status_id = '1',
			password = '6fd016bf47bb453d2d7b69844c85a1882fb2ae8c',
			salt = '0e718f75',
			fname = 'Taya',
			lname = 'Saothayanun',
			email = '1730401@vistec.ac.th',
			username = 'maotaysa',
			homepageId = '1',
			last_modified = '2019-07-24 22:36:03',
			timezone = 'Asia/Bangkok',
			allow_calendar_subscription = '0',
			public_id = '5c8b6fa0697df',
			language = 'en_us',
			lastlogin = '2019-07-24 22:36:03',
			default_schedule_id = null,
			credit_count = '0.00'
		WHERE
			user_id = '475';
2019-07-24T22:36:03+07:00 [3863] DEBUG sql - [User=  ()] MySql Query: SELECT COUNT(*) as count FROM users;
2019-07-24T22:36:03+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T22:36:03+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:36:03+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:36:03+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T22:36:03+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T22:36:03+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T22:36:03+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '475';
2019-07-24T22:36:03+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T22:36:03+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T22:36:03+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T22:36:03+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T22:36:03+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T22:36:03+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '475';
2019-07-24T22:36:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T22:36:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T22:36:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '1' OR r.schedule_id = '1')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:36:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:36:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T22:36:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T22:36:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T22:36:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '1' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:36:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T22:36:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '475' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T22:36:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475');
2019-07-24T22:36:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('1')) AND
					('0' = 1 OR rr.resource_id IN ('10','17','9','23','18','7','22','15','11','13','12','14','29','8','21','20','2'))
			ORDER BY ri.start_date ASC;
2019-07-24T22:36:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T22:36:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('1' = -1 OR r.schedule_id = '1')
		ORDER BY bi.start_date ASC;
2019-07-24T22:36:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '1'
		ORDER BY tb.start_time;
2019-07-24T22:36:06+07:00 [3863] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '1';
2019-07-24T22:36:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT s.*, l.timezone FROM schedules s INNER JOIN layouts l ON s.layout_id = l.layout_id ORDER BY s.name;
2019-07-24T22:36:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T22:36:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:36:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:36:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT *,
			(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
							FROM custom_attribute_values cav INNER JOIN custom_attribute_entities cae on cav.custom_attribute_id = cae.custom_attribute_id
							WHERE cav.entity_id = r.resource_type_id AND cav.attribute_category = 5) as attribute_list
							FROM resource_types r;
2019-07-24T22:36:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '4' ORDER BY a.sort_order, a.display_label;
2019-07-24T22:36:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '5' ORDER BY a.sort_order, a.display_label;
2019-07-24T22:36:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:36:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T22:36:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '475' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T22:36:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475');
2019-07-24T22:36:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-22 00:00:00' AND ri.start_date <= '2019-07-29 00:00:00') OR
					(ri.end_date >= '2019-07-22 00:00:00' AND ri.end_date <= '2019-07-29 00:00:00') OR
					(ri.start_date <= '2019-07-22 00:00:00' AND ri.end_date >= '2019-07-29 00:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('0' = 1 OR resources.schedule_id IN ('9')) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T22:36:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T22:36:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-22 00:00:00' AND bi.start_date <= '2019-07-29 00:00:00')
				OR
				(bi.end_date >= '2019-07-22 00:00:00' AND bi.end_date <= '2019-07-29 00:00:00')
				OR
				(bi.start_date <= '2019-07-22 00:00:00' AND bi.end_date >= '2019-07-29 00:00:00')
			) AND
			('9' = -1 OR r.schedule_id = '9')
		ORDER BY bi.start_date ASC;
2019-07-24T22:36:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T22:36:10+07:00 [12231] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T22:36:26+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM resource_groups ORDER BY parent_id, resource_group_name;
2019-07-24T22:36:26+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, a.resource_group_id
		FROM resource_group_assignment a
		INNER JOIN resources r ON r.resource_id = a.resource_id
		WHERE (-1 = '9' OR r.schedule_id = '9')
		ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:36:26+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id,
		(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id, '=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = r.resource_id AND cav.attribute_category = 4) as attribute_list,
		(SELECT GROUP_CONCAT(rga.resource_group_id SEPARATOR "!sep!") FROM resource_group_assignment rga WHERE rga.resource_id = r.resource_id) AS group_list
		FROM resources r
		INNER JOIN schedules s ON r.schedule_id = s.schedule_id
		 WHERE r.schedule_id = '9' AND ( r.status_id != '0' ) ORDER BY COALESCE(r.sort_order,0), r.name;
2019-07-24T22:36:26+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T22:36:26+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T22:36:26+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T22:36:26+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '475';
2019-07-24T22:36:26+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T22:36:26+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T22:36:26+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T22:36:26+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T22:36:26+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T22:36:26+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '475';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.*, s.admin_group_id as s_admin_group_id
			FROM resources r
			INNER JOIN schedules s ON r.schedule_id = s.schedule_id
			WHERE r.resource_id = '19';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '4' AND cav.entity_id = '19';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM resource_group_assignment WHERE resource_id = '19';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-27 19:00:00' AND ri.start_date <= '2019-07-27 21:00:00') OR
					(ri.end_date >= '2019-07-27 19:00:00' AND ri.end_date <= '2019-07-27 21:00:00') OR
					(ri.start_date <= '2019-07-27 19:00:00' AND ri.end_date >= '2019-07-27 21:00:00')) AND
					('-1' = -1 OR ru.user_id = '-1') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('0' = 1 OR rr.resource_id IN ('19'))
			ORDER BY ri.start_date ASC;
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT *
		FROM blackout_instances bi
		INNER JOIN blackout_series bs ON bi.blackout_series_id = bs.blackout_series_id
		INNER JOIN blackout_series_resources bsr ON  bi.blackout_series_id = bsr.blackout_series_id
		INNER JOIN resources r on bsr.resource_id = r.resource_id
		INNER JOIN users u ON u.user_id = bs.owner_id
		WHERE
			(
				(bi.start_date >= '2019-07-27 19:00:00' AND bi.start_date <= '2019-07-27 21:00:00')
				OR
				(bi.end_date >= '2019-07-27 19:00:00' AND bi.end_date <= '2019-07-27 21:00:00')
				OR
				(bi.start_date <= '2019-07-27 19:00:00' AND bi.end_date >= '2019-07-27 21:00:00')
			) AND
			('-1' = -1 OR r.schedule_id = '-1')
		ORDER BY bi.start_date ASC;
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			grp.group_id, r.resource_id, r.name
		FROM
			group_resource_permissions grp, resources r, user_groups ug
		WHERE
			ug.user_id = '475' AND ug.group_id = grp.group_id AND grp.resource_id = r.resource_id;
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT r.resource_id, r.name FROM resources r
		WHERE r.schedule_id IN (SELECT s.schedule_id FROM schedules s
			INNER JOIN groups g ON g.group_id = s.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475')
		OR r.resource_id IN (SELECT r2.resource_id FROM resources r2
			INNER JOIN groups g ON g.group_id = r2.admin_group_id
			INNER JOIN user_groups ug on ug.group_id = g.group_id
			WHERE ug.user_id = '475');
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '475';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM schedules s
		INNER JOIN layouts l ON s.layout_id = l.layout_id
		WHERE schedule_id = '9';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT q.*, r.name as resource_name, g.name as group_name, s.name as schedule_name
		FROM quotas q
		LEFT JOIN resources r ON r.resource_id = q.resource_id
		LEFT JOIN groups g ON g.group_id = q.group_id
		LEFT JOIN schedules s ON s.schedule_id = q.schedule_id;
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
				ri.*, rs.date_created as date_created, rs.last_modified as last_modified, rs.description as description, rs.status_id as status_id, rs.title, rs.repeat_type, rs.repeat_options,
					owner.fname as owner_fname, owner.lname as owner_lname, owner.user_id as owner_id, owner.phone as owner_phone, owner.position_id as owner_position, owner.organization as owner_organization, owner.email as email, owner.language, owner.timezone,
					resources.name, resources.resource_id, resources.schedule_id, resources.status_id as resource_status_id, resources.resource_status_reason_id, resources.buffer_time, resources.color, resources.enable_check_in, resources.auto_release_minutes, ru.reservation_user_level,
					start_reminder.minutes_prior AS start_reminder_minutes, end_reminder.minutes_prior AS end_reminder_minutes,
					(SELECT GROUP_CONCAT(groups.group_id)
						FROM user_groups groups WHERE owner.user_id = groups.user_id) as owner_group_list,

					(SELECT GROUP_CONCAT(CONCAT(participants.user_id, '=', CONCAT(participant_users.fname, " ", participant_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users participants INNER JOIN users participant_users ON participants.user_id = participant_users.user_id WHERE participants.reservation_instance_id = ri.reservation_instance_id AND participants.reservation_user_level = 2) as participant_list,

					(SELECT GROUP_CONCAT(CONCAT(invitees.user_id, '=', CONCAT(invitee_users.fname, " ", invitee_users.lname)) SEPARATOR "!sep!")
						FROM reservation_users invitees INNER JOIN users invitee_users ON invitees.user_id = invitee_users.user_id WHERE invitees.reservation_instance_id = ri.reservation_instance_id AND invitees.reservation_user_level = 3) as invitee_list,

					(SELECT GROUP_CONCAT(CONCAT(cav.custom_attribute_id,'=', cav.attribute_value) SEPARATOR "!sep!")
						FROM custom_attribute_values cav WHERE cav.entity_id = ri.series_id AND cav.attribute_category = 1) as attribute_list,

					(SELECT GROUP_CONCAT(CONCAT(p.name, "=", p.value) SEPARATOR "!sep!")
						FROM user_preferences p WHERE owner.user_id = p.user_id) as preferences,
						
					(SELECT GROUP_CONCAT(CONCAT(guests.email, "=", guests.reservation_user_level) SEPARATOR "!sep!")
						FROM reservation_guests guests WHERE guests.reservation_instance_id = ri.reservation_instance_id) as guest_list
			FROM reservation_instances ri
			INNER JOIN reservation_series rs ON rs.series_id = ri.series_id
			INNER JOIN reservation_users ru ON ru.reservation_instance_id = ri.reservation_instance_id
			INNER JOIN users ON users.user_id = rs.owner_id
			INNER JOIN users owner ON owner.user_id = rs.owner_id
			LEFT JOIN positions ON owner.position_id = positions.position_id
			INNER JOIN reservation_resources rr ON rs.series_id = rr.series_id
			INNER JOIN resources ON rr.resource_id = resources.resource_id
			INNER JOIN schedules ON resources.schedule_id = schedules.schedule_id
			LEFT JOIN reservation_reminders start_reminder ON start_reminder.series_id = rs.series_id AND start_reminder.reminder_type = 0
			LEFT JOIN reservation_reminders end_reminder ON end_reminder.series_id = rs.series_id AND end_reminder.reminder_type = 1
			
			WHERE rs.status_id <> 2
			AND ((ri.start_date >= '2019-07-24 22:36:42' AND ri.start_date <= '2019-08-01 00:00:00') OR
					(ri.end_date >= '2019-07-24 22:36:42' AND ri.end_date <= '2019-08-01 00:00:00') OR
					(ri.start_date <= '2019-07-24 22:36:42' AND ri.end_date >= '2019-08-01 00:00:00')) AND
					('475' = -1 OR ru.user_id = '475') AND
					('1' = 0 OR ru.reservation_user_level = '1') AND
					('1' = 1 OR resources.schedule_id IN (null)) AND
					('1' = 1 OR rr.resource_id IN (null))
			ORDER BY ri.start_date ASC;
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM reservation_color_rules r
		LEFT JOIN custom_attributes ca ON ca.custom_attribute_id = r.custom_attribute_id;
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			tb.label,
			tb.end_label,
			tb.start_time,
			tb.end_time,
			tb.availability_code,
			tb.day_of_week,
			l.timezone
		FROM
			time_blocks tb,
			layouts l,
			schedules s
		WHERE
			l.layout_id = s.layout_id  AND
			tb.layout_id = l.layout_id AND
			s.schedule_id = '9'
		ORDER BY tb.start_time;
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM peak_times WHERE schedule_id = '9';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*, c.num_resources,
			(SELECT GROUP_CONCAT(CONCAT(ra.resource_id, ",", COALESCE(ra.minimum_quantity,""), ",",  COALESCE(ra.maximum_quantity,"")) SEPARATOR "!sep!")
				FROM resource_accessories ra WHERE ra.accessory_id = a.accessory_id) as resource_accessory_list
 			FROM accessories a
			LEFT JOIN (
				SELECT accessory_id, COUNT(*) AS num_resources
				FROM resource_accessories ra
				GROUP BY ra.accessory_id
				) AS c ON a.accessory_id = c.accessory_id

 			ORDER BY accessory_name;
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO
        reservation_series (date_created, title, description, allow_participation, allow_anon_participation, repeat_type, repeat_options, type_id, status_id, owner_id, mode)
		VALUES ('2019-07-24 22:36:42', null, null, '0', false, 'none', '', '1', '1', '475', null);
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO reservation_resources (series_id, resource_id, resource_level_id)
		VALUES ('3475', '19', '1');
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO reservation_instances (start_date, end_date, reference_number, series_id, credit_count)
		VALUES ('2019-07-27 19:00:00', '2019-07-27 21:00:00', '5d387b0a657f7918698337', '3475', null);
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3462', '475', '1');
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Execute: INSERT INTO reservation_users (reservation_instance_id, user_id, reservation_user_level)
		VALUES ('3462', '486', '2');
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '475';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '475';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '475' AND r.resource_id = urp.resource_id;
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '475' AND (null is null OR r.role_level IN (null) );
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '475';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '475';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT u.*, p.name AS position_name FROM users u 
		LEFT JOIN positions p ON p.position_id = u.position_id
		WHERE u.user_id = '486';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT * FROM user_email_preferences WHERE user_id = '486';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT
			urp.user_id, r.resource_id, r.name
		FROM
			user_resource_permissions urp, resources r
		WHERE
			urp.user_id = '486' AND r.resource_id = urp.resource_id;
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT g.*, r.role_level
		FROM user_groups ug
		INNER JOIN groups g ON ug.group_id = g.group_id
		LEFT JOIN group_roles gr ON ug.group_id = gr.group_id
		LEFT JOIN roles r ON gr.role_id = r.role_id
		WHERE user_id = '486' AND (null is null OR r.role_level IN (null) );
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT cav.*, ca.display_label
		FROM custom_attribute_values cav
		INNER JOIN custom_attributes ca ON ca.custom_attribute_id = cav.custom_attribute_id
		WHERE cav.attribute_category = '2' AND cav.entity_id = '486';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT name, value FROM user_preferences WHERE user_id = '486';
2019-07-24T22:36:42+07:00 [3895] DEBUG sql - [User=Taya Saothayanun (1730401@vistec.ac.th)] MySql Query: SELECT a.*,
				(SELECT GROUP_CONCAT(e.entity_id SEPARATOR "!sep!")
							FROM custom_attribute_entities e WHERE e.custom_attribute_id = a.custom_attribute_id ORDER BY e.entity_id) as entity_ids,
				CASE
				WHEN a.attribute_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT(u.fname, " ", u.lname) SEPARATOR "!sep!")
													FROM users u INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND u.user_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 4 THEN (SELECT GROUP_CONCAT(r.name SEPARATOR "!sep!")
													FROM resources r INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND r.resource_id = e.entity_id ORDER BY e.entity_id)
				WHEN a.attribute_category = 5  THEN (SELECT GROUP_CONCAT(rt.resource_type_name SEPARATOR "!sep!")
													FROM resource_types rt INNER JOIN custom_attribute_entities e
													WHERE e.custom_attribute_id = a.custom_attribute_id AND rt.resource_type_id = e.entity_id ORDER BY e.entity_id)
				ELSE null
				END as entity_descriptions,
				CASE
				WHEN a.secondary_category = 2 THEN (SELECT GROUP_CONCAT(CONCAT( fname, " ", lname ) SEPARATOR  "!sep!" ) FROM users WHERE FIND_IN_SET( user_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 4 THEN (SELECT GROUP_CONCAT(name SEPARATOR  "!sep!" ) FROM resources WHERE FIND_IN_SET( resource_id, a.secondary_entity_ids ))
				WHEN a.secondary_category = 5 THEN (SELECT GROUP_CONCAT(resource_type_name SEPARATOR  "!sep!" ) FROM resource_types WHERE FIND_IN_SET( resource_type_id, a.secondary_entity_ids ))
				ELSE null
				END as secondary_entity_descriptions
				FROM custom_attributes a WHERE a.attribute_category = '1' ORDER BY a.sort_order, a.display_label;
